<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/blocks/block[@name='cntCollapsedWorkbench' or @name='cntCollapsedWorkbenchEmpty']">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="workbench"/>
      <property name="Item" value="resourceMechanicalParts"/>
      <property name="ItemCount" value="25"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
    <drop event="Harvest" name="workstationSkillMagazine" count="2,4" tag="salvageHarvest" help="dismantling it helps understand how it was built"/>
  </append>
  <append xpath="/blocks/block[@name='workbench']">
    <property name="DowngradeBlock" value="cntCollapsedWorkbench"/>
  </append>
  <append xpath="/blocks/block[@name='cntCollapsedChemistryStation']" help="ok">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="chemistryStation"/>
      <property name="Item" value="resourceForgedIron"/>
      <property name="ItemCount" value="25"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
    <drop event="Harvest" name="workstationSkillMagazine" count="3,6" tag="salvageHarvest" help="dismantling it helps understand how it was built"/>
  </append>
  <append xpath="/blocks/block[@name='chemistryStation']">
    <property name="DowngradeBlock" value="cntCollapsedChemistryStation"/>
  </append>
  <append xpath="/blocks/block[@name='cntForgeWorkstationBroken']" help="ok">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="forge"/>
      <property name="Item" value="resourceClayLump"/>
      <property name="ItemCount" value="30"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
    <drop event="Harvest" name="workstationSkillMagazine" count="1,2" tag="salvageHarvest" help="dismantling it helps understand how it was built"/>
  </append>
  <append xpath="/blocks/block[@name='forge']">
    <property name="DowngradeBlock" value="cntForgeWorkstationBroken"/>
  </append>
  <append xpath="/blocks/block[@name='cntCollapsedCementMixer']">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="cementMixer"/>
      <property name="Item" value="resourceMechanicalParts"/>
      <property name="ItemCount" value="15"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
    <drop event="Harvest" name="workstationSkillMagazine" count="1,2" tag="salvageHarvest" help="dismantling it helps understand how it was built"/>
  </append>
  <append xpath="/blocks/block[@name='cementMixer']">
    <property name="DowngradeBlock" value="cntCollapsedCementMixer"/>
  </append>
  <append xpath="/blocks/block[@name='cntCollapsedBatterybank']">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="batterybank"/>
      <property name="Item" value="resourceElectricParts"/>
      <property name="ItemCount" value="15"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
    <drop event="Harvest" name="electricianSkillMagazine" count="2,4" tag="salvageHarvest" help="dismantling it helps understand how it was built"/>
  </append>
  <append xpath="/blocks/block[@name='batterybank']">
    <property name="DowngradeBlock" value="cntCollapsedBatterybank"/>
  </append>
  <append xpath="/blocks/block[@name='cntCollapsedGeneratorbank']">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="generatorbank"/>
      <property name="Item" value="resourceElectricParts"/>
      <property name="ItemCount" value="20"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
    <drop event="Harvest" name="electricianSkillMagazine" count="1,3" tag="salvageHarvest" help="dismantling it helps understand how it was built"/>
  </append>
  <append xpath="/blocks/block[@name='generatorbank']">
    <property name="DowngradeBlock" value="cntCollapsedGeneratorbank"/>
  </append>
  <append xpath="/blocks/block[@name='cntCollapsedDewCollector']" help="OK">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="cntDewCollector"/>
      <property name="Item" value="resourceScrapPolymers"/>
      <property name="ItemCount" value="33"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
  </append>
  <append xpath="/blocks/block[@name='cntDewCollector']">
    <property name="DowngradeBlock" value="cntCollapsedDewCollector"/>
  </append>
  <append xpath="/blocks/block[@name='cntCollapsedSolarbank']">
    <property class="UpgradeBlock">
      <property name="ToBlock" value="solarbank"/>
      <property name="Item" value="resourceElectricParts"/>
      <property name="ItemCount" value="15"/>
      <property name="UpgradeHitCount" value="50"/>
    </property>
    <property class="RepairItems">
      <property name="resourceForgedIron" value="5"/>
      <property name="resourceElectricParts" value="3"/>
      <property name="resourceElectricParts" value="2"/>
      <property name="resourceScrapPolymers" value="2"/>
    </property>
    <drop event="Harvest" name="electricianSkillMagazine" count="3,6" tag="salvageHarvest" help="dismantling it helps understand how it was built. TODO: solar bank recipe should be unlocked on last electrician skill level, see nuclear power mod to tweak it too, also solarcell carbattery etc"/>
  </append>
  <append xpath="/blocks/block[@name='solarbank']">
    <property name="DowngradeBlock" value="cntCollapsedSolarbank"/>
  </append>
  <set xpath="/blocks/block[starts-with(@name,'cntCollapsed') or @name='cntForgeWorkstationBroken']   /property[@class='UpgradeBlock']   /property[@name='UpgradeHitCount']   /@value" help="easy tweaker. needs some time to cleanup the mess and reconstruct the broken parts">20</set>
  <!-- HELPGOOD: see at items.xml the fix at Allowed_upgrade_items
  <set help="ISSUE: for some reason resourceMechanicalParts and resourceElectricParts are ignored, so this is a workaround. TODO: find a way to transform both into something unique for repairing the stations"
		xpath="/blocks/block[
			@name='cntCollapsedWorkbench' or @name='cntCollapsedWorkbenchEmpty'
			or @name='cntCollapsedCementMixer'
			
			or @name='cntCollapsedBatterybank'
			or @name='cntCollapsedGeneratorbank'
			or @name='cntCollapsedSolarbank'
		]/property[@class='UpgradeBlock']/property[@name='Item']/@value">resourceForgedIron</set>
-->
  <set xpath="/blocks/block[starts-with(@name,'cntCollapsed') or @name='cntForgeWorkstationBroken']   /property[@name='CreativeMode']/@value">Player</set>
  <!-- HELPGOOD: energy generators only for Elctrn features 
      none of these are possible to pick up as they behave as containers:
        @name='cntCollapsedGeneratorbank' or
        @name='cntCollapsedBatterybank' or
        @name='solarbank' or
        @name='generatorbank' or
        @name='batterybank' or
  -->
  <append xpath="/blocks/block[         @name='cntCollapsedSolarbank'       ]">
    <property name="CanPickup" value="true" help="because has no recipe to craft it in vanilla"/>
    <drop event="Harvest" name="solarCell" count="1,3" tag="salvageHarvest"/>
  </append>
</GhussakTweaks>
