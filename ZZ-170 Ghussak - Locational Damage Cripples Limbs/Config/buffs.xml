<GhussakTweaks>
	<append xpath="/buffs/buff[@name='buffGSKConfigGeneric']">
		<effect_group help="CFG slow down common zombies in day light">
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".fGSKLimbShotDebuff" operation="set" value="0.20"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKShotLowerDebuffVal" operation="set" value="-0.005" help="sync with update_rate of buffGSKLegArmShot and .fGSKLimbShotDebuff to last 400s"/>
		</effect_group>
	</append>

	<append xpath="/buffs">
    <buff name="buffGSKLegArmShot">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="10"/>
      
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotLeftUpperArm" operation="GT" value="0" />
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="@.iGSKShotLeftUpperArm"/>
        <passive_effect name="DamageModifier" operation="perc_subtract" value="@.iGSKShotLeftUpperArm"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotRightUpperArm" operation="GT" value="0" />
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="@.iGSKShotRightUpperArm"/>
        <passive_effect name="DamageModifier" operation="perc_subtract" value="@.iGSKShotRightUpperArm"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotLeftLowerArm" operation="GT" value="0" />
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="@.iGSKShotLeftLowerArm"/>
        <passive_effect name="DamageModifier" operation="perc_subtract" value="@.iGSKShotLeftLowerArm"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotRightLowerArm" operation="GT" value="0" />
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="@.iGSKShotRightLowerArm"/>
        <passive_effect name="DamageModifier" operation="perc_subtract" value="@.iGSKShotRightLowerArm"/>
      </effect_group>
        
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotLeftUpperLeg" operation="GT" value="0" />
        <passive_effect name="RunSpeed" operation="perc_subtract" value="@.iGSKShotLeftUpperLeg"/> 
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="@.iGSKShotLeftUpperLeg"/>
        <passive_effect name="JumpStrength" operation="perc_subtract" value="@.iGSKShotLeftUpperLeg"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotRightUpperLeg" operation="GT" value="0" />
        <passive_effect name="RunSpeed" operation="perc_subtract" value="@.iGSKShotRightUpperLeg"/> 
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="@.iGSKShotRightUpperLeg"/>
        <passive_effect name="JumpStrength" operation="perc_subtract" value="@.iGSKShotRightUpperLeg"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotLeftLowerLeg" operation="GT" value="0" />
        <passive_effect name="RunSpeed" operation="perc_subtract" value="@.iGSKShotLeftLowerLeg"/> 
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="@.iGSKShotLeftLowerLeg"/>
        <passive_effect name="JumpStrength" operation="perc_subtract" value="@.iGSKShotLeftLowerLeg"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKShotRightLowerLeg" operation="GT" value="0" />
        <passive_effect name="RunSpeed" operation="perc_subtract" value="@.iGSKShotRightLowerLeg"/> 
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="@.iGSKShotRightLowerLeg"/>
        <passive_effect name="JumpStrength" operation="perc_subtract" value="@.iGSKShotRightLowerLeg"/>
      </effect_group>
      
      <effect_group help="limits and lowers the debuff with time. being below here makes it be stronger from 0s up to the update_rate time after some fast shots, as the above wont be capped">
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftLowerArm" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotLeftLowerArm" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftLowerArm" operation="add" value="@.iGSKShotLowerDebuffVal"/>
        
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftLowerLeg" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotLeftLowerLeg" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftLowerLeg" operation="add" value="@.iGSKShotLowerDebuffVal"/>
        
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftUpperArm" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotLeftUpperArm" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftUpperArm" operation="add" value="@.iGSKShotLowerDebuffVal"/>
        
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftUpperLeg" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotLeftUpperLeg" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotLeftUpperLeg" operation="add" value="@.iGSKShotLowerDebuffVal"/>
        
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightLowerArm" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotRightLowerArm" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightLowerArm" operation="add" value="@.iGSKShotLowerDebuffVal"/>
        
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightLowerLeg" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotRightLowerLeg" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightLowerLeg" operation="add" value="@.iGSKShotLowerDebuffVal"/>
        
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightUpperArm" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotRightUpperArm" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightUpperArm" operation="add" value="@.iGSKShotLowerDebuffVal"/>
        
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightUpperLeg" operation="set" value="@.fGSKLimbShotDebuff">
          <requirement name="CVarCompare" cvar=".iGSKShotRightUpperLeg" operation="GT" value="@.fGSKLimbShotDebuff" />
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKShotRightUpperLeg" operation="add" value="@.iGSKShotLowerDebuffVal"/>
      </effect_group>      
      
    </buff>
  </append>
</GhussakTweaks>
