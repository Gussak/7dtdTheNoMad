<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/gameevents">
    <action_sequence name="eventGSKpullPlayerToMe">
      <property name="allow_user_trigger" value="true"/>
      <property name="action_type" value="Game"/>
      <!-- HELPGOOD: this is not good because TeleportToTarget will flood errors if the target entity (calling this event) dies 
			<property name="allow_while_dead" value="true" help="in case you do a headshot and it dies"/>
-->
      <!-- HELPGOOD: HasSpawnedEntities seems to not detect players?
			<requirement class="HasSpawnedEntities" help="this is simply completely preventing it from working at all, why? and without this may randomly cause a lot of endless error messages on the log..">
				<property name="entity_tags" value="player" />
			</requirement>
-->
      <!-- HELPGOOD: this is simply completely preventing it from working at all, why? and without this may randomly cause a lot of endless error messages on the log..
			<requirement class="HasParty" help="this one only detects the presence of player" />
-->
      <action class="AddEntitiesToGroup">
        <property name="phase" value="10"/>
        <property name="entity_tags" value="player"/>
        <property name="group_name" value="playerRequestingTeleport"/>
        <property name="max_distance" value="1000"/>
        <property name="y_height" value="1000" help="only upwards or up and down? is a box or a cylinder?"/>
        <property name="allow_player" value="true"/>
      </action>
      <action class="AddBuff">
        <property name="phase" value="15"/>
        <property name="buff_name" value="buffGSKGodModeForTeleport"/>
        <property name="target_group" value="playerRequestingTeleport"/>
      </action>
      <action class="TeleportToTarget" help="target_to_group is this event entity caller">
        <property name="phase" value="20"/>
        <property name="min_distance" value="0"/>
        <property name="max_distance" value="0"/>
        <property name="target_group" value="playerRequestingTeleport"/>
        <property name="safe_spawn" value="true"/>
        <property name="air_spawn" value="true"/>
      </action>
      <action class="ExplodeTarget">
        <property name="phase" value="30"/>
        <property name="blast_power" value="75"/>
        <property name="block_damage" value="32000"/>
        <property name="block_radius" value="1"/>
        <property name="entity_damage" value="32000"/>
        <property name="entity_radius" value="1"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKTeleToLastPlacedBedroll">
      <property name="allow_user_trigger" value="true"/>
      <property name="action_type" value="Game"/>
      <action class="TeleportToSpecial">
        <property name="phase" value="20"/>
        <property name="special_type" value="Bedroll"/>
      </action>
      <action class="ExplodeTarget">
        <property name="phase" value="30"/>
        <property name="blast_power" value="75"/>
        <property name="block_damage" value="32000"/>
        <property name="block_radius" value="1"/>
        <property name="entity_damage" value="32000"/>
        <property name="entity_radius" value="1"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKspawnTelePlayerToMeEntity">
      <action class="SpawnEntity">
        <property name="entity_names" value="animalHelperTeleportPlayerToMe2GSK"/>
        <property name="spawn_count" value="1"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="0"/>
        <property name="max_distance" value="2"/>
        <property name="yOffset" value="0"/>
        <property name="air_spawn" value="true"/>
      </action>
    </action_sequence>
    <action_sequence name="_eventGSKTeleToTarget" help="FAIL">
      <property name="allow_user_trigger" value="true"/>
      <property name="action_type" value="Game"/>
      <requirement class="HasSpawnedEntities">
        <property name="entity_tags" value="entity"/>
      </requirement>
      <action class="AddEntitiesToGroup">
        <property name="phase" value="10"/>
        <requirement class="HasBuff" help="this is a check on the event caller entity or on the entity being added to the group????">
          <property name="buff_name" value="buffGSKThrownBoneDartMarkTarget"/>
        </requirement>
        <property name="entity_tags" value="entity"/>
        <property name="group_name" value="targetEntity"/>
        <property name="max_distance" value="1000"/>
        <property name="y_height" value="1000" help="only upwards or up and down? is a box or a cylinder?"/>
      </action>
      <!-- HELPGOOD: how :( ?
			<action class="AddSpawnedEntitiesToGroup" help="TODO: should be only the entity with buffGSKThrownBoneDartMarkTarget :(">
				<property name="phase" value="10" />
				<requirement class="HasBuff">
					<property name="buff_name" value="buffGSKThrownBoneDartMarkTarget" />
				</requirement>
				
ends up causing this endless flood error on log (shouldnt be just one error message?) :

ArgumentNullException: Value cannot be null.
Parameter name: collection
  at System.Collections.Generic.List`1[T].InsertRange (System.Int32 index, System.Collections.Generic.IEnumerable`1[T] collection) [0x00003] 				
  
				<property name="group_name" value="targetEntity" />
				<property name="entity_tags" value="entity" />
			</action>
-->
      <action class="TeleportToTarget">
        <property name="phase" value="20"/>
        <property name="min_distance" value="0"/>
        <property name="max_distance" value="1000" help="this is a random distance near the target or a limit distance to allow the teleport?"/>
        <property name="teleport_to_group" value="targetEntity"/>
        <property name="safe_spawn" value="true"/>
        <property name="air_spawn" value="true"/>
      </action>
      <action class="ExplodeTarget">
        <property name="phase" value="30"/>
        <property name="blast_power" value="75"/>
        <property name="block_damage" value="32000"/>
        <property name="block_radius" value="1"/>
        <property name="entity_damage" value="32000"/>
        <property name="entity_radius" value="1"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKSpawnHelper">
      <action class="SpawnEntity">
        <property name="entity_names" value="zombieWight" param1="strNameList"/>
        <property name="spawn_count" value="1" param1="iCount"/>
        <property name="safe_spawn" value="true" help="was true."/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="20" param1="iDistMin"/>
        <property name="max_distance" value="40" param1="iDistMax"/>
        <property name="yOffset" value="50" param1="iElevationOffset"/>
        <property name="air_spawn" value="true" param1="bFlying" help="WORKAROUND: using air spawn always because if you on top of a building the zombies wont spawn until you get down right?"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKSpawnWight" template="eventGSKSpawnHelper">
      <variable name="strNameList" value="zombieWightFeral,zombieWightRadiated"/>
    </action_sequence>
    <action_sequence name="eventGSKSpawnVampire" template="eventGSKSpawnHelper">
      <variable name="strNameList" value="zombieScreamer,zombieScreamerFeral,zombieScreamerRadiated"/>
    </action_sequence>
    <action_sequence name="eventGSKSpawnZombieDogX3" template="eventGSKSpawnHelper">
      <variable name="strNameList" value="animalZombieDog"/>
      <variable name="iCount" value="3"/>
    </action_sequence>
    <action_sequence name="eventGSKSpawnZombieDogNearby" template="eventGSKSpawnHelper">
      <variable name="strNameList" value="animalZombieDog"/>
      <variable name="iCount" value="1"/>
      <variable name="iDistMin" value="5"/>
      <variable name="iDistMax" value="10"/>
      <variable name="iElevationOffset" value="1"/>
    </action_sequence>
    <action_sequence name="eventGSKpowerPlayerVampSummonBase">
      <action class="SpawnEntity">
        <property name="entity_names" value="todoa" param1="strNameList"/>
        <property name="spawn_count" value="1" param1="iCount"/>
        <property name="safe_spawn" value="true" help="spawn on safe zones"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="10" param1="iDistMin"/>
        <property name="max_distance" value="15" param1="iDistMax"/>
        <property name="yOffset" value="1"/>
        <property name="air_spawn" value="false" param1="bFlying"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKpowerPlayerVampSummonCoyote5" template="eventGSKpowerPlayerVampSummonBase">
      <variable name="strNameList" value="animalCoyote"/>
      <variable name="iCount" value="5"/>
    </action_sequence>
    <action_sequence name="eventGSKpowerPlayerVampSummonWolf3" template="eventGSKpowerPlayerVampSummonBase">
      <variable name="strNameList" value="animalWolf"/>
      <variable name="iCount" value="3"/>
    </action_sequence>
    <action_sequence name="eventGSKpowerPlayerVampSummonDireWolf2" template="eventGSKpowerPlayerVampSummonBase">
      <variable name="strNameList" value="animalDireWolf"/>
      <variable name="iCount" value="2"/>
    </action_sequence>
    <action_sequence name="eventGSKpowerPlayerVampSummonStrongAnimal1" template="eventGSKpowerPlayerVampSummonBase">
      <variable name="strNameList" value="animalBear,animalMountainLion"/>
      <variable name="iCount" value="1"/>
    </action_sequence>
  </append>
</GhussakTweaks>
