<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/items">
    <item name="drugGSKPsyonicsResist">
      <property name="Extends" value="resourceTestosteroneExtract"/>
      <property name="DescriptionKey" value="PsyonicsResistanceDesc"/>
      <property name="CustomIcon" value="7dtdPsyShield"/>
      <property name="CustomIconTint" value="180,180,180"/>
      <property name="Group" value="Resources,Chemicals,CFChemicals"/>
      <property name="CraftingIngredientTime" value="2"/>
      <property name="Stacknumber" value="10"/>
      <property name="EconomicValue" value="50"/>
      <property name="Meshfile" value="@:Other/Items/Misc/parcelPrefab.prefab"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="0.5"/>
        <property name="Use_time" value="0.5"/>
        <property name="Sound_start" value="nightvision_toggle"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKPsyResistWork28"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyStats" stat="Water" operation="subtract" value="3"/>
        <triggered_effect help="FixTinyRandomFloat:was iGSKPsyonicChemUseCount add randomFloat(0.5,6.5)" trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="set" value="randomInt(500,6500)"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="divide" value="1000" help="FixTinyRandomFloat"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKPsyonicChemUseCount" operation="add" value="@.fGSKFixTinyRandomFloatTmp" help="FixTinyRandomFloat: was randomFloat(0.5,6.5)"/>
        <!-- HELPGOOD:FixTinyRandomFloat:OriginalLineData:LineNumber=40651:        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKPsyonicChemUseCount" operation="add" value="randomFloat(0.5,6.5)"/> -->
      </effect_group>
    </item>
    <item name="drugGSKwightEssence">
      <property name="Extends" value="GSKBaseActivatorConsumableSlow"/>
      <property name="CustomIcon" value="resourceTestosteroneExtract"/>
      <property name="Meshfile" value="@:Other/Items/Food/bottled_waterPrefab.prefab"/>
      <property name="Material" value="Mglass"/>
      <property name="CustomIconTint" value="0,0,255"/>
      <property name="DescriptionKey" value="dkbuffGSKWightEssence"/>
      <property name="EconomicValue" value="30" help="you can find a lot"/>
      <property name="SellableToTrader" value="true"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="1"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="player_drinking"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKWightEssence"/>
      </effect_group>
    </item>
    <item name="drugGSKvampireEssence">
      <property name="Extends" value="GSKBaseActivatorConsumableSlow"/>
      <property name="CustomIcon" value="resourceTestosteroneExtract"/>
      <property name="CustomIconTint" value="128,0,255"/>
      <property name="Meshfile" value="@:Other/Items/Food/bottled_waterPrefab.prefab"/>
      <property name="Material" value="Mglass"/>
      <property name="DescriptionKey" value="dkbuffGSKVampireEssence"/>
      <property name="EconomicValue" value="150" help="very useful and there is not so much"/>
      <property name="SellableToTrader" value="true"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="1"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="player_drinking"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKVampireEssence"/>
      </effect_group>
    </item>
    <item name="drugGSKmutantEssence">
      <property name="Extends" value="GSKBaseActivatorConsumableSlow"/>
      <property name="CustomIcon" value="resourceTestosteroneExtract"/>
      <property name="CustomIconTint" value="255,255,0"/>
      <property name="Meshfile" value="@:Other/Items/Food/bottled_waterPrefab.prefab"/>
      <property name="Material" value="Mglass"/>
      <property name="DescriptionKey" value="dkbuffGSKMutantEssence"/>
      <property name="EconomicValue" value="45"/>
      <property name="SellableToTrader" value="true"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="1"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="player_drinking"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKMutantEssence"/>
      </effect_group>
    </item>
    <item name="drugGSKmonsterEssence">
      <property name="Extends" value="GSKBaseActivatorConsumableSlow"/>
      <property name="CustomIcon" value="resourceTestosteroneExtract"/>
      <property name="CustomIconTint" value="255,0,0"/>
      <property name="Meshfile" value="@:Other/Items/Food/bottled_waterPrefab.prefab"/>
      <property name="Material" value="Mglass"/>
      <property name="DescriptionKey" value="dkGSKMonsterEssence"/>
      <property name="EconomicValue" value="900" help="based on the recipe ingredients count and a bit extra +33% for the cooking"/>
      <property name="SellableToTrader" value="true"/>
      <property class="Action0">
        <requirement name="NotHasBuff" target="self" buff="buffGSKMonsterMixEssence"/>
        <property name="Class" value="Eat"/>
        <property name="Delay" value="1"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="player_drinking"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKMonsterMixEssence"/>
      </effect_group>
    </item>
    <item name="GSKpowerPsyonicAttackLikeAMutant">
      <property name="DescriptionKey" value="dkGSKpsyonicAttackLikeAMutant"/>
      <property name="SellableToTrader" value="false"/>
      <property name="Extends" value="GSKBaseActivatorReqMeleeSlow"/>
      <property name="CustomIcon" value="7dtdMutantRabbit"/>
      <property name="CustomIconTint" value="220,150,128"/>
      <property name="Stacknumber" value="1"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="GTE" value="1"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKpsyonicAttackLikeAMutant"/>
      </effect_group>
    </item>
    <item name="GSKpowerTeleportLikeAMutant">
      <property name="DescriptionKey" value="dkGSKteleportLikeAMutantPower"/>
      <property name="SellableToTrader" value="false"/>
      <property name="Extends" value="GSKBaseActivatorReqMeleeSlow"/>
      <property name="CustomIcon" value="7dtdTeleport"/>
      <property name="CustomIconTint" value="220,150,128"/>
      <property name="Stacknumber" value="1"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="7"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKTeleportLikeAMutant"/>
      </effect_group>
    </item>
    <item name="GSKpowerSummonLikeAVampire">
      <property name="DescriptionKey" value="dkGSKpowerSummonLikeAVampire"/>
      <property name="SellableToTrader" value="false"/>
      <property name="Extends" value="GSKBaseActivatorReqMeleeSlow"/>
      <property name="CustomIcon" value="7dtdShockTip"/>
      <property name="CustomIconTint" value="220,150,128"/>
      <property name="Stacknumber" value="1"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKSummonAnimalCooldown" operation="LTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceVampire" operation="GTE" value="7"/>
        <requirement name="StatCompareCurrent" stat="health" operation="GTE" value="55"/>
      </property>
      <property class="Action1">
        <requirement name="CVarCompare" cvar="iGSKSummonAnimalCooldown" operation="LTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceVampire" operation="GTE" value="7"/>
        <requirement name="StatCompareCurrent" stat="health" operation="GTE" value="55"/>
      </property>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKpowerPlayerVampSummonCoyote5"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="CallGameEvent" event="eventGSKpowerPlayerVampSummonWolf3"/>
      </effect_group>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKpowerPlayerVampSummonDireWolf2"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="CallGameEvent" event="eventGSKpowerPlayerVampSummonStrongAnimal1"/>
      </effect_group>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKSummonAnimalCooldown" operation="set" value="3600"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKSummonAnimalCooldown" operation="set" value="3600"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKEssenceVampire" operation="add" value="-7"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKEssenceVampire" operation="add" value="-7"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyStats" stat="Health" operation="add" value="-50"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyStats" stat="Health" operation="add" value="-50"/>
      </effect_group>
    </item>
    <item name="GSKpowerImmuneLikeAWight" help="costs a lot as is too powerful">
      <property name="DescriptionKey" value="dkGSKpowerImmuneLikeAWight"/>
      <property name="SellableToTrader" value="false"/>
      <property name="Extends" value="GSKBaseActivatorReqMeleeSlow"/>
      <property name="CustomIcon" value="7dtdShockTip"/>
      <property name="CustomIconTint" value="220,150,128"/>
      <property name="Stacknumber" value="1"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKEssenceWight" operation="GTE" value="@iGSKpowerCostWight"/>
      </property>
      <property class="Action1">
        <requirement name="CVarCompare" cvar="iGSKEssenceWight" operation="GTE" value="@iGSKpowerCostWight"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKpowerImmuneLikeAWight"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKEssenceWight" operation="subtract" value="@iGSKpowerCostWight"/>
      </effect_group>
    </item>
    <item name="_GSKteleportLikeAMutantPower2" help="ISSUE: this requires the player to hold PRIMARY til after teleporting, so when releasing it DeusEx will be killed">
      <property name="DescriptionKey" value="dkGSKteleportLikeAMutantPower"/>
      <property name="SellableToTrader" value="false"/>
      <property name="Extends" value="GSKBaseActivatorConsumableSlow"/>
      <property name="CustomIcon" value="7dtdTeleport"/>
      <property name="CustomIconTint" value="220,150,128"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="7"/>
      </property>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="7"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="14"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="CallGameEvent" event="eventGSKElctrnTele1No"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-7"/>
      </effect_group>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="14"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="21"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="CallGameEvent" event="eventGSKElctrnTele2No"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-14"/>
      </effect_group>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="21"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="28"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="CallGameEvent" event="eventGSKElctrnTele3No"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-21"/>
      </effect_group>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="28"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="35"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="CallGameEvent" event="eventGSKElctrnTele4No"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-28"/>
      </effect_group>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="35"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="42"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="CallGameEvent" event="eventGSKElctrnTele5No"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-35"/>
      </effect_group>
      <effect_group tiered="false">
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="42"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="CallGameEvent" event="eventGSKElctrnTele6No"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-42"/>
      </effect_group>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" target="selfAOE" range="4" action="AddBuff" buff="buffGSKElctrnExplodeExtraWeakenNPCs" help="sync range with eventGSKElctrnTele00. at onSelfPrimaryActionEnd will expectedly have already teleported...">
          <requirement name="!EntityTagCompare" target="other" tags="player"/>
        </triggered_effect>
      </effect_group>
    </item>
    <item name="GSKCFGwightStaminaConvertedFromHP">
      <property name="Extends" value="GSKBaseActivatorReqMeleeSlow"/>
      <property name="ItemTypeIcon" value="computer"/>
      <property name="SellableToTrader" value="false"/>
      <property name="DescriptionKey" value="dkGSKpowerImmuneLikeAWight"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKEssenceWightMinStam" operation="LT" value="100"/>
      </property>
      <property class="Action1">
        <requirement name="CVarCompare" cvar="iGSKEssenceWightMinStam" operation="GT" value="0"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKEssenceWightMinStam" operation="add" value="5"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKEssenceWightMinStam" operation="add" value="-5"/>
      </effect_group>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar=".fGSKCFGTMPval1" operation="set" value="@iGSKEssenceWightMinStam"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar=".fGSKCFGTMPval1" operation="set" value="@iGSKEssenceWightMinStam"/>
      </effect_group>
    </item>
    <item name="thrownBoneDartGSK">
      <property name="Class" value="ItemClassTimeBomb"/>
      <property name="HoldType" value="40"/>
      <property name="Meshfile" value="@:Other/Items/Weapons/Melee/Knives/boneShivPrefab.prefab"/>
      <property name="DropScale" value="6"/>
      <property name="Material" value="MresourceBone"/>
      <property name="CustomIcon" value="meleeWpnBladeT0BoneKnife"/>
      <property name="CustomIconTint" value="128,180,220"/>
      <property name="TintColor" value="128,180,220"/>
      <property name="Stacknumber" value="1200" help="so you can turn all bones into this, but could be 300 to match 9mm stack"/>
      <property name="EconomicValue" value="0"/>
      <property name="SoundUnholster" value="weapon_unholster"/>
      <property name="SoundHolster" value="weapon_holster"/>
      <property name="SoundPickup" value="boneknife_grab"/>
      <property name="SoundPlace" value="boneknife_place"/>
      <property name="DropScale" value="1.5"/>
      <property name="Explosion.BlockDamage" value="0"/>
      <property name="Explosion.EntityDamage" value="10" help="ISSUE:TODO: should be just 1 or 0 but triggers wont work if not at least 10?"/>
      <property name="Explosion.ParticleIndex" value="20" help="ISSUE:TODO: should be 0 or something not visible but seems to not work to apply the buff?"/>
      <property name="Explosion.RadiusBlocks" value="0"/>
      <property name="Explosion.RadiusEntities" value="4" help="ISSUE:TODO: should be just 0.05, one entity"/>
      <property name="Explosion.DamageBonus.earth" value="0"/>
      <property name="Explosion.DamageBonus.water" value="0"/>
      <property name="Explosion.BlastPower" value="0"/>
      <property name="FuseTime" value="6"/>
      <property name="FusePrimeOnActivate" value="true"/>
      <property name="ExplodeOnHit" value="true"/>
      <property name="StickPercent" value=".5"/>
      <property class="Action0">
        <property name="Class" value="ThrowAway" help="ISSUE: ThrowAway makes it rotate.. but A20 ThrownWeapon had some issues right?"/>
        <property name="Delay" value="1.2"/>
        <property name="Throw_strength_default" value="8"/>
        <property name="Throw_strength_max" value="60"/>
        <property name="Max_strain_time" value="1.25"/>
        <property name="Sound_start" value="swoosh"/>
      </property>
      <property class="Action1">
        <property name="Class" value="Activate"/>
        <property name="Delay" value="0.33"/>
        <property name="Sound_start" value="swoosh"/>
      </property>
      <property name="ThrowableDecoy" value="true"/>
      <property name="DistractionTags" value="zombie,requires_contact"/>
      <effect_group name="decoy" tiered="false">
        <passive_effect name="DistractionRadius" operation="base_set" value="25"/>
        <passive_effect name="DistractionLifetime" operation="base_set" value="1"/>
        <passive_effect name="DistractionStrength" operation="base_set" value="100"/>
      </effect_group>
      <effect_group tiered="false">
        <passive_effect name="BlockDamage" operation="base_set" value="0"/>
        <passive_effect name="EntityDamage" operation="base_set" value="10"/>
        <triggered_effect trigger="onSelfExplosionAttackedOther" action="AddBuff" target="other" buff="buffGSKThrownBoneDartMarkTarget"/>
        <triggered_effect trigger="onSelfExplosionDamagedOther" action="AddBuff" target="other" buff="buffGSKThrownBoneDartMarkTarget"/>
      </effect_group>
    </item>
  </append>
  <append xpath="/items/item[@name='GlowStickGreen']">
    <effect_group name="wight scared" tiered="false">
      <passive_effect name="EntityDamage" operation="base_set" value="10" help="if 0 wouldnt trigger luring but would also not add buff to wight. 10 seems the minimum to trigger onSelfExplosionAttackedOther right?"/>
      <triggered_effect trigger="onSelfExplosionDamagedOther" action="AddBuff" target="other" target_tags="wight" buff="buffGSKWightPowerDisable"/>
      <triggered_effect trigger="onSelfExplosionAttackedOther" action="AddBuff" target="other" target_tags="wight" buff="buffGSKWightPowerDisable"/>
    </effect_group>
  </append>
  <append xpath="/items/item[@name='GSKTNMstarterKit']/property[@class='Action0']/property[@name='Create_item']/@value">,GlowStickGreen</append>
  <append xpath="/items/item[@name='GSKTNMstarterKit']/property[@class='Action0']/property[@name='Create_item_count']/@value">,10</append>
</GhussakTweaks>
