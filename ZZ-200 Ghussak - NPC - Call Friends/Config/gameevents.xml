<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/gameevents">
    <action_sequence name="eventGSKSpwMeleeFriendly" help="least empty handed">
      <!-- HELPGOOD:CODEGEN: ISSUE:npcBaker seems buggy
      strISSUEskipRegex="|npcBaker";egrep '<entity_class.*name="npc[^"]*(Axe|Bat|Club|EmptyHand|Knife|Machete)[^"]*' -i _NewestSavegamePath.IgnoreOnBackup/ConfigsDump/entityclasses.xml -o |egrep -vi "npcHarley|npcRaider|npcAdvanced|Template|EmptyHand${strISSUEskipRegex}" |sort -u |sed -r -e 's@<entity_class name="(.*)@\1@' |tr '\n' ','
-->
      <action class="SpawnEntity">
        <property name="phase" value="10"/>
        <property name="entity_names" value="npcNurseAxe,npcNurseBat,npcNurseClub,npcNurseKnife,npcNurseMachete,npcSoldierGBDAxe,npcSoldierGBDKnife,npcSoldierGDAxe,npcSoldierGDKnife,npcSoldierGHDAxe,npcSoldierGHDKnife,npcSoldierHD1Axe,npcSoldierHD1Knife,npcSoldierHD2Axe,npcSoldierHD2Knife"/>
        <property name="spawn_count" value="1" param1="iCount"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="2"/>
        <property name="max_distance" value="2"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKCallNPC_SpawnBanditMelee" template="eventGSKSpawnBanditMelee">
      <variable name="iMinDist" value="4"/>
      <variable name="iMaxDist" value="4"/>
      <variable name="iCount" value="3"/>
    </action_sequence>
    <action_sequence name="eventGSKCallNPCSoldier">
      <action class="SpawnEntity">
        <property name="phase" value="10"/>
        <property name="entity_names" help="rocket would be too disruptive and not last long" value="npcArmyPowerArmorMaleM60,npcArmyPowerArmorFemaleM60,npcArmyPowerArmorMaleAK47,npcArmyPowerArmorFemaleAK47,npcReconMaleM60,npcReconFemaleM60,npcReconMaleAK47,npcReconFemaleAK47,npcReconMaleTRifle,npcReconFemaleTRifle"/>
        <property name="spawn_count" value="1"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="2"/>
        <property name="max_distance" value="2"/>
      </action>
      <!--      HELPGOOD: the soldier is already in combat, you must help first-->
      <action class="CallGameEvent">
        <property name="phase" value="20"/>
        <property name="game_events" value="eventGSKCallNPC_SpawnBanditMelee"/>
      </action>
      <action class="SpawnEntity">
        <property name="phase" value="30"/>
        <property name="entity_names" value="zombieArleneRadiated,zombieBikerRadiated,zombieBoeRadiated,zombieBurntRadiated,zombieBusinessManRadiated,zombieDarleneRadiated,zombieJanitorRadiated,zombieJoeRadiated,zombieLabRadiated,zombieLumberjackRadiated,zombieMaleHazmatRadiated,zombieMarleneRadiated,zombieMoeRadiated,zombieNurseRadiated,zombiePartyGirlRadiated,zombieSkateboarderRadiated,zombieSoldierRadiated,zombieSpiderRadiated,zombieSteveRadiated,zombieTomClarkRadiated,zombieUtilityWorkerRadiated,zombieYoRadiated"/>
        <property name="spawn_count" value="6"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="false"/>
        <property name="min_distance" value="6"/>
        <property name="max_distance" value="25"/>
      </action>
      <action class="SpawnEntity">
        <property name="phase" value="40"/>
        <!-- HELPGOOD:CODEGEN:
      egrep '<entity_class.*name="(raider|npcHarley)[^"]*(M60|Rifle|SMG|AK47)' -i _NewestSavegamePath.IgnoreOnBackup/ConfigsDump/entityclasses.xml -o |egrep -v Ambush |sort -u |sed -r -e 's@<entity_class name="(.*)@\1Ambush@' |tr '\n' ',' |sed -r 's@(.*),$@\1@' #extended npcs with lower loot drop prob
-->
        <property name="entity_names" help="These are strong ranged NPCs, but not one shot kill like shotgun or RocketLauncher." value="npcHarleyAK47Ambush,npcHarleyHRifleAmbush,npcHarleyM60Ambush,npcHarleyPipeRifleAmbush,npcHarleySMGAmbush,npcHarleySRifleAmbush,npcHarleyTRifleAmbush"/>
        <property name="spawn_count" value="1"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="20"/>
        <property name="max_distance" value="25"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKSpwMeleeFriendlyx3" template="eventGSKSpwMeleeFriendly">
      <variable name="iCount" value="3"/>
    </action_sequence>
    <action_sequence name="eventGSKCallNPCFriends">
      <action class="CallGameEvent">
        <property name="phase" value="10"/>
        <property name="game_events" value="eventGSKSpwMeleeFriendlyx3"/>
      </action>
      <!--      HELPGOOD: the soldier is already in combat, you must help first-->
      <action class="CallGameEvent">
        <property name="phase" value="20"/>
        <property name="game_events" value="eventGSKCallNPC_SpawnBanditMelee"/>
      </action>
      <action class="SpawnEntity">
        <property name="phase" value="30"/>
        <property name="entity_names" value="zombiePartyGirlRadiated"/>
        <property name="spawn_count" value="6"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="false"/>
        <property name="min_distance" value="6"/>
        <property name="max_distance" value="25"/>
      </action>
      <action class="SpawnEntity">
        <property name="phase" value="40"/>
        <property name="entity_names" value="zombieYoRadiated,zombieMoeRadiated"/>
        <property name="spawn_count" value="3"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="false"/>
        <property name="min_distance" value="6"/>
        <property name="max_distance" value="25"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKCallNPCHalowenParty">
      <action class="SpawnEntity">
        <property name="phase" value="10"/>
        <!-- HELPGOOD:CODEGEN: ISSUE: npc Baker seems broken
      strISSUEskipRegex="|npcBaker";egrep '<entity_class.*name="npc[^"]*(AShotgun)[^"]*' -i _NewestSavegamePath.IgnoreOnBackup/ConfigsDump/entityclasses.xml -o |egrep -vi "npcHarley|npcAdvanced|Template|EmptyHand|${strISSUEskipRegex}" |sort -u |sed -r -e 's@<entity_class name="(.*)@\1@' |tr '\n' ',' |sed -r 's@(.*),$@\1@'
-->
        <property name="entity_names" value="npcNurseAShotgun"/>
        <property name="spawn_count" value="1" help="Auto shotgun is quite powerful as they headshot most of the time, is one shot kill near range. this also means they almost do not take damage. TODO: if this changes on new NPC updates (if they miss more or aim to chest or legs instead of head) increase to 3 or 4"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="2"/>
        <property name="max_distance" value="2"/>
      </action>
      <!--      HELPGOOD: is already in combat, you must help first-->
      <action class="SpawnEntity">
        <property name="phase" value="20"/>
        <property name="entity_names" value="zombieArleneRadiated,zombieBikerRadiated,zombieBoeRadiated,zombieBurntRadiated,zombieBusinessManRadiated,zombieDarleneRadiated,zombieJanitorRadiated,zombieJoeRadiated,zombieLabRadiated,zombieLumberjackRadiated,zombieMaleHazmatRadiated,zombieMarleneRadiated,zombieMoeRadiated,zombieNurseRadiated,zombiePartyGirlRadiated,zombieSkateboarderRadiated,zombieSoldierRadiated,zombieSpiderRadiated,zombieSteveRadiated,zombieTomClarkRadiated,zombieUtilityWorkerRadiated,zombieYoRadiated"/>
        <property name="spawn_count" value="13"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="false"/>
        <property name="min_distance" value="6"/>
        <property name="max_distance" value="25"/>
      </action>
      <action class="SpawnEntity">
        <property name="phase" value="50"/>
        <property name="entity_names" value="animalZombieVultureRadiated"/>
        <property name="spawn_count" value="3"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="false"/>
        <property name="min_distance" value="20"/>
        <property name="max_distance" value="25"/>
        <property name="yOffset" value="10"/>
        <property name="air_spawn" value="true"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKCallNPCTrustyDog">
      <action class="SpawnEntity">
        <property name="phase" value="10"/>
        <property name="entity_names" value="npcAnimalFox"/>
        <property name="spawn_count" value="3"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="2"/>
        <property name="max_distance" value="2"/>
      </action>
      <!--      HELPGOOD: is already in combat, you must help first-->
      <action class="SpawnEntity">
        <property name="phase" value="20"/>
        <property name="entity_names" value="animalZombieDog"/>
        <property name="spawn_count" value="9"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="false"/>
        <property name="min_distance" value="6"/>
        <property name="max_distance" value="25"/>
      </action>
      <action class="SpawnEntity">
        <property name="phase" value="50"/>
        <property name="entity_names" value="animalZombieVultureRadiated"/>
        <property name="spawn_count" value="1"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="false"/>
        <property name="min_distance" value="20"/>
        <property name="max_distance" value="25"/>
        <property name="yOffset" value="10"/>
        <property name="air_spawn" value="true"/>
      </action>
    </action_sequence>
    <action_sequence name="eventGSKSpawnDogCompanion" help="no crafting, only on free bundles">
      <action class="SpawnEntity">
        <property name="entity_names" value="npcAnimalFox"/>
        <property name="spawn_count" value="1"/>
        <property name="safe_spawn" value="true"/>
        <property name="spawn_from_position" value="true"/>
        <property name="min_distance" value="2"/>
        <property name="max_distance" value="3"/>
      </action>
    </action_sequence>
  </append>
</GhussakTweaks>
