<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/gameevents">
    <action_sequence name="eventGSKbeGentleWithCropsOrTheyDie" help="">
      <property name="allow_user_trigger" value="true"/>
      <property name="action_type" value="Game" help="these are required to prevent the log flood with errors in case this event is called from other entities (tested with zombies and npcs)"/>
      <action class="PlaySound">
        <property name="phase" value="1"/>
        <property name="sound" value="plantdestroy"/>
        <property name="can_disable" value="false"/>
      </action>
      <!--			HELPGOOD:CODEGEN:KILLPLANTS:REPLACE (sync with blocks.xml)
	TODO: if a new dead plant model is created for a missing one on the added list below, remove them from the manually tweaked if list
clear;IFS=$'#\n' read -d '' -r -a astrList < <(egrep '"plant[^"]*dead"' -\-include=*.xml * -iRhIao |tr -d '"' |sort -u);\
#astrList+=(plantedGoldenrodDead plantedChrysanthemumDead plantedMushroomDead plantedGraceCornDead plantedPumpkinDead);\
astrList=($(echo "${astrList[@]}" |tr ' ' '\n' |sort -u));\
for strDead in ${astrList[@]};do\
	strTo="$strDead"
	bHasDead=true # has related dead model, otherwise will re-use from another plant
#	case "${strDead%Dead}" in
#		plantedGoldenrod)     strTo=plantedCoffeeDead;bHasDead=false;;
#		plantedChrysanthemum) strTo=plantedCoffeeDead;bHasDead=false;;
#		plantedMushroom)      strTo=plantedCoffeeDead;bHasDead=false;; # this makes no sense but..
#		plantedGraceCorn)     strTo=plantedCornDead  ;bHasDead=false;;
#		plantedPumpkin)       strTo=plantedCoffeeDead;bHasDead=false;; # this dont look good too if potatoes grew
#	esac
	case "${strDead%Dead}" in
		plantHedge|plantShrub) nRandom=5;;
		plantedGraceCorn) nRandom=15;;
		*) nRandom=75;;
	esac
	echo -e '			<action class="BlockReplace"><property name="phase" value="2" />'
	echo -e '				<requirement class="RandomRoll"><property name="min_max" value="0,100" /><property name="operation" value="LT" /><property name="value" value="'$nRandom'" /></requirement>'
	echo -e '				<property name="min_offset" value="0,-1,0" /><property name="max_offset" value="0,1,0" />'
	echo -e '				<property name="block_tags" value="'${strDead%Dead}'" />'
	echo -e '				<property name="block_to"   value="'${strTo}'" />'
	echo -e '			</action>'
	if $bHasDead;then #see at blocks.xml, it is better to just create the Dead plant, so them all have dead
		echo -e '			<action class="BlockReplace"><property name="phase" value="2" />'
		echo -e '				<requirement class="RandomRoll"><property name="min_max" value="0,100" /><property name="operation" value="LT" /><property name="value" value="5" /></requirement>'
		echo -e '				<property name="min_offset" value="0,-1,0" /><property name="max_offset" value="0,1,0" />'
		echo -e '				<property name="block_tags" value="'${strDead}'" />'
		echo -e '				<property name="block_to"   value="air" />'
		echo -e '			</action>'
	fi
done
-->
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedAloe"/>
        <property name="block_to" value="plantedAloeDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedAloeDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedBlueberry"/>
        <property name="block_to" value="plantedBlueberryDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedBlueberryDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedChrysanthemum"/>
        <property name="block_to" value="plantedChrysanthemumDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedChrysanthemumDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedCoffee"/>
        <property name="block_to" value="plantedCoffeeDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedCoffeeDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedCorn"/>
        <property name="block_to" value="plantedCornDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedCornDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedCotton"/>
        <property name="block_to" value="plantedCottonDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedCottonDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedGoldenrod"/>
        <property name="block_to" value="plantedGoldenrodDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedGoldenrodDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="15"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedGraceCorn"/>
        <property name="block_to" value="plantedGraceCornDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedGraceCornDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedHop"/>
        <property name="block_to" value="plantedHopDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedHopDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedMushroom"/>
        <property name="block_to" value="plantedMushroomDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedMushroomDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedPotato"/>
        <property name="block_to" value="plantedPotatoDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedPotatoDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedPumpkin"/>
        <property name="block_to" value="plantedPumpkinDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedPumpkinDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="75"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedYucca"/>
        <property name="block_to" value="plantedYuccaDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantedYuccaDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantHedge"/>
        <property name="block_to" value="plantHedgeDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantHedgeDead"/>
        <property name="block_to" value="air"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantShrub"/>
        <property name="block_to" value="plantShrubDead"/>
      </action>
      <action class="BlockReplace">
        <property name="phase" value="2"/>
        <requirement class="RandomRoll">
          <property name="min_max" value="0,100"/>
          <property name="operation" value="LT"/>
          <property name="value" value="5"/>
        </requirement>
        <property name="min_offset" value="0,-1,0"/>
        <property name="max_offset" value="0,1,0"/>
        <property name="block_tags" value="plantShrubDead"/>
        <property name="block_to" value="air"/>
      </action>
    </action_sequence>
  </append>
</GhussakTweaks>
