<?xml version="1.0"?>
<GhussakTweaks>
  <!-- HELPGOOD: mute companion wolf when not in combat, so it's combat sounds become the alert to the player.
  this emptier set gives error: <set xpath="/entity_classes/entity_class[@name='npcAnimalMeleeTemplate']/property[@name='SoundRandom']/@value"></set>
-->
  <remove xpath="/entity_classes/entity_class[@name='npcAnimalMeleeTemplate']/property[@name='SoundRandom']"/>
  <remove xpath="/entity_classes/entity_class[@name='npcAnimalMeleeTemplate']/property[@name='SoundAlert']"/>
  <remove xpath="/entity_classes/entity_class[@name='npcAnimalMeleeTemplate']/property[@name='SoundSense']"/>
  <append xpath="/entity_classes/entity_class[@name='npcAnimalMeleeTemplate']">
    <property name="SoundRandom" value="" help="todo: this empty override seems to not work?"/>
    <property name="Names" value="(Pet)Buster,(Pet)Sally,(Pet)Fluffy"/>
  </append>
  <!-- HELPGOOD: this delay is nice! :) -->
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'survivor')]" help="as they are not meant to accept being hired">
    <property name="SoundRandomTime" value="900"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npc')]">
    <property name="SoundRandomTime" value="600"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'animal')]">
    <property name="SoundRandomTime" value="60"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npc')]" help="if you cant find them for any reason and to prevent that being a boring task as we should be able to just ask loudly where they are ;)">
    <property name="NavObject" value="navNPCfriendly"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='npcAnimalFox']/property[@name='Tags']/@value" help="to let pettable animals be considered in the followers limiter">,melee</append>
  <append xpath="/entity_classes/entity_class[@name='playerMale']">
    <effect_group help="to make it easier to force a ranged NPC that stopped following after the player equip a ranged weapon for meleeBuild: stay near, crouched and jump. ISSUE: this may not work on top/inside buildings tho, why? :(">
      <triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffOrderFollow" target="selfAOE" range="1.5" target_tags="npc" help="tags could be npc,ranged but is is more useful to let also melee ones rejoin">
        <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKMeleeParryChance" operation="GT" value="0" help="used as indicator to holding melee weapon"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfKilledOther" action="ModifyCVar" cvar=".iGSKNPCnpcBanditAmbush" operation="add" value="randomInt(0,2)">
        <requirement name="EntityTagCompare" target="other" tags="bandit"/>
      </triggered_effect>
    </effect_group>
  </append>
</GhussakTweaks>
