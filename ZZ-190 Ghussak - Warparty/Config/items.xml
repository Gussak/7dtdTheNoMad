<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/items">
    <item name="NPCConsumableBase">
      <property name="Extends" value="GSKBaseActivatorConsumableSlow"/>
      <property name="CustomIcon" value="armorSteelSetParts"/>
      <property name="CustomIconTint" value="0000ff"/>
    </item>
    <item name="GSKNPCHiredGetsPowerArmor">
      <property name="Extends" value="NPCConsumableBase"/>
      <property name="DescriptionKey" value="dkNPCkits"/>
      <property name="CustomIcon" value="armorSteelSetParts"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="EconomicValue" value="300" help="was 600, to match +- the original NPC with powerarmor price, but now their inventory size changed and only original powerarmor NPC has max inventory size! so now it is only the protection/shield, not the backpack size and strength to carry items."/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKPlayerNPCFollowingCountCurrent" operation="Equals" value="1" help="you need to have only one follower to use this. It is one power armor per follower. No need to use with the NPC that already comes with power armor. TODO?: The other NPC items are more for the action/fight; we would need to be able to target one NPC to use them w/o losing the item, can it be done?; or we could put the items on their inventory and they would use them on demand, this would be the perfect solution! to ex. heal everyone with a single use is too powerful...; May be divide the healing by the amount of followers? but then it becomes overly complex and inneffective..; It could target the most damaged one but how? feedback with the randomID? overly complex too.."/>
        <requirement name="CVarCompare" cvar=".iGSKPlayerNPCInfoHasCustomPowerArmor" operation="Equals" value="0" help="this is the detection of not having buffGSKNPCHiredFollowingPowerArmorUse"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffGSKNPCHiredFollowingPowerArmorUse" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
      </effect_group>
    </item>
    <item name="GSKNPCHiredHeals30perc">
      <property name="Extends" value="NPCConsumableBase"/>
      <property name="DescriptionKey" value="dkNPCkits"/>
      <property name="CustomIcon" value="medicalFirstAidBandage"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="EconomicValue" value="15"/>
      <effect_group tiered="false" help="min hp is 187 and max is 687 with high charisma as seen on the game. TODO: if that changes, this needs to be updated (round to 5).">
        <!-- HELPGOOD: CODEGEN: for((i=0;i<=4;i++));do bc <<< "(187+125*$i)*.3";done -->
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="55" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="0"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="95" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="1"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="130" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="2"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="170" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="3"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="205" target="selfAOE" range="10" help="NPCBandageMaxHealValue">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="4"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
      </effect_group>
    </item>
    <item name="GSKNPCHiredHeals180perc">
      <property name="Extends" value="NPCConsumableBase"/>
      <property name="DescriptionKey" value="dkNPCkits"/>
      <property name="CustomIcon" value="medicalFirstAidKit"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="EconomicValue" value="200"/>
      <effect_group tiered="false">
        <!-- HELPGOOD: CODEGEN: for((i=0;i<=4;i++));do bc <<< "(187+125*$i)*1.8";done # 336.6 561.6 786.6 1011.6 1236.6      -->
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="335" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="0"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="560" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="1"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="785" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="2"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="1010" target="selfAOE" range="10">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="3"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCHealingMedicine" operation="add" value="1235" target="selfAOE" range="10" help="NPCMedkitMaxHealValue">
          <requirement name="CVarCompare" target="self" cvar="CharismaticNatureLevel" operation="Equals" value="4"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1"/>
        </triggered_effect>
      </effect_group>
    </item>
    <item name="RepairNPCArmor">
      <property name="Extends" value="NPCConsumableBase"/>
      <property name="CustomIcon" value="armorSteelSetParts"/>
      <property name="CustomIconTint" value="0000ff"/>
      <property name="DescriptionKey" value="dkRepairNPCArmor"/>
      <property name="EconomicValue" value="100" help="this is used just to calc the exp debuff time for free bundles"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKPlayerNPCFollowingCountCurrent" operation="Equals" value="1" help="you need to have only one follower to use this."/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" target="self" cvar="fRepairNPCArmor" operation="add" value="0.05"/>
      </effect_group>
    </item>
    <item name="RepairNPCArmor100">
      <property name="Extends" value="NPCConsumableBase"/>
      <property name="CustomIcon" value="armorSteelSetParts"/>
      <property name="CustomIconTint" value="0000ff"/>
      <property name="DescriptionKey" value="dkRepairNPCArmor"/>
      <property name="EconomicValue" value="2000" help="this is used just to calc the exp debuff time for free bundles"/>
      <property class="Action0">
        <requirement name="CVarCompare" cvar="iGSKPlayerNPCFollowingCountCurrent" operation="Equals" value="1" help="you need to have only one follower to use this."/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" target="self" cvar="fRepairNPCArmor" operation="add" value="1.00"/>
      </effect_group>
    </item>
    <item name="NPCPreventDismiss60s">
      <property name="Extends" value="NPCConsumableBase"/>
      <property name="CustomIcon" value="casinoCoin"/>
      <property name="CustomIconTint" value="0000ff"/>
      <property name="DescriptionKey" value="dkNPCPreventDismiss60s"/>
      <property name="EconomicValue" value="100" help="this is used just to calc the exp debuff time for free bundles"/>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" target="self" cvar="fNPCPreventDismissSecs" operation="add" value="60"/>
      </effect_group>
    </item>
    <item name="GSKCallNPCsBase">
      <property name="Extends" value="GSKBaseActivatorConsumableSlow"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="DescriptionKey" value="dkGSKCallSoldier"/>
      <property name="EconomicValue" value="1000"/>
      <property class="Action0">
        <requirement name="!IsBloodMoon"/>
        <requirement name="NotHasBuff" buff="buffGSKSpawnTreasureAmbush15"/>
        <requirement name="NotHasBuff" buff="buffGSKDeusExEnemyIsNearbyPLAYERBUFF"/>
        <requirement name="NotHasBuff" buff="buffGSKDeusExFriendlyIsNearbyPLAYERBUFF"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKCallNPCSoldier"/>
      </effect_group>
    </item>
    <item name="GSKCallSoldier">
      <property name="Extends" value="GSKCallNPCsBase"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="DescriptionKey" value="dkGSKCallSoldier"/>
      <property name="EconomicValue" value="1000"/>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKCallNPCSoldier"/>
      </effect_group>
    </item>
    <item name="GSKCallFriends">
      <property name="Extends" value="GSKCallNPCsBase"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="DescriptionKey" value="dkGSKCallFriends"/>
      <property name="EconomicValue" value="500"/>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKCallNPCFriends"/>
      </effect_group>
    </item>
    <item name="GSKCallTrustyDog">
      <property name="Extends" value="GSKCallNPCsBase"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="DescriptionKey" value="dkGSKCallTrustyDog"/>
      <property name="EconomicValue" value="500"/>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKCallNPCTrustyDog"/>
      </effect_group>
    </item>
    <item name="GSKCallHalowenParty">
      <property name="Extends" value="GSKCallNPCsBase"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="DescriptionKey" value="dkGSKCallHalowenParty"/>
      <property name="EconomicValue" value="500"/>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKCallNPCHalowenParty"/>
      </effect_group>
    </item>
    <item name="GSKspawnDogCompanion" help="no crafting, only on free bundles">
      <property name="Extends" value="GSKCallNPCsBase"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="DescriptionKey" value="dkGSKspawnDogCompanion"/>
      <property name="EconomicValue" value="500"/>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKSpawnDogCompanion"/>
      </effect_group>
    </item>
    <item name="GSKragdollFriendlyNPC">
      <property name="Extends" value="GSKCallNPCsBase"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="EconomicValue" value="0"/>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKRagdollFriendlyNPCs" help="TODO: or buffGSKRagdollFriendly when ready"/>
      </effect_group>
    </item>
    <item name="NPCCfgAllInOne" help="just a mix from the many NPC configurators">
      <property name="ItemTypeIcon" value="computer"/>
      <property name="Material" value="Morganic"/>
      <property name="HoldType" value="45"/>
      <property name="Meshfile" value="#Other/Items?Misc/sackPrefab.prefab"/>
      <property name="Stacknumber" value="1"/>
      <property name="EconomicValue" value="1"/>
      <property name="SellableToTrader" value="false"/>
      <property name="Candrop" value="true"/>
      <property name="DescriptionKey" value="dkNPCCfgAllInOne"/>
      <property name="CustomIcon" value="7dtdNPCCfgAllInOne"/>
      <property class="Action0">
        <property name="Class" value="Melee"/>
        <property name="Delay" value="0.1"/>
        <property name="Range" value="0"/>
        <property name="Sphere" value="0"/>
        <property name="Block_range" value="0"/>
        <property name="DamageEntity" value="0"/>
        <property name="DamageBlock" value="0"/>
        <property name="Sound_start" value=""/>
      </property>
      <property class="Action1">
        <property name="Class" value="Melee"/>
        <property name="Delay" value="0.1"/>
        <property name="Range" value="0"/>
        <property name="Sphere" value="0"/>
        <property name="Block_range" value="0"/>
        <property name="DamageEntity" value="0"/>
        <property name="DamageBlock" value="0"/>
        <property name="Sound_start" value=""/>
      </property>
      <effect_group name="itemNPCModMode hunt/fullcontrol" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="AddBuff" buff="buffNPCModModeChange2">
          <requirement name="CVarCompare" cvar="varNPCModMode" operation="Equals" value="0"/>
          <requirement name="CVarCompare" cvar="$varNPCModModeChange" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="AddBuff" buff="buffNPCModModeChange0">
          <requirement name="CVarCompare" cvar="varNPCModMode" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="$varNPCModModeChange" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="RemoveBuff" target="selfAOE" range="60" buff="buffNPCModFullControlMode">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" cvar="varNPCModMode" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" target="selfAOE" range="60" buff="buffNPCModFullControlMode">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" cvar="varNPCModMode" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$varNPCModModeChange" operation="set" value="0"/>
      </effect_group>
      <!-- HELPGOOD: logic copied from NPC mod, it uses buffs to set control cvars
      <effect_group name="itemNPCModStop stop/resume" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0" />
        <triggered_effect trigger="onSelfSecondaryActionStart" action="AddBuff" buff="buffNPCModStopAttackingChange1">
          <requirement name="CVarCompare" cvar="varNPCModStopAttacking" operation="Equals" value="0" />
          <requirement name="CVarCompare" cvar="$varNPCModStopAttackingChange" operation="Equals" value="0" />
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionStart" action="AddBuff" buff="buffNPCModStopAttackingChange0">
          <requirement name="CVarCompare" cvar="varNPCModStopAttacking" operation="Equals" value="1" />
          <requirement name="CVarCompare" cvar="$varNPCModStopAttackingChange" operation="Equals" value="0" />
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" target="selfAOE" range="60" buff="buffNPCModStopAttacking">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID" />
          <requirement name="CVarCompare" cvar="varNPCModStopAttacking" operation="Equals" value="1" />
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="RemoveBuff" target="selfAOE" range="60" buff="buffNPCModStopAttacking">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID" />
          <requirement name="CVarCompare" cvar="varNPCModStopAttacking" operation="Equals" value="0" />
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$varNPCModStopAttackingChange" operation="set" value="0" />
      </effect_group>
-->
      <!-- HELPGOOD: this sets one new control cvar here, and play sounds from buffs here too -->
      <effect_group name="itemNPCModStop:resetloop (the order below must be from last to first)" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKNPCAttak1Stop0Next" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKNPCAttak1Stop0Next" operation="set" value="0"/>
      </effect_group>
      <effect_group name="itemNPCModStop:HUD" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar=".fGSKCFGTMPval1" operation="set" value="@iGSKNPCAttak1Stop0Next"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar=".fGSKCFGTMPval2" operation="set" value="0"/>
      </effect_group>
      <effect_group name="itemNPCModStop:resume" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKNPCAttak1Stop0Next" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="RemoveBuff" target="selfAOE" range="60" buff="buffNPCModStopAttacking">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="PlaySound" sound="NPCResume" play_in_head="true"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="varNPCModStopAttacking" operation="set" value="0" help="display resume icon"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKNPCAttak1Stop0Next" operation="add" value="1"/>
      </effect_group>
      <effect_group name="itemNPCModStop:stop" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKNPCAttak1Stop0Next" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" target="selfAOE" range="60" buff="buffNPCModStopAttacking">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="PlaySound" sound="NPCHalt" play_in_head="true"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="varNPCModStopAttacking" operation="set" value="1" help="display halt icon"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKNPCAttak1Stop0Next" operation="add" value="1"/>
      </effect_group>
      <effect_group name="itemNPCHelp" tiered="false" help="should this make NPCs stop attacking other mobs and try kill the ones attacking the player?">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="AddBuff" target="selfAOE" range="20" buff="buffNPCModAttacking"/>
        <triggered_effect trigger="onSelfPrimaryActionStart" action="ShowToolbeltMessage" message="Call followers' help!"/>
      </effect_group>
      <effect_group name="itemNPCStayFollow:ApplyHints" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfSecondaryActionStart" action="ModifyCVar" cvar="iGSKPlayerNPCCurrentOrder" operation="set" value="1">
          <requirement name="CVarCompare" cvar="iGSKPlayerNPCCurrentOrder" operation="Equals" value="1001"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionStart" action="ModifyCVar" cvar="iGSKPlayerNPCCurrentOrder" operation="set" value="2">
          <requirement name="CVarCompare" cvar="iGSKPlayerNPCCurrentOrder" operation="Equals" value="1002"/>
        </triggered_effect>
      </effect_group>
      <effect_group name="itemNPCStayFollow:Stay" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKPlayerNPCCurrentOrder" operation="Equals" value="1" help="follow"/>
        <triggered_effect trigger="onSelfSecondaryActionStart" action="AddBuff" buff="buffOrderStay" target="selfAOE" range="6" help="dont copy the buff code here. using the buff works great!">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionStart" action="ModifyCVar" cvar="iGSKPlayerNPCCurrentOrder" operation="set" value="1002"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ShowToolbeltMessage" message="Followers Stay"/>
      </effect_group>
      <effect_group name="itemNPCStayFollow:Follow" tiered="false">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKPlayerNPCCurrentOrder" operation="Equals" value="2" help="stay"/>
        <triggered_effect trigger="onSelfSecondaryActionStart" action="ModifyCVar" cvar="CurrentOrder" operation="set" value="1" target="selfAOE" range="6" help="Follow">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionStart" action="ModifyCVar" cvar="iGSKPlayerNPCCurrentOrder" operation="set" value="1001"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ShowToolbeltMessage" message="Followers Follow"/>
      </effect_group>
    </item>
    <item name="GSKCFGNPCRaiderAmbush">
      <property name="Extends" value="GSKBaseActivatorReqMeleeConfiguratorFast"/>
      <property name="DescriptionKey" value="dkGSKCFGNPCRaiderAmbush"/>
      <property name="CustomIcon" value="7dtdShockTip"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="EconomicValue" value="1"/>
      <property name="SellableToTrader" value="false"/>
      <effect_group tiered="false" help="at player">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCnpcBanditAmbush" operation="add" value="1"/>
      </effect_group>
    </item>
    <item name="GSKCFGNPCWarPartyMode">
      <property name="Extends" value="GSKBaseActivatorReqMeleeConfiguratorFast"/>
      <property name="DescriptionKey" value="dkGSKNPCWarPartyMode"/>
      <property name="CustomIcon" value="7dtdShockTip"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="EconomicValue" value="1"/>
      <property name="SellableToTrader" value="false"/>
      <effect_group tiered="false" help="at player">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKPlayerNPCwarPartyAutoOrdersAllowed" operation="set" value="1" help="keeps trying to auto add the buff later forever"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKPlayerNPCwarPartyAutoOrdersAllowed" operation="set" value="2"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="RemoveBuff" buff="buffGSKNPCwarpartyAutoOrders" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
      </effect_group>
      <effect_group tiered="false" help="at NPCs">
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNPCwarPartyAutoOrdersAllowed" operation="set" value="1" target="selfAOE" range="60" target_tags="npc" help="ON">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1" help="is buffOrderFollow"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKNPCwarPartyAutoOrdersAllowed" operation="set" value="2" target="selfAOE" range="60" target_tags="npc" help="OFF: they become bodyguards">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="other" cvar="CurrentOrder" operation="Equals" value="1" help="is buffOrderFollow"/>
        </triggered_effect>
      </effect_group>
    </item>
    <item name="GSKCFGNPCMeleeBuildLimitFollowers">
      <property name="Extends" value="GSKBaseActivatorReqMeleeConfiguratorFast"/>
      <property name="DescriptionKey" value="dkGSKCFGNPCMeleeBuildLimitFollowers"/>
      <property name="CustomIcon" value="7dtdShockTip"/>
      <property name="CustomIconTint" value="00a0ff"/>
      <property name="EconomicValue" value="1"/>
      <property name="SellableToTrader" value="false"/>
      <effect_group tiered="false" help="at player">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKMeleeBuildNPClimiterEnabled" operation="set" value="1"/>
        <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKMeleeBuildNPClimiterEnabled" operation="set" value="2"/>
      </effect_group>
    </item>
  </append>
  <append xpath="/items/item[starts-with(@name,'gun') and not(contains(@name,'Schematic') or contains(@name,'Parts'))]" help="this is meant for a melee build with many hired NPCs using ranged weapons">
    <effect_group tiered="false">
      <triggered_effect trigger="onSelfEquipStart" action="ModifyCVar" cvar="iGSKNPCFollowAllowMany" operation="set" value="2">
        <requirement name="CVarCompare" cvar="iGSKMeleeBuildNPClimiterEnabled" operation="Equals" value="1"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfEquipStop" action="ModifyCVar" cvar="iGSKNPCFollowAllowMany" operation="set" value="1"/>
    </effect_group>
  </append>
  <append xpath="/items/item[starts-with(@name,'ammo') and contains(@name,'Bullet')]">
    <effect_group name="penetration thru friendly NPCs (otherwise they just block the path and let foes kill them), but this extra empowers all bullets :(" tiered="false">
      <passive_effect name="EntityPenetrationCount" operation="base_add" value="1" tags="perkGunslinger"/>
    </effect_group>
  </append>
</GhussakTweaks>
