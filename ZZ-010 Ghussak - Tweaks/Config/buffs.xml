<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/buffs">
    <buff name="buffHiredNPCnoFallDamage" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <effect_group>
        <passive_effect name="BuffResistance" operation="base_add" value="10000" tags="buffPlayerFallingDamage"/>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs/buff[@name='buffPlayerFallingDamage']/effect_group/triggered_effect[@action='ModifyStats' and @stat='Health' and @operation='subtract']">
    <requirement name="!HasBuff" buff="buffHiredNPCnoFallDamage"/>
  </append>
  <append xpath="/buffs">
    <buff name="buffGSKNPCHiredFollowingHeal30perc" hidden="true" remove_on_death="false">
      <stack_type value="duration"/>
      <duration value="40"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="add" value="5"/>
      </effect_group>
    </buff>
    <buff name="buffGSKNPCHiredFollowingHeal180perc" hidden="true" remove_on_death="false">
      <stack_type value="duration"/>
      <duration value="240"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="add" value="5"/>
      </effect_group>
    </buff>
    <buff name="buffGSKNPCHiredFollowingPowerArmorUse" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <effect_group>
        <passive_effect name="PhysicalDamageResist" operation="base_set" value="90"/>
      </effect_group>
    </buff>
    <buff name="buffGSKToggleDebug" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKDebug" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKDebug" operation="set" value="0">
          <requirement name="CVarCompare" cvar="bGSKDebug" operation="GTE" value="2"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="bGSKDebug"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKTeslaLog"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathBloodLossLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathDryHotLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathDryHotTime"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathFreezingLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathFreezingTime"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathFrostbyteLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathMiasmaLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathPoisonLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathRadiationLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeathHazadousWeatherLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNDHWTime" help="for iGSKNearDeathHazadousWeatherLvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNearDeath"/>
      </effect_group>
    </buff>
    <buff name="buffRainScrEffect" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="2"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffRainScrEffect"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffRainScrEffect"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iRainBlur" operation="set" value="10">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="0.10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iRainBlur" operation="set" value="25">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="0.25"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iRainBlur" operation="set" value="50">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="0.50"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iRainBlur" operation="set" value="75">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="0.75"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iRainBlur" operation="set" value="90">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="0.90"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="Blur" intensity="0.10" fade="2">
          <requirement name="CVarCompare" cvar="iRainBlur" operation="Equals" value="10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="Blur" intensity="0.25" fade="2">
          <requirement name="CVarCompare" cvar="iRainBlur" operation="Equals" value="25"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="Blur" intensity="0.50" fade="2">
          <requirement name="CVarCompare" cvar="iRainBlur" operation="Equals" value="50"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="Blur" intensity="0.75" fade="2">
          <requirement name="CVarCompare" cvar="iRainBlur" operation="Equals" value="75"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="Blur" intensity="0.90" fade="2">
          <requirement name="CVarCompare" cvar="iRainBlur" operation="Equals" value="90"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" effect_name="Blur" intensity="0" fade="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="iRainBlur"/>
      </effect_group>
    </buff>
    <buff name="buffDrinkRainWater56" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffDrinkRainWater56"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffDrinkRainWater56"/>
      </effect_group>
      <effect_group help="this is the wetness the player is really tracking">
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShownWetnessPerc" operation="set" value="@$WetTempModifierDisplay"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShownWetnessPerc" operation="set" value="0">
          <requirement name="CVarCompare" cvar="$WetTempModifierActive" operation="LT" value="1"/>
          <!-- HELPGOOD: keep in sync with buffElementWet -->
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShownWetnessPerc" operation="divide" value="100"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iPreventDrinkRainDelay" operation="set" value="60">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKDrinkingRainDebug" operation="set" value="0.12345678912"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKDrinkingRain" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="_sheltered" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GT" value="0.01"/>
        <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="@fPreviousWetness"/>
        <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="iPreventDrinkRainDelay" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Water" operation="add" value="0.083"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKDrinkingRainDebug" operation="set" value="8"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKDrinkingRain" operation="set" value="1"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="0.10"/>
        <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="25"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="addBuff" buff="buffRainScrEffect"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKDebug" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fPreviousWetness"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="_wetness"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKShownWetnessPerc"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="iGSKDrinkingRain"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fPreviousWetness" operation="set" value="@fGSKShownWetnessPerc"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iPreventDrinkRainDelay" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="0"/>
          <requirement name="CVarCompare" cvar="iPreventDrinkRainDelay" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffNPCdmgArmorExplosion" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNPCarmorDmgPercAdd" operation="add" value="randomFloat(0.15,0.35)"/>
      </effect_group>
    </buff>
    <buff name="buffHiredNPCdamageArmor81" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="36000"/>
      <requirements>
        <requirement name="!EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCarmorDmgPercAdd" operation="set" value="randomFloat(0.0001,0.0015)">
          <requirement name="CVarCompare" cvar="fGSKNPCarmorDmgPercAdd" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCarmorDmgPercent" operation="add" value="@fGSKNPCarmorDmgPercAdd"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCarmorDmgPercAdd" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCminDmgToLetRepair" operation="set" value="@fGSKNPCPermanentArmorDmg"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCminDmgToLetRepair" operation="add" value="@fTransferNPCRepairArmor"/>
      </effect_group>
      <effect_group name="slow repair armor and cause permanent unrepairable damage">
        <requirement name="CVarCompare" cvar="fGSKNPCRepairSelfArmor" operation="GTE" value="@fTransferNPCRepairArmor"/>
        <requirement name="CVarCompare" cvar="fGSKNPCarmorDmgPercent" operation="GTE" value="@fGSKNPCminDmgToLetRepair"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCarmorDmgPercent" operation="subtract" value="@fTransferNPCRepairArmor"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="@fTransferNPCRepairArmor"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="divide" value="5"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCPermanentArmorDmg" operation="add" value="@.fGSKtmp"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCRepairSelfArmor" operation="subtract" value="@fTransferNPCRepairArmor"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCarmorDmgPercent" operation="set" value="1.0">
          <requirement name="CVarCompare" cvar="fGSKNPCarmorDmgPercent" operation="GT" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKNPCarmorDmgPercent" operation="set" value="@fGSKNPCPermanentArmorDmg">
          <requirement name="CVarCompare" cvar="fGSKNPCarmorDmgPercent" operation="LT" value="@fGSKNPCPermanentArmorDmg"/>
        </triggered_effect>
        <passive_effect name="PhysicalDamageResist" operation="perc_subtract" value="@fGSKNPCarmorDmgPercent"/>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs/buff[       @name='buffInjuryAbrasion' or       @name='buffInjuryBleeding' or       @name='buffInjuryConcussion' or       @name='buffInjuryCrippled01' or       @name='buffInjuryKnockdown01' or       @name='buffInjuryKnockdown02' or       @name='buffInjuryStunned00' or       @name='buffInjuryStunned01' or       @name='buffInjuryStunned02' or       @name='buffInjuryStunned03' or       @name='buffInjuryUnconscious'     ]">
    <effect_group>
      <triggered_effect trigger="onSelfBuffStart" action="addBuff" buff="buffHiredNPCdamageArmor81">
        <requirement name="CVarCompare" cvar="Leader" operation="GT" value="0"/>
      </triggered_effect>
    </effect_group>
  </append>
  <append xpath="/buffs/buff[@name='buffInjuryBleeding']">
    <effect_group>
      <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBloodLoss" operation="add" value="randomFloat(0.005,0.015)"/>
    </effect_group>
  </append>
  <append xpath="/buffs/buff[@name='buffLaceration' or @name='buffInfectionCatch' or @name='buffInjuryBleeding']" help="add anything that can bypass hazmat protection">
    <effect_group name="DamageHazmatSuit">
      <requirements compare_type="or">
        <requirement name="HasBuff" buff="buffRadSuit"/>
        <requirement name="HasBuff" buff="buffRadSuitBoots"/>
        <requirement name="HasBuff" buff="buffRadSuitChest"/>
        <requirement name="HasBuff" buff="buffRadSuitGloves"/>
        <requirement name="HasBuff" buff="buffRadSuitLegs"/>
        <requirement name="HasBuff" buff="buffRadSuitMask"/>
      </requirements>
      <triggered_effect trigger="onSelfBuffStart" action="addBuff" buff="buffGSKDmgHazmatSuit1"/>
      <triggered_effect trigger="onSelfBuffStack" action="addBuff" buff="buffGSKDmgHazmatSuit1"/>
    </effect_group>
  </append>
  <append xpath="/buffs">
    <buff name="buffGSKDmgHazmatSuit1" hidden="false" remove_on_death="false">
      <!-- HELPGOOD: this whole buff could be just subtract randomFloat(0.01,0.20), but it wont work -->
      <stack_type value="effect"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffGSKDmgHazmatSuit1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKDmgHazmatSuit1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKHazmatSuitDmgCount" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKHazmatSuitDmgCount" operation="add" value="1"/>
        <!-- HELPGOOD:TODO:WORKAROUND: for some reason randomFloat(0.01,0.20) wont work here, it always results in 0.20 -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".fGSKTmpHSIDmg" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".fGSKTmpHSIDmg" operation="add" value="randomInt(0,4)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".fGSKTmpHSIDmg" operation="add" value="randomInt(0,19)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="15"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".fGSKTmpHSIDmg" operation="divide" value="100"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKHazmatSuitIntegrity" operation="subtract" value="@.fGSKTmpHSIDmg">
          <requirement name="CVarCompare" cvar="iGSKHazmatSuitDmgCount" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKHazmatSuitIntegrity" operation="set" value="0.01">
          <requirement name="CVarCompare" cvar="fGSKHazmatSuitIntegrity" operation="LT" value="0.01"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKHazmatSuitDmgCount" operation="subtract" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKDmgHazmatSuit1">
          <requirement name="CVarCompare" cvar="iGSKHazmatSuitDmgCount" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs">
    <buff name="buffRagdollAIsToEasyCPU" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <update_rate value="1"/>
      <duration value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffRagdollAIsToEasyCPU"/>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="60" force="0" target="selfAOE" range="250" target_tags="zombie"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffRagdollAIsToEasyCPU"/>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs">
    <buff name="buffPlayerEnhancesNearbyFriendlyNPCs1" hidden="true" remove_on_death="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="2"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffPlayerEnhancesNearbyFriendlyNPCs1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffPlayerEnhancesNearbyFriendlyNPCs1"/>
      </effect_group>
      <effect_group>
        <requirement name="ProgressionLevel" progression_name="perkCharismaticNature" operation="GTE" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffEnhancedNPC1" range="35" target="selfAOE">
          <requirement name="EntityTagCompare" target="other" tags="npc"/>
          <requirement name="!EntityTagCompare" target="other" tags="bandit"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="ProgressionLevel" progression_name="perkCharismaticNature" operation="GTE" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffEnhancedNPC2" range="35" target="selfAOE">
          <requirement name="EntityTagCompare" target="other" tags="npc"/>
          <requirement name="!EntityTagCompare" target="other" tags="bandit"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="ProgressionLevel" progression_name="perkCharismaticNature" operation="GTE" value="3"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffEnhancedNPC3" range="35" target="selfAOE">
          <requirement name="EntityTagCompare" target="other" tags="npc"/>
          <requirement name="!EntityTagCompare" target="other" tags="bandit"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="ProgressionLevel" progression_name="perkCharismaticNature" operation="GTE" value="4"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffEnhancedNPC4" range="35" target="selfAOE">
          <requirement name="EntityTagCompare" target="other" tags="npc"/>
          <requirement name="!EntityTagCompare" target="other" tags="bandit"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffEnhancedNPC1">
      <stack_type value="replace"/>
      <duration value="300"/>
      <effect_group>
        <passive_effect name="HealthMax" operation="base_add" value="50"/>
        <passive_effect name="StaminaMax" operation="base_add" value="25"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffImpactBracing"/>
      </effect_group>
    </buff>
    <buff name="buffEnhancedNPC2">
      <stack_type value="replace"/>
      <duration value="300"/>
      <effect_group>
        <passive_effect name="EntityDamage" operation="perc_add" value=".2"/>
        <passive_effect name="BlockDamage" operation="perc_add" value=".2" tags="melee"/>
        <passive_effect name="HealthMax" operation="base_add" value="50"/>
      </effect_group>
    </buff>
    <buff name="buffEnhancedNPC3">
      <stack_type value="replace"/>
      <duration value="300"/>
      <effect_group>
        <passive_effect name="HealthLoss" operation="perc_add" value="-.1"/>
        <passive_effect name="HealthMax" operation="base_add" value="50"/>
      </effect_group>
    </buff>
    <buff name="buffEnhancedNPC4">
      <stack_type value="replace"/>
      <duration value="300"/>
      <effect_group>
        <passive_effect name="AttributeLevel" operation="base_add" value="1"/>
        <passive_effect name="HealthMax" operation="base_add" value="50"/>
      </effect_group>
    </buff>
    <buff name="buffLeaderLimitsHiredNPCsAmount84" hidden="true" remove_on_death="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffLeaderLimitsHiredNPCsAmount84"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffLeaderLimitsHiredNPCsAmount84"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNPCHiredCountAboveMaxLimit" operation="set" value="1" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffNPCincHiredCountEachOtherAndTryDismiss" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffHiredNPCnoFallDamage" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fTransferNPCPDS" operation="set" value="10" target="self"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fNPCPreventDismissSecs">
          <requirement name="CVarCompare" target="self" cvar="fNPCPreventDismissSecs" operation="GTE" value="@fTransferNPCPDS"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffNPCSelfPreventDismissSecsAdd10" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="self" cvar="fNPCPreventDismissSecs" operation="GTE" value="@fTransferNPCPDS"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fNPCPreventDismissSecs" operation="subtract" value="@fTransferNPCPDS" target="self">
          <requirement name="CVarCompare" target="self" cvar="fNPCPreventDismissSecs" operation="GTE" value="@fTransferNPCPDS"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fRepairNPCArmor">
          <requirement name="CVarCompare" target="self" cvar="fRepairNPCArmor" operation="GTE" value="0.05"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffNPCRepairSelfArmorAddPerc5" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
          <requirement name="CVarCompare" target="self" cvar="fRepairNPCArmor" operation="GTE" value="0.05"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fRepairNPCArmor" operation="subtract" value="0.05" target="self">
          <requirement name="CVarCompare" target="self" cvar="fRepairNPCArmor" operation="GTE" value="0.05"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNPCFollowAboveLimit" operation="set" value="2" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNPCFollowAboveLimit" operation="set" value="3" target="selfAOE" range="60">
          <requirement name="ProgressionLevel" progression_name="perkCharismaticNature" operation="GTE" value="2"/>
          <requirement name="ProgressionLevel" progression_name="perkCharismaticNature" operation="LTE" value="3"/>
          <requirement name="CVarCompare" cvar="iGSKNPCFollowAllowMany" operation="Equals" value="1"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNPCFollowAboveLimit" operation="set" value="4" target="selfAOE" range="60">
          <requirement name="ProgressionLevel" progression_name="perkCharismaticNature" operation="Equals" value="4"/>
          <requirement name="CVarCompare" cvar="iGSKNPCFollowAllowMany" operation="Equals" value="1"/>
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@EntityID"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffHiredNPChudInfo">
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHiredNPChudInfoOnPlayerA" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="EntityID" operation="Equals" value="@Leader"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffHiredNPChudInfoOnPlayerB" target="selfAOE" range="60">
          <requirement name="EntityTagCompare" target="other" tags="player"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testC" operation="set" value="@iNPCAmmoSpent" target="selfAOE" range="60"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testD" operation="add" value="1" target="selfAOE" range="60"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testE" operation="add" value="1" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="EntityID" operation="Equals" value="@Leader"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testF" operation="add" value="1" target="selfAOE" range="60">
          <requirement name="EntityTagCompare" target="other" tags="player"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testG" operation="set" value="123" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="EntityID" operation="Equals" value="@Leader"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testH" operation="set" value="@iNPCAmmoSpent" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="EntityID" operation="Equals" value="@Leader"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testI" operation="add" value="@iNPCAmmoSpent" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="EntityID" operation="Equals" value="@Leader"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testJ" operation="set" value="@iNPCAmmoSpent" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="EntityID" operation="Equals" value="@Leader"/>
          <requirement name="CVarCompare" target="other" cvar="testJ" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testK" operation="add" value="@iNPCAmmoSpent" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="EntityID" operation="Equals" value="@Leader"/>
          <requirement name="CVarCompare" target="other" cvar="testK" operation="Equals" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffHiredNPChudInfoOnPlayerA">
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testA" operation="add" value="1"/>
      </effect_group>
    </buff>
    <buff name="buffHiredNPChudInfoOnPlayerB">
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="testB" operation="add" value="1"/>
      </effect_group>
    </buff>
    <buff name="buffNPCRepairSelfArmorAddPerc5">
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTransferNPCRepairArmor" operation="set" value="0.05" target="self"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNPCRepairSelfArmor" operation="add" value="@fTransferNPCRepairArmor"/>
      </effect_group>
    </buff>
    <buff name="buffNPCSelfPreventDismissSecsAdd10">
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTransferNPCPDS" operation="set" value="10" target="self"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNPCSelfPreventDismissSecs" operation="add" value="@fTransferNPCPDS"/>
      </effect_group>
    </buff>
    <buff name="buffNPCincHiredCountEachOtherAndTryDismiss">
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="CurrentOrder" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iNPCAmmoSpent"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iNPCAmmoLimit"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKNPCarmorDmgPercent">
          <requirement name="CVarCompare" cvar="fGSKNPCarmorDmgPercent" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKNPCPermanentArmorDmg">
          <requirement name="CVarCompare" cvar="fGSKNPCPermanentArmorDmg" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKNPCRepairSelfArmor">
          <requirement name="CVarCompare" cvar="fGSKNPCRepairSelfArmor" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKNPCSelfPreventDismissSecs">
          <requirement name="CVarCompare" cvar="fGSKNPCSelfPreventDismissSecs" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:npcHasCustomPowerArmor">
          <requirement name="HasBuff" buff="buffGSKNPCHiredFollowingPowerArmorUse"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iNPCAmmoSpent" operation="LT" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iNPCAmmoSpent" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iNPCAmmoLimit" operation="GT" value="0"/>
        <requirement name="CVarCompare" cvar="iNPCAmmoSpent" operation="GTE" value="@iNPCAmmoLimit"/>
        <requirement name="CVarCompare" cvar="fGSKNPCSelfPreventDismissSecs" operation="LTE" value="0"/>
        <requirement name="CVarCompare" cvar="CurrentOrder" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffOrderPatrol"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="CurrentOrder" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fNPCAmmoPerc" operation="set" value="@iNPCAmmoSpent"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fNPCAmmoPerc" operation="divide" value="@iNPCAmmoLimit"/>
        <triggered_effect trigger="onSelfBuffStart" action="AttachParticleEffectToEntity" particle="#@modfolder(0-XNPCCore):Resources/Bugs.unity3d?p_Flies2_X" local_offset="0,0.5,0.3" local_rotation="0,0,0" parent_transform="Origin">
          <requirement name="CVarCompare" cvar="fNPCAmmoPerc" operation="GTE" value="0.90"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveParticleEffectFromEntity" particle="p_Flies2_X">
          <requirement name="CVarCompare" cvar="fNPCAmmoPerc" operation="LT" value="0.90"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iNPCAmmoLimit" operation="GT" value="0"/>
        <requirement name="CVarCompare" cvar="iNPCAmmoSpent" operation="GTE" value="@iNPCAmmoLimit"/>
        <requirement name="CVarCompare" cvar="fGSKNPCSelfPreventDismissSecs" operation="LTE" value="0"/>
        <requirement name="CVarCompare" cvar="CurrentOrder" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffOrderPatrol"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNPCHiredCountAboveMaxLimit" operation="Equals" value="@iGSKNPCFollowAboveLimit"/>
        <requirement name="CVarCompare" cvar="CurrentOrder" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKNPCSelfPreventDismissSecs" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKNPCHiredCountAboveMaxLimit"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffOrderPatrol"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNPCHiredCountAboveMaxLimit" operation="LT" value="@iGSKNPCFollowAboveLimit"/>
        <requirement name="CVarCompare" cvar="CurrentOrder" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKNPCHiredCountAboveMaxLimit" operation="add" value="1" target="selfAOE" range="60">
          <requirement name="CVarCompare" target="other" cvar="Leader" operation="Equals" value="@Leader"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKNPCSelfPreventDismissSecs" operation="GT" value="0"/>
        <requirement name="CVarCompare" cvar="CurrentOrder" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNPCSelfPreventDismissSecs" operation="subtract" value="@fTransferNPCPDS">
          <requirements compare_type="or">
            <requirement name="CVarCompare" cvar="iNPCAmmoSpent" operation="GTE" value="@iNPCAmmoLimit"/>
            <requirement name="CVarCompare" cvar="iGSKNPCHiredCountAboveMaxLimit" operation="Equals" value="@iGSKNPCFollowAboveLimit"/>
          </requirements>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNPCSelfPreventDismissSecs" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKNPCSelfPreventDismissSecs" operation="LT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="_buffPlayerHiredNPCInc">
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKNPCHiredCountAboveMaxLimit" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="_buffPlayerHiredNPCInc"/>
      </effect_group>
    </buff>
    <buff name="buffGSKPlayerTooManyHiredNPCsSlowDown" hidden="true">
      <damage_type value="stun"/>
      <stack_type value="replace"/>
      <duration value="6"/>
      <effect_group>
        <passive_effect name="RunSpeed" operation="perc_subtract" value="0.75" duration="6"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="0.75" duration="6"/>
        <passive_effect name="CrouchSpeed" operation="perc_subtract" value="0.75" duration="6"/>
      </effect_group>
    </buff>
    <buff name="buffGSKProperSwimming23" hidden="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="3"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffGSKProperSwimming23"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:ENDED:buffGSKProperSwimming23"/>
        <triggered_effect trigger="onSelfSwimStart" action="AddBuff" buff="buffGSKProperSwimmingWork23"/>
      </effect_group>
    </buff>
    <buff name="buffGSKProperSwimmingWork23" hidden="false" icon="ui_game_symbol_oxygen" icon_color="250,250,0">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="0.25"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffGSKProperSwimmingWork23"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:ENDED:buffGSKProperSwimmingWork23"/>
        <passive_effect name="WalkSpeed" operation="perc_add" value="2.0"/>
        <!-- HELPGOOD: run seems to not work in water? speed doesnt seem to change
      <passive_effect name="RunSpeed"     operation="perc_add" value="2.5"/> 
-->
        <triggered_effect trigger="onSelfSwimStop" action="RemoveBuff" buff="buffGSKProperSwimmingWork23"/>
      </effect_group>
    </buff>
    <buff name="_buffGSKProperSwimming23" hidden="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="3"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffGSKProperSwimming23"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:ENDED:buffGSKProperSwimming23"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKProperSwimmingWork23">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="1"/>
          <requirement name="!HasBuff" buff="buffGSKProperSwimmingWork23"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="_buffGSKProperSwimmingWork23" hidden="false" icon="ui_game_symbol_oxygen" icon_color="250,250,0">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="0.25"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffGSKProperSwimmingWork23"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:ENDED:buffGSKProperSwimmingWork23"/>
        <passive_effect name="WalkSpeed" operation="perc_add" value="2.0"/>
        <passive_effect name="RunSpeed" operation="perc_add" value="2.5"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKProperSwimmingWork23">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="_buffNPCHiredCounter">
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="_buffPlayerHiredNPCInc" target="selfAOE" range="20" target_tags="player"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="_buffNPCHiredCounter"/>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs/buff[@name='buffOrderDismiss']/effect_group">
    <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iNPCAmmoSpent" operation="subtract" value="@iNPCAmmoLimit"/>
    <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKNPCHiredFollowingPowerArmorUse"/>
  </append>
  <append xpath="/buffs/buff[@name='buffOrderFollow']/effect_group">
    <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fNPCPreventDismissSecs" operation="add" value="15"/>
  </append>
  <append xpath="/buffs">
    <buff name="buffGSKRespawnPreventWaterBkp1" hidden="true" remove_on_death="true">
      <duration value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKRespawnPreventWaterBkp1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKRespawnPreventWaterBkp1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKRespawnPreventWaterBkp1"/>
      </effect_group>
    </buff>
    <buff name="buffGSKBkpWaterVal51" hidden="true" remove_on_death="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="0.5"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKBkpWaterVal51"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKBkpWaterVal51"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKWaterPercBkp" operation="add" value="0.025">
          <requirement name="StatComparePercCurrentToMax" stat="Water" operation="GT" value="@fGSKWaterPercBkp"/>
          <requirement name="NotHasBuff" buff="buffGSKRespawnPreventWaterBkp1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKWaterPercBkp" operation="subtract" value="0.025">
          <requirement name="StatComparePercCurrentToMax" stat="Water" operation="LT" value="@fGSKWaterPercBkp"/>
          <requirement name="NotHasBuff" buff="buffNearDeathRegen"/>
          <requirement name="NotHasBuff" buff="buffGSKRespawnPreventWaterBkp1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKWaterPercBkp" operation="set" value="0.05">
          <requirement name="CVarCompare" cvar="fGSKWaterPercBkp" operation="LT" value="0.05"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKinfectionCounterBkp" operation="set" value="0">
          <requirement name="NotHasBuff" buff="buffInfectionMain"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKinfectionCounterBkp" operation="set" value="@infectionCounter">
          <requirement name="HasBuff" buff="buffInfectionMain"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKinfectionCureCounterBkp" operation="set" value="@$infectionCureCounter"/>
      </effect_group>
    </buff>
  </append>
  <remove xpath="/buffs/buff[@name='buffDeathFoodDrinkAdjust']/effect_group/triggered_effect[     @trigger='onSelfBuffUpdate'     and      @action='ModifyStats'           and      @stat='Food'                    and      @operation='set']"/>
  <set xpath="/buffs/buff[@name='buffDeathFoodDrinkAdjust']/effect_group/triggered_effect[       @stat='Health'     ]/@value">15</set>
  <set xpath="/buffs/buff[@name='buffDeathFoodDrinkAdjust']/effect_group/triggered_effect[       @stat='Water'     ]/@value">0</set>
  <remove xpath="/buffs/buff[@name='buffNearDeathRegen']/effect_group/triggered_effect[@trigger='onSelfBuffStart'      and @action='RemoveAllNegativeBuffs']"/>
  <remove xpath="/buffs/buff[@name='buffNearDeathRegen']/effect_group/triggered_effect[@trigger='onSelfBuffStart'      and @action='RemoveBuff' and @buff='buffLegSprained']"/>
  <set xpath="/buffs/buff[@name='buffNearDeathRegen']/duration/@value">600</set>
  <set xpath="/buffs/buff[@name='buffNearDeathRegen']/effect_group/triggered_effect[       @trigger='onSelfBuffStart' and        @action='ModifyCVar'       and        @cvar='$NearDeathRegen'    and        @operation='set'     ]/@value">0.10</set>
  <append xpath="/buffs/buff[@name='buffNearDeathRegen']/effect_group">
    <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$NearDeathRegenWater" operation="set" value="@fGSKWaterPercBkp"/>
    <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="STARTED:buffNearDeathRegen"/>
    <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="REMOVED:buffNearDeathRegen"/>
  </append>
  <set xpath="/buffs/buff[@name='buffNearDeathRegen']/effect_group/     passive_effect[@name='WaterChangeOT']/        requirement[@name='StatComparePercCurrentToMax']/@value">@$NearDeathRegenWater</set>
  <append xpath="/buffs/buff[@name='buffNearDeathTraumaTrigger']/effect_group">
    <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="infectionCounter" operation="set" value="@fGSKinfectionCounterBkp">
      <requirement name="CVarCompare" cvar="fGSKinfectionCounterBkp" operation="GT" value="@infectionCounter"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$infectionCureCounter" operation="set" value="@fGSKinfectionCureCounterBkp">
      <requirement name="CVarCompare" cvar="fGSKinfectionCureCounterBkp" operation="GT" value="@$infectionCureCounter"/>
    </triggered_effect>
    <triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffInfectionMain">
      <requirement name="NotHasBuff" buff="buffInfectionMain"/>
      <requirement name="CVarCompare" cvar="fGSKinfectionCounterBkp" operation="GT" value="@infectionCounter"/>
    </triggered_effect>
  </append>
  <set xpath="/buffs/buff[@name='buffNearDeathRegen']/effect_group/requirement[       @name='StatComparePercCurrentToMax' and       @stat='Water' and       @operation='GTE'     ]/@value">@fGSKWaterPercBkp</set>
  <set xpath="/buffs/buff[@name='buffNearDeathRegen']/effect_group/requirement[       @name='StatComparePercCurrentToModMax' and       @stat='Health' and       @operation='GTE'     ]/@value">0.75</set>
  <set xpath="/buffs/buff[@name='buffNearDeathRegen']/stack_type/@value">replace</set>
  <append xpath="/buffs/buff[@name='buffStatusCheck01']/effect_group/triggered_effect[       @trigger='onSelfFallImpact' and        @action='AddBuff'           and        @buff='buffPlayerFallingDamage'     ]">
    <requirement name="!EntityTagCompare" tags="npc"/>
  </append>
  <append xpath="/buffs">
    <buff name="buffNightVisionReset" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNVEnUseUpdRate" operation="set" value="0.25"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKBatteryEnergyMinModActivableCfgRO" operation="set" value="15"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnNVCfgRO" operation="set" value="1.00"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnWLCfgRO" operation="set" value="0.15"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnHLCfgRO" operation="set" value="0.10"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnNVCfgRO" operation="multiply" value="@fGSKNVEnUseUpdRate"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnWLCfgRO" operation="multiply" value="@fGSKNVEnUseUpdRate"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnHLCfgRO" operation="multiply" value="@fGSKNVEnUseUpdRate"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBattMaxCharge" operation="set" value="75"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBattMaxCharge" operation="set" value="150">
          <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="GTE" value="0"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="LT" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBattMaxCharge" operation="set" value="300">
          <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="LT" value="2"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBattMaxCharge" operation="set" value="600">
          <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="GTE" value="2"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="LT" value="3"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBattMaxCharge" operation="set" value="1200">
          <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="GTE" value="3"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="LT" value="4"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBattMaxCharge" operation="set" value="2400">
          <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="GTE" value="4"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="LT" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBattMaxCharge" operation="set" value="4800">
          <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="GTE" value="5"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTB" operation="LT" value="6"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKBattMaxChargeCurrent" operation="set" value="@iGSKBattMaxCharge"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKBattMaxChargeCurrent" operation="multiply" value="@fGSKDmgPercSubTB">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTB" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnNV" operation="set" value="@fGSKEnNVCfgRO"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnWL" operation="set" value="@fGSKEnWLCfgRO"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEnHL" operation="set" value="@fGSKEnHLCfgRO"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNVIntensity" operation="set" value="1.0"/>
      </effect_group>
    </buff>
    <buff name="buffFireAddFuel" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireFuelMax" operation="set" value="600">
          <requirement name="CVarCompare" cvar="fGSKFireFuelMax" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireFuelMax" operation="set" value="3600">
          <requirement name="CVarCompare" cvar="fGSKFireFuelMax" operation="GT" value="3600"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireFuel" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireFuel" operation="set" value="@fGSKFireFuelMax">
          <requirement name="CVarCompare" cvar="fGSKFireFuel" operation="GT" value="@fGSKFireFuelMax"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffFireAddFuelFull" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="3"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffFireAddFuelFull"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:ENDED:buffFireAddFuelFull"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffFireAddFuel">
          <requirement name="CVarCompare" cvar="iGSKfireFuelAdd" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKfireFuelAdd" operation="subtract" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffFireAddFuelFull">
          <requirement name="CVarCompare" cvar="iGSKfireFuelAdd" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKfireFuelAdd" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKfireFuelAdd" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="iGSKfireFuelAdd"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKFireFuel"/>
      </effect_group>
    </buff>
    <buff name="buffTorchConsumeFuel" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="3"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKFireFuel" operation="subtract" value="3"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKFireFuel" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKFireFuel" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveParticleEffectFromEntity" particle="torch02_firePrefab" parent_transform="Side">
          <requirement name="CVarCompare" cvar="fGSKFireFuel" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="torch02_firePrefab" parent_transform="Side">
          <requirement name="CVarCompare" cvar="fGSKFireFuel" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffBurningShaftConsumeFuel" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="3"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKFireFuel" operation="subtract" value="3"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKFireFuel" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKFireFuel" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemovePart" part="Flames">
          <requirement name="CVarCompare" cvar="fGSKFireFuel" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddPart" part="Flames" prefab="property?FlameEffect" parentTransform="#HeldItemRoot">
          <requirement name="CVarCompare" cvar="fGSKFireFuel" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffNightVisionAddBatteryCharge" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNightVisionAddBatteryChargeWork"/>
      </effect_group>
    </buff>
    <buff name="buffNightVisionAddBatteryChargeStrong" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="add" value="1200"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNightVisionAddBatteryChargeWork"/>
      </effect_group>
    </buff>
    <buff name="buffNightVisionAddBatteryChargeWork" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKBatteryCharges"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNightVisionReset"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKTeslaDegrade" target="self"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectHLON" target="self">
          <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectWLON" target="self">
          <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectNVON" target="self">
          <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        </triggered_effect>
      </effect_group>
      <effect_group name="other very useful info">
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKCalcLightsPercRound"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKTeslaLog"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKTeslaOverchargeDmg52"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKRecalcDegradations"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectHLON" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercHL" operation="LT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLight" active="true"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightCam" active="true"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectHLWeakON" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercHL" operation="LT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLight" active="true"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightCam" active="false"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectHLOFF" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLight" active="false"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightCam" active="false"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectWLON" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercWL" operation="LT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="Side" transform_path="lightSource"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="Gunjoint" transform_path="flashlight_lightSource"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectWLWeakON" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercWL" operation="LT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="Side" transform_path="lightSource"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="Gunjoint" transform_path="flashlight_lightSource"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="true" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectWLOFF" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="Side" transform_path="lightSource"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="Gunjoint" transform_path="flashlight_lightSource"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="lightSource"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectNVON" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercNV" operation="LT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1.00" fade="0.0" effect_name="NightVision"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightTPV" active="@!.IsFPV"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightFPV" active="@.IsFPV"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectNVWeakON" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercNV" operation="LT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1.00" fade="0.0" effect_name="NightVision"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightTPV" active="false"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightFPV" active="false"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVisualEffectNVOFF" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.00" fade="0.0" effect_name="NightVision"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightTPV" active="false"/>
        <triggered_effect trigger="onSelfBuffStart" action="SetPartActive" part="HeadLightFPV" active="false"/>
      </effect_group>
    </buff>
    <buff name="buffGSKCalcLightsPercRound" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercHLShow" operation="set" value="@fGSKDmgPercHL"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercHLShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercWLShow" operation="set" value="@fGSKDmgPercWL"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercWLShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercNVShow" operation="set" value="@fGSKDmgPercNV"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercNVShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTTShow" operation="set" value="@fGSKDmgPercTT"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTTShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTSShow" operation="set" value="@fGSKDmgPercTS"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTSShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTAShow" operation="set" value="@fGSKDmgPercTA"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTAShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTHShow" operation="set" value="@fGSKDmgPercTH"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTHShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTRShow" operation="set" value="@fGSKDmgPercTR"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTRShow" operation="multiply" value="100"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTBShow" operation="set" value="@fGSKDmgPercTB"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKDmgPercTBShow" operation="multiply" value="100"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTeslaOverchargeDmg52" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="3.0"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKBattMaxChargeCurrent" operation="GT" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBattMaxChargeCurrent"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".GSKtmp" operation="set" value="@iGSKBatteryCharges"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".GSKtmp" operation="subtract" value="@fGSKBattMaxChargeCurrent" target="self"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".GSKtmp" operation="set" value="100">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="GT" value="100"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="@.GSKtmp"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyHL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyWL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyNV"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyTA"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyTB"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyTH"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyTR"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyTS"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iChkTeslaModsSum" operation="add" value="@bGSKEnergyTT"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffShocked">
          <requirement name="CVarCompare" cvar="iChkTeslaModsSum" operation="GTE" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message_key="TooltipBuffGSKTeslaOverchargeDmg">
          <requirement name="CVarCompare" cvar="iChkTeslaModsSum" operation="GTE" value="1"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKTeslaDegrade" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="1.0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iRecalcLights" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="iRecalcLights" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKCalcLightsPercRound">
          <requirement name="CVarCompare" cvar="iRecalcLights" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iRecalcLights" operation="set" value="60">
          <requirement name="CVarCompare" cvar="iRecalcLights" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDegrade" operation="set" value="0.0001"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercHL" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercHL" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="75"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercWL" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercWL" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="25"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercNV" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercNV" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="50"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercTA" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyTA" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTA" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercTB" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTB" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercTH" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyTH" operation="Equals" value="1"/>
          <requirement name="HasBuff" buff="buffGSKTeslaHero"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTH" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="75"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercTR" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyTR" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTR" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="50"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercTS" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTS" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgPercTT" operation="add" value="@fGSKDegrade">
          <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTT" operation="LT" value="1.0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKBloodmoonZombiesPowerChk7" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="60"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKBloodmoonZombiesPower" range="100" target="selfAOE">
          <requirement name="NotHasBuff" target="other" buff="buffGSKBloodmoonZombiesPower"/>
          <requirement name="EntityTagCompare" target="other" tags="zombie"/>
          <requirement name="IsBloodMoon"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKBloodmoonZombiesPower" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="60"/>
      <effect_group>
        <passive_effect name="BlockDamage" operation="perc_add" value="12" help="find a strong building"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKBloodmoonZombiesPower">
          <requirement name="!IsBloodMoon"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKRecalcDegradations" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddHL" operation="set" value="@fGSKDmgPercHL"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddHL" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubHL" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubHL" operation="subtract" value="@fGSKDmgPercHL"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubHL" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubHL" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddWL" operation="set" value="@fGSKDmgPercWL"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddWL" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubWL" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubWL" operation="subtract" value="@fGSKDmgPercWL"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubWL" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubWL" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddNV" operation="set" value="@fGSKDmgPercNV"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddNV" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubNV" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubNV" operation="subtract" value="@fGSKDmgPercNV"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubNV" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubNV" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTT" operation="set" value="@fGSKDmgPercTT"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTT" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTT" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTT" operation="subtract" value="@fGSKDmgPercTT"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTT" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTS" operation="set" value="@fGSKDmgPercTS"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTS" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTS" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTS" operation="subtract" value="@fGSKDmgPercTS"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTS" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTS" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTA" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTA" operation="set" value="@fGSKDmgPercTA"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTA" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTA" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTA" operation="subtract" value="@fGSKDmgPercTA"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTA" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTA" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="HasBuff" buff="buffGSKTeslaHero"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTH" operation="set" value="@fGSKDmgPercTH"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTH" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTH" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTH" operation="subtract" value="@fGSKDmgPercTH"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTH" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTR" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTR" operation="set" value="@fGSKDmgPercTR"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTR" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTR" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTR" operation="subtract" value="@fGSKDmgPercTR"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTR" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTR" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTB" operation="set" value="@fGSKDmgPercTB"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercAddTB" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTB" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTB" operation="subtract" value="@fGSKDmgPercTB"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercSubTB" operation="set" value="0.001">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTB" operation="LT" value="0.001"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNightVisionReset"/>
      </effect_group>
    </buff>
    <buff name="buffGSKHeatColdProtClothDmgAdd10" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgHeatProt" operation="add" value="randomFloat(0.005,0.050)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgHeatProt" operation="add" value="randomFloat(0.05,0.20)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgColdProt" operation="add" value="randomFloat(0.005,0.050)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgColdProt" operation="add" value="randomFloat(0.05,0.20)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="5"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKHeatColdProtClothDmgKeep10" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="5"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group help="natural degradation">
        <requirement name="EntityHasMovementTag" tags="running"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$fGSKDmgHeatProtTMP" operation="set" value="randomInt(3,10)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$fGSKDmgHeatProtTMP" operation="divide" value="10000"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgHeatProt" operation="add" value="@$fGSKDmgHeatProtTMP"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgColdProt" operation="add" value="@$fGSKDmgHeatProtTMP"/>
      </effect_group>
      <effect_group help="natural degradation">
        <requirement name="!EntityHasMovementTag" tags="running"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$fGSKDmgHeatProtTMP" operation="set" value="randomInt(0,2)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$fGSKDmgHeatProtTMP" operation="divide" value="10000"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgHeatProt" operation="add" value="@$fGSKDmgHeatProtTMP"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgColdProt" operation="add" value="@$fGSKDmgHeatProtTMP"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgHeatProt" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgHeatProt" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgHeatProt" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgHeatProt" operation="GT" value="1.00"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgColdProt" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgColdProt" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKDmgColdProt" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgColdProt" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <passive_effect name="HypothermalResist" operation="perc_subtract" value="@fGSKDmgColdProt">
          <requirement name="CVarCompare" cvar="fGSKDmgColdProt" operation="GT" value="0"/>
        </passive_effect>
        <passive_effect name="HyperthermalResist" operation="perc_subtract" value="@fGSKDmgHeatProt">
          <requirement name="CVarCompare" cvar="fGSKDmgHeatProt" operation="GT" value="0"/>
        </passive_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKChemUseSideEffects9" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="60"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <passive_effect name="HealthMaxBlockage" operation="perc_add" value="@fGSKHitpointsBlockageChemUse">
          <requirement name="CVarCompare" cvar="fGSKHitpointsBlockageChemUse" operation="GT" value="0"/>
        </passive_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKHitpointsBlockageChemUse" operation="subtract" value="0.001"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKHitpointsBlockageChemUse" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKHitpointsBlockageChemUse" operation="LT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKBattLightsNVEtcDmgAdd" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="15.0"/>
      <update_rate value="0.20"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectHLOFF"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercHL" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercHL" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercHL" operation="add" value="randomFloat(0.005,0.050)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercHL" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercHL" operation="GT" value="1.00"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".GSKtmp" operation="set" value="randomFloat(0.0,1.0)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectHLOFF">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="LT" value="@fGSKDmgPercHL"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectHLON">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="GTE" value="@fGSKDmgPercHL"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffGSKVisualEffectHLON"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectWLOFF"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercWL" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercWL" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercWL" operation="add" value="randomFloat(0.005,0.015)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercWL" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercWL" operation="GT" value="1.00"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".GSKtmp" operation="set" value="randomFloat(0.0,1.0)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectWLOFF">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="LT" value="@fGSKDmgPercWL"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectWLON">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="GTE" value="@fGSKDmgPercWL"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffGSKVisualEffectWLON"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectNVOFF"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercNV" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercNV" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercNV" operation="add" value="randomFloat(0.005,0.025)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercNV" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercNV" operation="GT" value="1.00"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".GSKtmp" operation="set" value="randomFloat(0.0,1.0)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectNVOFF">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="LT" value="@fGSKDmgPercNV"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectNVON">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="GTE" value="@fGSKDmgPercNV"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffGSKVisualEffectNVON"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTT" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTT" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTT" operation="add" value="randomFloat(0.010,0.020)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTT" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTT" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTS" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTS" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTS" operation="add" value="randomFloat(0.005,0.010)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTS" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTS" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="HasBuff" buff="buffGSKTeslaHero"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTH" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTH" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTH" operation="add" value="randomFloat(0.050,0.100)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTH" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTH" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTR" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTR" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTR" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTR" operation="add" value="randomFloat(0.020,0.050)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTR" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTR" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTB" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTB" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTB" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTB" operation="add" value="randomFloat(0.001,0.005)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercTB" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercTB" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKCalcLightsPercRound"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKTeslaLog"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKRecalcDegradations"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKBattAutoUnglitchChance" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBattAutoUnglitchChance" operation="add" value="0.1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".GSKtmp" operation="set" value="randomFloat(0,100)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKBattLightsNVEtcDmgAdd">
          <requirement name="CVarCompare" cvar=".GSKtmp" operation="LTE" value="@fGSKBattAutoUnglitchChance"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKTeslaLog" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKBattMaxChargeCurrent"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKBattMaxCharge"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercHL"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercWL"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercNV"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercTT"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercTS"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercTA"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercTH"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercTR"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercAddTT"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercAddTS"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercAddTA"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercAddTH"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercAddTR"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercSubTT"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercSubTS"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercSubTA"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercSubTH"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKDmgPercSubTR"/>
      </effect_group>
    </buff>
    <buff name="buffShockedPerkLvl0" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="multiply" value="@fGSKDmgPercSubTR">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTR" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked"/>
      </effect_group>
    </buff>
    <buff name="buffShockedPerkLvl1" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="2.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="multiply" value="@fGSKDmgPercSubTR">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTR" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked"/>
      </effect_group>
    </buff>
    <buff name="buffShockedPerkLvl2" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="3.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="multiply" value="@fGSKDmgPercSubTR">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTR" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked"/>
      </effect_group>
    </buff>
    <buff name="buffShockedPerkLvl3" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="4.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="multiply" value="@fGSKDmgPercSubTR">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTR" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked"/>
      </effect_group>
    </buff>
    <buff name="buffShockedPerkLvl4" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="5.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="multiply" value="@fGSKDmgPercSubTR">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTR" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked"/>
      </effect_group>
    </buff>
    <buff name="buffShockedPerkLvl5" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="6.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="multiply" value="@fGSKDmgPercSubTR">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTR" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked"/>
      </effect_group>
    </buff>
    <buff name="buffRequestShockedEnergyDebt" hidden="true" remove_on_death="true">
      <stack_type value="replace"/>
      <duration value="0.75"/>
      <update_rate value="0.5"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" target="selfAOE" range="20" target_tags="player" buff="buffApplyShockedEnergyDebt">
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffApplyShockedEnergyDebt" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="1.5">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="0"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="3">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="2"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="6">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="2"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="3"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="9">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="3"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="4"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="12">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="4"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="15">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="5"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="6"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKEnergyGrantSomeModesAreReallyEnabledAndUpdateInfo" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKEnergyTA" operation="set" value="1">
          <requirement name="CVarCompare" cvar="bGSKEnergyTA" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKEnergyTA" operation="set" value="0">
          <requirement name="CVarCompare" cvar="bGSKEnergyTA" operation="Equals" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKEnergyHarvestEnabled" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKEnergyTA" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="bGSKEnergyTA" operation="set" value="0"/>
      </effect_group>
    </buff>
    <buff name="buffGSKEnergyShieldEnabled" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="1.0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="bGSKEnergyTS" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTS" operation="set" value="1">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTS" operation="LTE" value="0.95"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTS" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercTS" operation="GT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message_key="TooltipTeslaModTooDamaged"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTS" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="0.01"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKtmp" operation="multiply" value="@fGSKDmgPercAddTS">
          <requirement name="CVarCompare" cvar="fGSKDmgPercAddTS" operation="GT" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="@.fGSKtmp"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="set" value="8"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="multiply" value="@fGSKDmgPercSubTS">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTS" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTS" operation="LTE" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKShieldDmgResAdd"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="multiply" value="1">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="0"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="multiply" value="2">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="2"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="multiply" value="3">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="2"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="3"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="multiply" value="4">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="3"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="4"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="multiply" value="5">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="4"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKShieldDmgResAdd" operation="multiply" value="6">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="5"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="6"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="fGSKShieldDmgResAdd"/>
      </effect_group>
      <effect_group>
        <passive_effect name="PhysicalDamageResist" operation="base_add" value="@fGSKShieldDmgResAdd"/>
        <passive_effect name="ElementalDamageResist" operation="base_add" value="@fGSKShieldDmgResAdd" tags="electrical"/>
      </effect_group>
    </buff>
    <buff name="buffGSKEnergyThornsEnabled" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="1.0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="bGSKEnergyTT" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTT" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTT" operation="set" value="1">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTT" operation="LTE" value="0.95"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercTT" operation="GT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTT" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message_key="TooltipTeslaModTooDamaged"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="0.01"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKtmp" operation="multiply" value="@fGSKDmgPercAddTT">
          <requirement name="CVarCompare" cvar="fGSKDmgPercAddTT" operation="GT" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="@.fGSKtmp"/>
      </effect_group>
    </buff>
    <buff name="buffGSKShockArrowEnabled" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="bGSKEnergyTR" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTR" operation="set" value="1">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercTR" operation="LTE" value="0.95"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTR" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTR" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercTR" operation="GT" value="0.95"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKEnergyTR" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message_key="TooltipTeslaModTooDamaged"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTeslaHeroEnabled" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKEnergyTH" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="bGSKEnergyTH" operation="set" value="0"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTeslaBatteryEnabled" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKEnergyTB" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNightVisionReset"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="bGSKEnergyTB" operation="set" value="0"/>
      </effect_group>
    </buff>
    <buff name="buffGSKEnergyShieldDefend" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKEnergyShieldDefend"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="set" value="2.5">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="0"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="set" value="5">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="2"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="set" value="10">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="2"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="3"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="set" value="15">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="3"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="4"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="set" value="20">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="4"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="set" value="25">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="5"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="6"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKarmorAddToMultTS" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKarmorAddToMultTS" operation="add" value="@fGSKarmorAddToMultTSHead"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKarmorAddToMultTS" operation="add" value="@fGSKarmorAddToMultTSTorso"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKarmorAddToMultTS" operation="add" value="@fGSKarmorAddToMultTSHands"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKarmorAddToMultTS" operation="add" value="@fGSKarmorAddToMultTSLegs"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKarmorAddToMultTS" operation="add" value="@fGSKarmorAddToMultTSFeet"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKTSBCTmpSub" operation="multiply" value="@fGSKarmorAddToMultTS" help="the more armored you already are, the more energy costy will be to keep the energy shield functional"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="@.iGSKTSBCTmpSub"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTeslaHeroToggle" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="ProgressionLevel" progression_name="perkElectrocutioner" operation="GTE" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKTeslaHeroMode" operation="set" value="-1">
          <requirement name="CVarCompare" cvar="iGSKTeslaHeroMode" operation="GTE" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKTeslaHeroMode" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKTeslaHeroMode"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKTeslaHero">
          <requirement name="CVarCompare" cvar="iGSKTeslaHeroMode" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKTeslaHero">
          <requirement name="CVarCompare" cvar="iGSKTeslaHeroMode" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKTeslaHero" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="1.0"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="GTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="LT" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="set" value="0.35"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="multiply" value="@fGSKDmgPercSubTH">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LTE" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="2.5"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKTeHeTriggerThornsChance" operation="set" value="20"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="GTE" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="LT" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="set" value="0.70"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="multiply" value="@fGSKDmgPercSubTH">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LTE" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="5"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKTeHeTriggerThornsChance" operation="set" value="35"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="GTE" value="2"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="LT" value="3"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="set" value="1.05"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="multiply" value="@fGSKDmgPercSubTH">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LTE" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="10"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKTeHeTriggerThornsChance" operation="set" value="50"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="GTE" value="3"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="LT" value="4"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="set" value="1.40"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="multiply" value="@fGSKDmgPercSubTH">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LTE" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKTeHeTriggerThornsChance" operation="set" value="65"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="GTE" value="4"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="LT" value="5"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="set" value="1.75"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="multiply" value="@fGSKDmgPercSubTH">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LTE" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="20"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKTeHeTriggerThornsChance" operation="set" value="80"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="GTE" value="5"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTH" operation="LT" value="6"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="set" value="2.10"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKTHeroStatPercAdd" operation="multiply" value="@fGSKDmgPercSubTH">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LTE" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="25"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKTeHeTriggerThornsChance" operation="set" value="95"/>
      </effect_group>
      <effect_group>
        <passive_effect name="RunSpeed" operation="perc_add" value="@fGSKTHeroStatPercAdd">
          <requirement name="!IsBloodMoon"/>
        </passive_effect>
        <passive_effect name="JumpStrength" operation="perc_add" value="@fGSKTHeroStatPercAdd"/>
      </effect_group>
      <effect_group name="a chance to trigger thorns damage to nearby enemies">
        <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="@.iGSKTeHeTriggerThornsChance"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKReceiveThronsDmg" operation="add" value="1" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKEnergyThornsDischarge"/>
      </effect_group>
      <effect_group name="damages the player when used. The debuffs to speed and jump only happen if duration is &gt;= 4">
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar=".buffShockedDurationStart" operation="LT" value="0.05"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="set" value="0.05"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffShocked"/>
      </effect_group>
      <effect_group name="remove on low energy">
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKTeslaHero"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKTeslaHeroMode" operation="set" value="0"/>
      </effect_group>
    </buff>
    <buff name="buffGSKEnergyThornsDischarge" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKEnergyThornsDischarge">
          <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKEnergyThornsDischarge">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,1" operation="LTE" value="@fGSKDmgPercTT"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="multiply" value="@fGSKDmgPercSubTT">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="LTE" value="1.0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="2"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="set" value="2.5"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="multiply" value="@fGSKDmgPercSubTT">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="LT" value="1.0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="2"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="3"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="set" value="5.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="multiply" value="@fGSKDmgPercSubTT">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="LT" value="1.0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="3"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="4"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="set" value="7.5"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="multiply" value="@fGSKDmgPercSubTT">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="LT" value="1.0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="4"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="5"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="set" value="10"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="multiply" value="@fGSKDmgPercSubTT">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="LT" value="1.0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="5"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="6"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="set" value="12.5"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fTThornsDurationTMP" operation="multiply" value="@fGSKDmgPercSubTT">
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="GT" value="0.0"/>
          <requirement name="CVarCompare" cvar="fGSKDmgPercSubTT" operation="LT" value="1.0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBatteryEnergyMinModActivableCfgRO"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyTT" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fTThornsDurationTMP" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKReceiveThronsDmg" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="bGSKDebug" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="1" force="350" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="0"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="1"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="20"/>
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="2" force="400" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="2"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="23"/>
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="3" force="450" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="2"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="3"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="26"/>
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="4" force="500" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="3"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="4"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="29"/>
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="5" force="550" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="4"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="5"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="32"/>
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="6" force="600" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="GTE" value="5"/>
          <requirement name="CVarCompare" cvar="iGSKEnergyLvlTT" operation="LT" value="6"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="35"/>
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="@fTThornsDurationTMP" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffRequestShockedEnergyDebt" target="selfAOE" range="1.5" target_tags="zombie,animal,bandit">
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKReceiveThronsDmg" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="iGSKReceiveThronsDmg" operation="GTE" value="1" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKBatteryCharges"/>
      </effect_group>
    </buff>
    <buff name="_buffReceiveTThornsDmg" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKReceiveThronsDmg"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fTThornsDuration" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffRequestShockedEnergyDebt"/>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="1" force="350">
          <requirement name="CVarCompare" cvar="iTThornsLvl" operation="Equals" value="0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="2" force="400">
          <requirement name="CVarCompare" cvar="iTThornsLvl" operation="Equals" value="1"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="23"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="3" force="450">
          <requirement name="CVarCompare" cvar="iTThornsLvl" operation="Equals" value="2"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="26"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="4" force="500">
          <requirement name="CVarCompare" cvar="iTThornsLvl" operation="Equals" value="3"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="29"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="5" force="550">
          <requirement name="CVarCompare" cvar="iTThornsLvl" operation="Equals" value="4"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="32"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="6" force="600">
          <requirement name="CVarCompare" cvar="iTThornsLvl" operation="Equals" value="5"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="35"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKCalcPercRoundNPC_fGSKNPCarmorDmgPercent" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <update_rate value="0.05"/>
      <duration value="0"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKCalcPRCtrlWork" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="-1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKPercToShortTmpIN" operation="set" value="@fGSKNPCarmorDmgPercent"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="addBuff" buff="buffGetPercRound"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKCalcPRCtrlWork" operation="set" value="1"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKCalcPRCtrlWork" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar=".iGSKPercShortTmpOUT" operation="GTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKCalcPRCtrlWork" operation="set" value="2"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKCalcPRCtrlWork" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNPCarmorDmgPercentNPC1" operation="set" value="@.iGSKPercShortTmpOUT"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKCalcPRCtrlWork" operation="set" value="-1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKCalcPercRoundNPC_fGSKNPCarmorDmgPercent"/>
      </effect_group>
    </buff>
    <buff name="buffGSKCalcPercRoundNPCVars" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <update_rate value="0.05"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKCalcPRCtrlGlobal" operation="set" value="-1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKCalcPRCtrlWork" operation="set" value="-1"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKCalcPRCtrlWork" operation="Equals" value="-1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKCalcPRCtrlGlobal" operation="add" value="1"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKCalcPRCtrlGlobal" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKCalcPRCtrlWork" operation="Equals" value="-1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="addBuff" buff="buffGSKCalcPercRoundNPC_fGSKNPCarmorDmgPercent"/>
      </effect_group>
    </buff>
    <buff name="buffGetPercRound" hidden="true" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="0">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LTE" value="0.005"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.01"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.11"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="1">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.01"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="2">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.02"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="3">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.03"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="4">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.04"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="5">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.05"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="6">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.06"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="7">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.07"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="8">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.08"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="9">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.09"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="10">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.10"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.11"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.21"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="11">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.11"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="12">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.12"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="13">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.13"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="14">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.14"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="15">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.15"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="16">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.16"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="17">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.17"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="18">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.18"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="19">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.19"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="20">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.20"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.21"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.31"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="21">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.21"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="22">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.22"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="23">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.23"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="24">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.24"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="25">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.25"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="26">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.26"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="27">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.27"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="28">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.28"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="29">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.29"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="30">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.30"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.31"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.41"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="31">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.31"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="32">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.32"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="33">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.33"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="34">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.34"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="35">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.35"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="36">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.36"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="37">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.37"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="38">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.38"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="39">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.39"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="40">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.40"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.41"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.51"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="41">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.41"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="42">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.42"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="43">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.43"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="44">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.44"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="45">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.45"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="46">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.46"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="47">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.47"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="48">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.48"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="49">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.49"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="50">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.50"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.51"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.61"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="51">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.51"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="52">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.52"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="53">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.53"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="54">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.54"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="55">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.55"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="56">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.56"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="57">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.57"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="58">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.58"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="59">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.59"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="60">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.60"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.61"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.71"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="61">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.61"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="62">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.62"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="63">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.63"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="64">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.64"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="65">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.65"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="66">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.66"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="67">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.67"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="68">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.68"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="69">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.69"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="70">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.70"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.71"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.81"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="71">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.71"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="72">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.72"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="73">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.73"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="74">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.74"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="75">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.75"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="76">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.76"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="77">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.77"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="78">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.78"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="79">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.79"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="80">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.80"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.81"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.91"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="81">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.81"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="82">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.82"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="83">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.83"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="84">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.84"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="85">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.85"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="86">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.86"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="87">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.87"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="88">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.88"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="89">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.89"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="90">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.90"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.91"/>
        <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="LT" value="0.995"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="91">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.91"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="92">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.92"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="93">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.93"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="94">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.94"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="95">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.95"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="96">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.96"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="97">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.97"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="98">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.98"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="99">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.99"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKPercShortTmpOUT" operation="set" value="100">
          <requirement name="CVarCompare" cvar=".fGSKPercToShortTmpIN" operation="GTE" value="0.995"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffNightVisionUsesBatteries99" hidden="true" remove_on_death="false">
      <update_rate value="0.25"/>
      <stack_type value="ignore"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="ConsumeEnergy ON"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKBatteryCharges"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffNightVisionReset" target="self"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="ConsumeEnergy OFF"/>
        <triggered_effect trigger="onSelfBuffRemove" action="CVarLogValue" cvar="iGSKBatteryCharges"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKEnergyGrantSomeModesAreReallyEnabledAndUpdateInfo"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKDebug" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="bGSKEnergyHL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="bGSKEnergyWL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="bGSKEnergyNV"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKEnHL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKEnWL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKEnNV"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKBlinkAfterHL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKBlinkAfterWL"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="fGSKBlinkAfterNV"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar="iGSKBatteryCharges"/>
      </effect_group>
      <effect_group name="Consume Battery Energy">
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="@fGSKEnNV">
          <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="@fGSKEnHL">
          <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="subtract" value="@fGSKEnWL">
          <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBatteryChargePerc" operation="set" value="@iGSKBatteryCharges"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBatteryChargePerc" operation="divide" value="@fGSKBattMaxChargeCurrent"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryChargePercShow" operation="set" value="@fGSKBatteryChargePerc"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryChargePercShow" operation="multiply" value="100"/>
      </effect_group>
      <!-- HELPGOOD:_AUTOGENCODE_CREATEENERGYBLINKS_BEGIN BELOW:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createEnergyBlinks.sh ===== -->
      <effect_group name="DUMMY:BELOW:GENERATED_CODE:DO_NOT_MODIFY:RUN:./createEnergyBlinks.sh"/>
      <effect_group name="GSKEnergyBlinkEffectHL">
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectHLON">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnHL" operation="set" value="@fGSKEnHLCfgRO">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectHLOFF">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnHL" operation="set" value="0.002500">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="2"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterHL" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterHL" operation="set" value="randomFloat(0.25,2.00)">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterHL" operation="set" value="randomFloat(3.00,6.00)">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterHL" operation="subtract" value="@fGSKNVEnUseUpdRate">
          <requirement name="CVarCompare" cvar="fGSKBlinkAfterHL" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="2"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterHL" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectHLON"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnHL" operation="set" value="@fGSKEnHLCfgRO"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="2"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterHL" operation="LTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectHLOFF"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnHL" operation="set" value="0.002500"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercHL" operation="GTE" value="0.95"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectHLOFF"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnHL" operation="set" value="0"/>
      </effect_group>
      <effect_group name="GSKEnergyBlinkEffectWL">
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectWLON">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnWL" operation="set" value="@fGSKEnWLCfgRO">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectWLOFF">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnWL" operation="set" value="0.003750">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="15"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterWL" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterWL" operation="set" value="randomFloat(0.25,2.00)">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterWL" operation="set" value="randomFloat(3.00,6.00)">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterWL" operation="subtract" value="@fGSKNVEnUseUpdRate">
          <requirement name="CVarCompare" cvar="fGSKBlinkAfterWL" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="15"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterWL" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectWLON"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnWL" operation="set" value="@fGSKEnWLCfgRO"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="15"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterWL" operation="LTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectWLOFF"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnWL" operation="set" value="0.003750"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercWL" operation="GTE" value="0.95"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectWLOFF"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnWL" operation="set" value="0"/>
      </effect_group>
      <effect_group name="GSKEnergyBlinkEffectNV">
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="100"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectNVON">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnNV" operation="set" value="@fGSKEnNVCfgRO">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="100"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectNVOFF">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnNV" operation="set" value="0.025000">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="100"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterNV" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterNV" operation="set" value="randomFloat(0.25,2.00)">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterNV" operation="set" value="randomFloat(3.00,6.00)">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="100"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBlinkAfterNV" operation="subtract" value="@fGSKNVEnUseUpdRate">
          <requirement name="CVarCompare" cvar="fGSKBlinkAfterNV" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="100"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterNV" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectNVON"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnNV" operation="set" value="@fGSKEnNVCfgRO"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="100"/>
        <requirement name="CVarCompare" cvar="fGSKBlinkAfterNV" operation="LTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectNVOFF"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnNV" operation="set" value="0.025000"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercNV" operation="GTE" value="0.95"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVisualEffectNVOFF"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKEnNV" operation="set" value="0"/>
      </effect_group>
      <effect_group name="DUMMY:ABOVE:GENERATED_CODE:DO_NOT_MODIFY:RUN:./createEnergyBlinks.sh"/>
      <!-- HELPGOOD:_AUTOGENCODE_CREATEENERGYBLINKS_END ABOVE:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createEnergyBlinks.sh ===== -->
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBatteryDmgTime" operation="subtract" value="@fGSKNVEnUseUpdRate">
          <requirement name="CVarCompare" cvar="iGSKBatteryDmgTime" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNVGood" operation="set" value="1">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNVGood" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectHLOFF" target="self">
          <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectWLOFF" target="self">
          <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKVisualEffectNVOFF" target="self">
          <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyNV" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" target="self" buff="buffNightVisionUsesBatteries99"/>
      </effect_group>
    </buff>
  </append>
  <insertBefore xpath="/buffs/buff[@name='buffShocked']/effect_group/passive_effect[@name='BuffBlink']">
    <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="set" value="4">
      <requirement name="CVarCompare" cvar=".buffShockedDurationStart" operation="LTE" value="0"/>
    </triggered_effect>
  </insertBefore>
  <set xpath="/buffs/buff[@name='buffShocked']/effect_group/     triggered_effect[       @trigger='onSelfBuffStack'   and        @action='ModifyCVar'         and        @cvar='$buffShockedDuration' and        @operation='set'             and        @value='@.buffShockedDurationStart'     ]/@operation">add</set>
  <append xpath="/buffs/buff[@name='buffShocked']/effect_group/passive_effect[@name='HealthChangeOT']">
    <requirement name="!EntityTagCompare" tags="player"/>
  </append>
  <append xpath="/buffs/buff[@name='buffShocked']">
    <effect_group name="no shield = normal damage, could be vanilla damage">
      <requirement name="EntityTagCompare" tags="player"/>
      <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="0"/>
      <passive_effect name="HealthChangeOT" operation="base_add" value="-7"/>
    </effect_group>
    <effect_group name="with shield lowers the damage">
      <requirement name="EntityTagCompare" tags="player"/>
      <requirement name="CVarCompare" cvar="bGSKEnergyTS" operation="Equals" value="1"/>
      <passive_effect name="HealthChangeOT" operation="base_add" value="-6">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="1"/>
      </passive_effect>
      <passive_effect name="HealthChangeOT" operation="base_add" value="-5">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="2"/>
      </passive_effect>
      <passive_effect name="HealthChangeOT" operation="base_add" value="-4">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="2"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="3"/>
      </passive_effect>
      <passive_effect name="HealthChangeOT" operation="base_add" value="-3">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="3"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="4"/>
      </passive_effect>
      <passive_effect name="HealthChangeOT" operation="base_add" value="-2">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="4"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="5"/>
      </passive_effect>
      <passive_effect name="HealthChangeOT" operation="base_add" value="-1">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="GTE" value="5"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTS" operation="LT" value="6"/>
      </passive_effect>
    </effect_group>
    <effect_group name="collect energy from electrical dmg external source">
      <requirement name="EntityTagCompare" tags="player"/>
      <requirement name="CVarCompare" cvar="bGSKEnergyTA" operation="Equals" value="1"/>
      <requirement name="!HasBuff" buff="buffGSKTeslaHero"/>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="12">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="GTE" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="LT" value="1"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="25">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="GTE" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="LT" value="2"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="50">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="GTE" value="2"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="LT" value="3"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="100">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="GTE" value="3"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="LT" value="4"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="200">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="GTE" value="4"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="LT" value="5"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="set" value="400">
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="GTE" value="5"/>
        <requirement name="CVarCompare" cvar="iGSKEnergyLvlTA" operation="LT" value="6"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKtmp" operation="multiply" value="@fGSKDmgPercSubTA">
        <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="GT" value="0.0"/>
        <requirement name="CVarCompare" cvar="fGSKDmgPercSubTH" operation="LTE" value="1.0"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="add" value="@.fGSKtmp"/>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="set" value="@fGSKBattMaxChargeCurrent">
        <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBattMaxChargeCurrent"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKDmgPercTA" operation="set" value="0">
        <requirement name="CVarCompare" cvar="fGSKDmgPercTA" operation="LT" value="0"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKDmgPercTA" operation="add" value="randomFloat(0.005,0.015)"/>
      <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKDmgPercTA" operation="set" value="1.00">
        <requirement name="CVarCompare" cvar="fGSKDmgPercTA" operation="GT" value="1.00"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfBuffStack" action="AddBuff" buff="buffGSKCalcLightsPercRound"/>
    </effect_group>
  </append>
  <append xpath="/buffs">
    <buff name="buffNVBattChargerPost" description_key="dkbuffNVBattChargerPost" tooltip_key="tkbuffNVBattChargerPost" icon="ui_game_symbol_electric_power" name_key="nkbuffNVBattChargerPost" icon_color="0,255,0">
      <damage_type value="electrical"/>
      <stack_type value="ignore"/>
      <duration value="0.05" help="min real delay to block buff seems 0.5s?"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="solarpanel_off"/>
        <triggered_effect trigger="onSelfBuffRemove" action="FadeOutSound" sound="solarpanel_off"/>
        <triggered_effect trigger="onSelfLeaveGame" action="StopSound" sound="solarpanel_off"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="add" value="10"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKBatteryCharges" operation="set" value="@fGSKBattMaxChargeCurrent">
          <requirement name="CVarCompare" cvar="iGSKBatteryCharges" operation="GT" value="@fGSKBattMaxChargeCurrent"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffFinish" action="AddBuff" buff="buffGSKCalcLightsPercRound"/>
      </effect_group>
    </buff>
  </append>
  <!-- HELPGOOD: patch for RealRad -->
  <removeattribute xpath="/buffs/buff[@name='buffRadiation01']/@tooltip_key"/>
  <append xpath="/buffs/buff[@name='buffRadiation01']">
    <effect_group>
      <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="20"/>
      <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message_key="buffRadiation01Tooltip"/>
    </effect_group>
  </append>
  <set xpath="/buffs/buff[@name='buffRadiation01']/effect_group/triggered_effect[       @trigger='onSelfBuffUpdate'  and       @action='ModifyCVar'         and       @cvar='$buffStatusRadiation' and       @operation='subtract'        and       @value='randomfloat(.015,.05)'     ]/@value">randomfloat(.0015,.0050)</set>
  <remove xpath="/buffs/buff[@name='buffRadiation01']/effect_group[@name='ScreenRadiation']/triggered_effect[@trigger='onSelfBuffUpdate' and @action='ModifyScreenEffect' and @effect_name='Radiation' and @intensity='0.025']"/>
  <remove xpath="/buffs/buff[@name='buffRadiation01']/effect_group[@name='ScreenRadiation']/triggered_effect[@trigger='onSelfBuffUpdate' and @action='ModifyScreenEffect' and @effect_name='Radiation' and @intensity='0.055']"/>
  <remove xpath="/buffs/buff[@name='buffRadiation01']/effect_group/triggered_effect[@trigger='onSelfBuffStart' and @action='ModifyScreenEffect' and @effect_name='Radiation']"/>
  <!-- HELPGOOD: patch for RealRad vs this mod, these make the other hazards impossible to deal with, they work best using RealRad alone. -->
  <remove xpath="/buffs/buff[@name='buffRadiation01']/effect_group/passive_effect[@name='FoodMaxBlockage' and @operation='base_add' and @value='@$buffStatusRadiation']"/>
  <remove xpath="/buffs/buff[@name='buffRadiation01']/effect_group/passive_effect[@name='WaterMaxBlockage' and @operation='base_add' and @value='@$buffStatusRadiation']"/>
  <append xpath="/buffs/buff[@name='buffRadiation01']/effect_group[@name='Radiation']/triggered_effect[@trigger='onSelfBuffUpdate' and @action='PlaySound' and @sound='player#vomit']">
    <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="20"/>
  </append>
  <remove xpath="/buffs/buff[@name='buffRadiation03']/effect_group/triggered_effect[@trigger='onSelfBuffStart' and @action='ModifyScreenEffect' and @effect_name='Radiation']"/>
  <append xpath="/buffs">
    <buff name="buffGSKHazardousWRadiation18" icon_blink="true" icon="ui_game_symbol_radiation" icon_color="200,200,128" description_key="buffGSKHazardousWRadiationDesc" name_key="RadiationHazard">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardousWRadiation18"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardousWRadiation18"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathRadiationLvl" operation="set" value="0">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathRadiationLvl" operation="set" value="1">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathRadiationLvl" operation="set" value="2">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="50"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathRadiationLvl" operation="set" value="3">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="70"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathRadiationLvl" operation="set" value="4">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="85"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathRadiationLvl" operation="set" value="5">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="92"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardousWRadiation18">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="20"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardousWBloodLoss31" icon_blink="true" icon="7dtdGskBloodLoss" description_key="buffGSKHazardousWBloodLossDesc">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardousWBloodLoss31"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardousWBloodLoss31"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="LTE" value="0.14"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathBloodLossLvl" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="GT" value="0.14"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathBloodLossLvl" operation="set" value="1"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="GT" value="0.21"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathBloodLossLvl" operation="set" value="2"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="GT" value="0.28"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathBloodLossLvl" operation="set" value="3"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="GT" value="0.35"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathBloodLossLvl" operation="set" value="4"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="GTE" value="0.40"/>
        <!-- HELPGOOD: 40% is lethal -->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathBloodLossLvl" operation="set" value="5"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBloodLoss" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardousWBloodLoss31">
          <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="LTE" value="0.14"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardWDryness18" icon="7dtdGskHazardDesert2" description_key="buffGSKHazardWDrynessDesc" name_key="DryAirHazard">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardWDryness18"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardWDryness18"/>
        <!-- HELPGOOD: cfg -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKHazDesWtrLim" operation="set" value="0.75"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKHazDesWetLim" operation="set" value="0.10"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKHazDesert" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKHazDesert" operation="set" value="1">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="0"/>
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="LT" value="@fGSKHazDesWetLim"/>
          <requirement name="StatComparePercCurrentToMax" stat="Water" operation="LTE" value="@fGSKHazDesWtrLim"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathDryHotTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="bGSKHazDesert" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathDryHotTime" operation="subtract" value="7">
          <requirement name="CVarCompare" cvar="bGSKHazDesert" operation="Equals" value="0"/>
          <requirement name="CVarCompare" cvar="fGSKFireHeatingMult" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathDryHotTime" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKNearDeathDryHotTime" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathDryHotLvl" operation="set" value="@iGSKNearDeathDryHotTime"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathDryHotLvl" operation="divide" value="60"/>
      </effect_group>
      <effect_group>
        <requirement name="!InBiome" biome="5"/>
        <!-- HELPGOOD: desert -->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathDryHotLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathDryHotTime" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardWDryness18"/>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardWWetFreezingAndHunger5" name_key="FreezingHazard" icon="7dtdGskHazardSnow" description_key="buffGSKHazardWWetFreezingAndHungerDesc">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardWWetFreezingAndHunger5"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardWWetFreezingAndHunger5"/>
        <!-- HELPGOOD: cfg -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKHazSnoFodLim" operation="set" value="0.75"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKHazSnoWetLim" operation="set" value="0.10"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKHWWetFod" operation="set" value="0"/>
        <!-- HELPGOOD: <requirements compare_type="or"> doestn work here? -->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKHWWetFod" operation="set" value="1">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKHWWetFod" operation="set" value="1">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GT" value="@fGSKHazSnoWetLim"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKHWWetFod" operation="set" value="1">
          <requirement name="StatComparePercCurrentToMax" stat="Food" operation="LTE" value="@fGSKHazSnoFodLim"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="bGSKHWWetFod" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingTime" operation="subtract" value="7">
          <requirement name="CVarCompare" cvar="bGSKHWWetFod" operation="Equals" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKHWWetFod" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKFZHeatingTmSub" operation="set" value="@fGSKFireHeatingMult"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKFZHeatingTmSub" operation="multiply" value="3"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingTime" operation="subtract" value="@.fGSKFZHeatingTmSub"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingTime" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKNearDeathFreezingTime" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingLvl" operation="set" value="@iGSKNearDeathFreezingTime"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingLvl" operation="divide" value="60"/>
      </effect_group>
      <effect_group>
        <requirement name="!InBiome" biome="1"/>
        <!-- HELPGOOD: snow -->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFreezingTime" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardWWetFreezingAndHunger5"/>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardousWMiasmaDirtyB23" icon="7dtdGskMiasma" icon_blink="true" hidden="false" remove_on_death="true" description_key="buffGSKHazardousWMiasmaDirtyBDesc" name_key="HazardousMiasma">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardousWMiasmaDirtyB23"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardousWMiasmaDirtyB23"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LTE" value="3200" help="after 3600 danger, needs to drop below 3200 for safety"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardousWMiasmaDirtyB23"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathMiasmaLvl" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LTE" value="3600"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathMiasmaLvl" operation="set" value="1">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="3600"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathMiasmaLvl" operation="set" value="2">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="4300"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathMiasmaLvl" operation="set" value="3">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="5000"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathMiasmaLvl" operation="set" value="4">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="5700"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathMiasmaLvl" operation="set" value="5">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="6400"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="addBuff" buff="buffDysenteryCatchDrink">
          <requirement name="!HasBuff" buff="buffDysenteryMain"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="@iGSKNearDeathMiasmaLvl"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardousWElementColdHook18" icon="7dtdGskHazardSnow" icon_blink="true" hidden="false" remove_on_death="true" name_key="HypothermyHazard" description_key="buffGSKHazardousWElementColdHookDESC">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardousWElementColdHook18"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardousWElementColdHook18"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardousWElementColdHook18">
          <requirement name="CVarCompare" cvar="iGSKNDHWTime" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LTE" value="-30"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="-30"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="LTE" value="-20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="-20"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-10"/>
        </triggered_effect>
      </effect_group>
      <effect_group help="frostbyte is rare but may happen suddenly with a big value">
        <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="GT" value="99"/>
        <!--        HELPGOOD: by temperature-->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.10)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.15)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.20)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.30)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-30"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.40)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-40"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.50)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-50"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.60)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-60"/>
        </triggered_effect>
        <!--        HELPGOOD: extra by wetness-->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,0.50)">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GTE" value="0.10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="add" value="randomFloat(0,1.0)">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="1"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="0.333">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="-30"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="0.333">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="-20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="0.333">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="-10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="2">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="3">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="4">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="30"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKHWHeatingTmSub" operation="set" value="@fGSKFireHeatingMult"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKHWHeatingTmSub" operation="multiply" value="10"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="@.fGSKHWHeatingTmSub"/>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardousWElementHotHook18" icon="7dtdGskHazardDesert" icon_blink="true" hidden="false" remove_on_death="true" name_key="OverheatHazard" description_key="buffGSKHazardousWElementHotHookDESC">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardousWElementHotHook18"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardousWElementHotHook18"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardousWElementHotHook18">
          <requirement name="CVarCompare" cvar="iGSKNDHWTime" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="10"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GTE" value="20"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="30"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="add" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GTE" value="30"/>
        </triggered_effect>
      </effect_group>
      <effect_group help="sweating adds dirty">
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomInt(10,30)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomInt(10,30)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomInt(10,30)">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="30"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKFireHeatingMult" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="4">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-30"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="3">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="2">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="-10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="0.333">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="0.333">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="0.333">
          <requirement name="CVarCompare" cvar="_coretemp" operation="LT" value="30"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardousWeather36" icon="7dtdGskHazardWeather" icon_blink="true" hidden="false" remove_on_death="true" description_key="buffGSKHazardousWeatherDesc" name_key="HazardousWeatherAndEnvironment">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:START:buffGSKHazardousWeather"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKHazardousWeather"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKNDHWTime" operation="set" value="1">
          <requirement name="CVarCompare" cvar="iGSKNDHWTime" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNDHWTime" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathHazadousWeatherLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKHazardousWeather36"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathHazadousWeatherLvl" operation="set" value="@iGSKNDHWTime"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathHazadousWeatherLvl" operation="divide" value="60"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="set" value="300">
          <requirement name="CVarCompare" cvar="iGSKNDHWTime" operation="GT" value="300"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKNearDeath18" hidden="false" remove_on_death="true" icon="ui_game_symbol_near_death_trauma" icon_color="255,128,128" icon_blink="true" description_key="buffGSKNearDeathDesc" name_key="NearDeathLevels">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathBloodLossLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathBloodLossLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathMiasmaLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathMiasmaLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathFreezingLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathFreezingLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathDryHotLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathDryHotLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathRadiationLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathRadiationLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathPoisonLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathPoisonLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathHazadousWeatherLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathHazadousWeatherLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="@iGSKNearDeathFrostbyteLvl">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="@iGSKNearDeathFrostbyteLvl"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKNearDeath18">
          <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="1"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fHWBlockageStam" operation="set" value="100"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fHWBlockageStam" operation="add" value="@$PlayerLevelBonus"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="GTE" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="2"/>
        <passive_effect name="RunSpeed" operation="perc_subtract" value="0.20"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="0.20"/>
        <passive_effect name="CrouchSpeed" operation="perc_subtract" value="0.20"/>
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="0.15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fHWBlockageStam" operation="multiply" value="0.15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="0.1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0.2" fade="5.0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="GTE" value="2"/>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="3"/>
        <passive_effect name="RunSpeed" operation="perc_subtract" value="0.40"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="0.40"/>
        <passive_effect name="CrouchSpeed" operation="perc_subtract" value="0.40"/>
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="0.30"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fHWBlockageStam" operation="multiply" value="0.30"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="0.15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0.4" fade="5.0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="GTE" value="3"/>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="4"/>
        <passive_effect name="RunSpeed" operation="perc_subtract" value="0.60"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="0.60"/>
        <passive_effect name="CrouchSpeed" operation="perc_subtract" value="0.60"/>
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="0.45"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fHWBlockageStam" operation="multiply" value="0.45"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="0.2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0.6" fade="5.0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="GTE" value="4"/>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="LT" value="5"/>
        <passive_effect name="RunSpeed" operation="perc_subtract" value="0.80"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="0.80"/>
        <passive_effect name="CrouchSpeed" operation="perc_subtract" value="0.80"/>
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="0.60"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fHWBlockageStam" operation="multiply" value="0.60"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="0.25"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0.8" fade="5.0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKNearDeath" operation="GTE" value="5"/>
        <passive_effect name="RunSpeed" operation="perc_subtract" value="0.90"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="0.90"/>
        <passive_effect name="CrouchSpeed" operation="perc_subtract" value="0.90"/>
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="0.75"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fHWBlockageStam" operation="multiply" value="0.75"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="0.33"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="1.0" fade="5.0"/>
      </effect_group>
      <effect_group>
        <passive_effect name="StaminaMaxBlockage" operation="base_add" value="@fHWBlockageStam"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" effect_name="VibrantDeSat" intensity="0" fade="10"/>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs/buff[@name='buffElementFreezing' or @name='buffElementCold']/effect_group">
    <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKHazardousWElementColdHook18">
      <requirement name="!HasBuff" buff="buffGSKHazardousWElementColdHook18"/>
    </triggered_effect>
  </append>
  <append xpath="/buffs/buff[@name='buffElementSweltering' or @name='buffElementHot' ]/effect_group">
    <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKHazardousWElementHotHook18">
      <requirement name="!HasBuff" buff="buffGSKHazardousWElementHotHook18"/>
    </triggered_effect>
  </append>
  <append xpath="/buffs/buff[@name='buffInjuryConcussion']">
    <effect_group>
      <triggered_effect trigger="onSelfBuffStart" action="addBuff" buff="buffGSKStrongDmgHeadHL"/>
    </effect_group>
  </append>
  <append xpath="/buffs/buff[@name='buffArmSprainedCHTrigger']">
    <effect_group>
      <triggered_effect trigger="onSelfBuffStart" action="addBuff" buff="buffGSKStrongDmgArmWL"/>
    </effect_group>
  </append>
  <append xpath="/buffs">
    <buff name="buffGSKStrongDmgHeadHL" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyHL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercHL" operation="add" value="randomFloat(0.00,1.00)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercHL" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercHL" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKStrongDmgArmWL" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="bGSKEnergyWL" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercWL" operation="add" value="randomFloat(0.00,0.33)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKDmgPercWL" operation="set" value="1.00">
          <requirement name="CVarCompare" cvar="fGSKDmgPercWL" operation="GT" value="1.00"/>
        </triggered_effect>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs">
    <buff name="buffGSKDenyGoreHarvest" hidden="false" remove_on_death="false" description_key="buffGSKDenyGoreHarvestDesc" name_key="GoreHarvest">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="LogMessage" message="GSK:STARTED:buffGSKDenyGoreHarvest"/>
        <triggered_effect trigger="onSelfBuffRemove" action="LogMessage" message="GSK:REMOVED:buffGSKDenyGoreHarvest"/>
        <passive_effect name="HarvestCount" operation="perc_subtract" level="0,1000" value="0.99" tags="butcherHarvest"/>
      </effect_group>
    </buff>
    <buff name="buffGSKGoreHazard" hidden="false" icon="7dtdGskMiasma" icon_color="250,200,0" icon_blink="true" description_key="buffGSKGoreHazardDesc">
      <stack_type value="replace"/>
      <update_rate value="3"/>
      <duration value="5"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKDenyGoreHarvest"/>
        <triggered_effect trigger="onSelfBuffRemove" action="AddBuff" buff="buffGSKDenyGoreHarvest"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(25,55)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="add" value="randomfloat(0.1,0.3)"/>
      </effect_group>
    </buff>
    <buff name="buffGSKRadExplosionA" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffStatusRadiation" operation="add" value="randomFloat(2.5,15)"/>
      </effect_group>
    </buff>
    <buff name="buffGSKRadExplosionB" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffStatusRadiation" operation="add" value="randomFloat(15,30)"/>
      </effect_group>
    </buff>
    <buff name="buffGSKFlushMiasma" description_key="buffGSKFlushMiasmaDesc" name_key="FlushMiasmaAndDirt">
      <stack_type value="ignore"/>
      <duration value="3600"/>
      <update_rate value="1200"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <!-- HELPGOOD: if the player is just standing, the buff is just removed -->
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKFlushMiasma"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="subtract" value="1800"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffStatusRadiation" operation="subtract" value="randomfloat(10,20)"/>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message_key="TooltipbuffGSKFlushMiasma"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTakeBath">
      <stack_type value="ignore"/>
      <duration value="2"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKTakeBath"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="subtract" value="180"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffStatusRadiation" operation="subtract" value="randomfloat(1,2)"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTakeCatBath">
      <stack_type value="ignore"/>
      <duration value="2"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKTakeCatBath"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="subtract" value="60"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffStatusRadiation" operation="subtract" value="randomfloat(0.33,0.66)"/>
      </effect_group>
    </buff>
    <buff name="buffGSKPlantSpikes" icon="ui_game_symbol_critical" icon_color="255,0,0" icon_blink="true">
      <damage_type value="bloodloss"/>
      <damage_source value="Internal"/>
      <stack_type value="ignore"/>
      <duration value="1"/>
      <requirements>
        <requirement name="EntityTagCompare" tags="player"/>
      </requirements>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Health" operation="subtract" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffInjuryBleedingTwo">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="2"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKRadLowerSlow1" icon="7dtdLowerRadiation" icon_color="128,128,180" description_key="buffGSKRadRemoverDesc">
      <stack_type value="effect"/>
      <display_value value="fGSKRadRmDur"/>
      <display_value_key value="{0:0}s"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKRadRmDur" operation="set" value="300"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKRadRmDur" operation="add" value="300"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="subtract" value="0.10" help="6 per min is 30 in 300s"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="set" value="0">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKRadLowerSlow1">
          <requirement name="CVarCompare" cvar="fGSKRadRmDur" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadRmDur" operation="subtract" value="1"/>
      </effect_group>
    </buff>
    <buff name="buffGSKRadRemover11" icon="7dtdLowerRadiation" description_key="buffGSKRadRemoverDesc">
      <stack_type value="effect"/>
      <display_value value="fGSKRadRmVal"/>
      <display_value_key value="-{0:0}%"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <effect_group>
        <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GTE" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="subtract" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadRmVal" operation="subtract" value="1"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="subtract" value="0.05"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadRmVal" operation="subtract" value="0.05" help="each 1% extra rad rm will last 20s if player has no rads"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="set" value="0">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKRadRemover11">
          <requirement name="CVarCompare" cvar="fGSKRadRmVal" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKPsyResistWork6" icon="7dtdPsyShield" name_key="PsyonicsResistance" description_key="PsyonicsResistanceDesc" remove_on_death="false">
      <stack_type value="effect"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <display_value value="fGSKPsyResistDur"/>
      <display_value_key value="{0:0}s"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".fGSKPResAdd" operation="set" value="30"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKPsyResistDur" operation="set" value="@.fGSKPResAdd"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKPsyResistDur" operation="add" value="@.fGSKPResAdd"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKPsyResistDur" operation="set" value="120">
          <requirement name="CVarCompare" cvar="fGSKPsyResistDur" operation="GT" value="120"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKPsyResistDur" operation="subtract" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKPsyResistWork6">
          <requirement name="CVarCompare" cvar="fGSKPsyResistDur" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKRadResist">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKRadResChemDiv" operation="set" value="0.50">
          <requirement name="CVarCompare" cvar="fGSKRadResistDur" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKRadResistDur" operation="add" value="150"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKRadResChemDiv" operation="add" value="0.01">
          <requirement name="CVarCompare" cvar="fGSKRadResistDur" operation="GT" value="600"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKRadResChemDiv" operation="set" value="0.90">
          <requirement name="CVarCompare" cvar="fGSKRadResChemDiv" operation="GT" value="0.90"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKRadResistDur" operation="set" value="600">
          <requirement name="CVarCompare" cvar="fGSKRadResistDur" operation="GT" value="600"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="addBuff" buff="buffGSKRadResistWork12"/>
      </effect_group>
    </buff>
    <buff name="buffGSKRadResistWork12" icon="7dtdRadShield" name_key="RadiationResistance" description_key="RadiationResistanceDesc" remove_on_death="false">
      <stack_type value="ignore"/>
      <display_value value="fGSKRadResistDur"/>
      <display_value_key value="{0:0}s"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKHazmatSuitIntegrity" operation="set" value="1.0" help="lazy easy init as minimum is 0.01">
          <requirement name="CVarCompare" cvar="fGSKHazmatSuitIntegrity" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="add" value="0.1">
          <requirement name="HasBuff" buff="buffRadSuitMask"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="add" value="0.1">
          <requirement name="HasBuff" buff="buffRadSuitGloves"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="add" value="0.1">
          <requirement name="HasBuff" buff="buffRadSuitChest"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="add" value="0.1">
          <requirement name="HasBuff" buff="buffRadSuitLegs"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="add" value="0.1">
          <requirement name="HasBuff" buff="buffRadSuitBoots"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="multiply" value="@fGSKHazmatSuitIntegrity">
          <requirement name="CVarCompare" cvar="fGSKHazmatSuitIntegrity" operation="LT" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="add" value="0.5" help="hazmatsuit in perfect condition provides 100perc protection">
          <requirement name="HasBuff" buff="buffRadSuit"/>
          <requirement name="CVarCompare" cvar="fGSKHazmatSuitIntegrity" operation="Equals" value="1.0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="add" value="@fGSKRadResChemDiv"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="set" value="0.90" help="this happens having 4 or less hazmatsuit parts and using radres chem many times">
          <requirement name="!HasBuff" buff="buffRadSuit"/>
          <requirement name="CVarCompare" cvar="fGSKRadResPerc" operation="GT" value="0.90"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResPerc" operation="set" value="1.0">
          <requirement name="HasBuff" buff="buffRadSuit"/>
          <requirement name="CVarCompare" cvar="fGSKRadResPerc" operation="GT" value="1.0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKRadResPerc" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistAtVal" operation="set" value="@$buffStatusRadiation">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="@fGSKRadResistAtVal"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistAtVal" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKRadResistAtVal" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKRadResPerc" operation="GT" value="0"/>
        <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GT" value="@fGSKRadResistAtVal"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadMult" operation="set" value="1.0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadMult" operation="subtract" value="@fGSKRadResPerc"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistDiff" operation="set" value="@$buffStatusRadiation"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistDiff" operation="subtract" value="@fGSKRadResistAtVal"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistDiff" operation="multiply" value="@fGSKRadMult"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistAtVal" operation="add" value="@fGSKRadResistDiff"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="set" value="@fGSKRadResistAtVal"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistDur" operation="subtract" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResistDur" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKRadResistDur" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKRadResChemDiv" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKRadResistDur" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKRadResistWork12">
          <requirement name="CVarCompare" cvar="fGSKRadResPerc" operation="LTE" value="0"/>
          <requirement name="CVarCompare" cvar="fGSKRadResistDur" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKSnakePoison">
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKPoisonDur" operation="add" value="randomInt(200,900)"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKSnakePoisonWork33">
          <requirement name="!HasBuff" buff="buffGSKSnakePoisonWork33"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKSnakePoisonWork33" icon="7dtdPoison" icon_blink="true" name_key="buffGSKSnakePoisonName" description_key="buffGSKSnakePoisonDesc">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="3"/>
      <effect_group name="antidote cures poison">
        <requirement name="CVarCompare" cvar="iGSKPoisonAntidoteDur" operation="GT" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKPoisonDur" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonSub" operation="set" value="300">
          <requirement name="CVarCompare" cvar="iGSKPoisonAntidoteDur" operation="GTE" value="300"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonSub" operation="set" value="@iGSKPoisonAntidoteDur">
          <requirement name="CVarCompare" cvar="iGSKPoisonAntidoteDur" operation="LT" value="300"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonSub" operation="set" value="@iGSKPoisonDur">
          <requirement name="CVarCompare" cvar="iGSKPoisonSub" operation="GT" value="@iGSKPoisonDur"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonAntidoteDur" operation="subtract" value="@iGSKPoisonSub"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonDur" operation="subtract" value="@iGSKPoisonSub"/>
      </effect_group>
      <effect_group name="antidote stays longer if no poison">
        <requirement name="CVarCompare" cvar="iGSKPoisonAntidoteDur" operation="GT" value="0"/>
        <requirement name="CVarCompare" cvar="iGSKPoisonDur" operation="LTE" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonAntidoteDur" operation="subtract" value="3"/>
      </effect_group>
      <effect_group name="poison damage">
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonDur" operation="subtract" value="3"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKSnakePoisonWork33">
          <requirement name="CVarCompare" cvar="iGSKPoisonDur" operation="LTE" value="0"/>
          <requirement name="CVarCompare" cvar="iGSKPoisonAntidoteDur" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="subtract" value="1.0">
          <requirement name="CVarCompare" cvar="iGSKPoisonDur" operation="GTE" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKPoisonDur" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKPoisonDur" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathPoisonLvl" operation="set" value="@iGSKPoisonDur"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathPoisonLvl" operation="divide" value="300"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathPoisonLvl" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKNearDeathPoisonLvl" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group help="poison prevents radiated zombie regen power">
        <requirement name="EntityTagCompare" tags="radiated"/>
        <requirement name="!HasBuff" buff="buffRadiatedRegenBlock"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffRadiatedRegenBlock"/>
      </effect_group>
    </buff>
    <buff name="buffGSKRadiationAura">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="add" value="randomFloat(0.50,2.50)" target="selfAOE" range="8" target_tags="player">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="100" target="other"/>
          <requirement name="!IsBloodMoon"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="add" value="randomFloat(0.25,1.00)" target="selfAOE" range="15" target_tags="player">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="100" target="other"/>
          <requirement name="!IsBloodMoon"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffStatusRadiation" operation="add" value="randomFloat(0.10,0.50)" target="selfAOE" range="30" target_tags="player">
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="LT" value="100" target="other"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="add" value="25" target="selfAOE" range="12" target_tags="zombie">
          <requirement name="!HasBuff" buff="buffRadiatedRegenBlock" target="other" help="if other regen is blocked, wont be regenerated by this zombie"/>
          <requirement name="!HasBuff" buff="buffRadiatedRegenBlock" help="if self regen is blocked wont regen others."/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKMutantRabbits">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMutantBunnyMode" operation="set" value="randomint(1,2)"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKMutantBunnyMode" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKRadiationAura">
          <requirement name="!HasBuff" buff="buffGSKRadiationAura"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKMutantBunnyMode" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKRadiationAura">
          <requirement name="HasBuff" buff="buffGSKRadiationAura"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomFloat(100,250)" target="selfAOE" range="5" target_tags="player"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomFloat(75,150)" target="selfAOE" range="15" target_tags="player"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomFloat(50,100)" target="selfAOE" range="30" target_tags="player"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMutantRandomChaos" operation="add" value="0.45" target="selfAOE" range="5" target_tags="player"/>
        <!-- HELPGOOD: it is the sum for all distances on nearest -->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMutantRandomChaos" operation="add" value="0.25" target="selfAOE" range="15" target_tags="player"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMutantRandomChaos" operation="add" value="0.25" target="selfAOE" range="30" target_tags="player"/>
      </effect_group>
    </buff>
    <buff name="buffGSKMiasmaEffectWeak" icon_blink="true" icon="7dtdGskMiasma" icon_color="250,100,0" hidden="false">
      <stack_type value="ignore"/>
      <duration value="1"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.40" fade="1" effect_name="Infected"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="1" effect_name="Infected"/>
      </effect_group>
    </buff>
    <buff name="buffGSKMiasmaEffectA" icon="7dtdGskMiasma" icon_blink="true" icon_color="250,150,0" hidden="false">
      <stack_type value="ignore"/>
      <duration value="2"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.60" fade="2" effect_name="Infected"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="2" effect_name="Infected"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="player#vomit" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Water" operation="add" value="-1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Food" operation="add" value="-1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message_key="ToolTipMiasmaDmg"/>
      </effect_group>
    </buff>
    <buff name="buffGSKMiasmaEffectB" icon="7dtdGskMiasma" icon_blink="true" icon_color="250,150,0" hidden="false">
      <stack_type value="ignore"/>
      <duration value="4"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="0.80" fade="4" effect_name="Infected"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="4" effect_name="Infected"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="player#vomit" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Water" operation="add" value="-2"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Food" operation="add" value="-2"/>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message_key="ToolTipMiasmaDmg"/>
      </effect_group>
    </buff>
    <buff name="buffGSKMiasmaEffectC" icon="7dtdGskMiasma" icon_blink="true" icon_color="250,150,0" hidden="false">
      <stack_type value="ignore"/>
      <duration value="6"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" intensity="1.00" fade="6" effect_name="Infected"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" intensity="0" fade="6" effect_name="Infected"/>
        <triggered_effect trigger="onSelfBuffStart" action="PlaySound" sound="player#vomit" play_in_head="true"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Water" operation="add" value="-3"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Food" operation="add" value="-3"/>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message_key="ToolTipMiasmaDmg"/>
      </effect_group>
    </buff>
    <buff name="buffGSKAirDropHighlight">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AttachParticleEffectToEntity" particle="p_electric_shock" local_offset="0,0.1,0" parent_transform="LOD0" local_rotation="0,0,0" param1="SetShapeToMesh0"/>
      </effect_group>
    </buff>
    <buff name="buffGSKCalcHeating" hidden="true" help="this cvar shall be used as a multiplier">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireHeatingMult" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireHeatingMult" operation="set" value="2.5">
          <requirement name="HasBuff" buff="buffCampfireAOE"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireHeatingMult" operation="set" value="4.01">
          <requirement name="HasBuff" buff="buffBurningFlamingArrow"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireHeatingMult" operation="set" value="4.02">
          <requirement name="HasBuff" buff="buffBurningElement"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireHeatingMult" operation="set" value="4.03">
          <requirement name="HasBuff" buff="buffBurningEnvironment"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKFireHeatingMult" operation="set" value="6">
          <requirement name="HasBuff" buff="buffBurningMolotov"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKAllHazardsCheck18" hidden="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <!-- HELPGOOD: these buffs change the near death levels -->
      <effect_group help="hazard blood loss">
        <triggered_effect trigger="onSelfBuffUpdate" action="addBuff" buff="buffGSKHazardousWBloodLoss31">
          <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="GT" value="0.14"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBloodLoss" operation="subtract" value="0.0000002" help="it is like about 1.73 percent per day (0.0000002*3600*24), natural regeneration"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKBloodLoss" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKBloodLoss" operation="LT" value="0"/>
        </triggered_effect>
      </effect_group>
      <!-- HELPGOOD: miasma&dirty iGSKNearDeathMiasmaLvl tho is controlled by buffGSKHazardWeatherMiasmaDirty37 as it permanently happens everywhere -->
      <effect_group>
        <requirement name="InBiome" biome="1"/>
        <!-- HELPGOOD: snow -->
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKHazardWWetFreezingAndHunger5">
          <requirement name="NotHasBuff" buff="buffGSKHazardWWetFreezingAndHunger5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKCalcHeating"/>
      </effect_group>
      <effect_group help="you would need to overheat to cure frostbyte faster">
        <requirement name="CVarCompare" cvar="iGSKNearDeathFrostbyteLvl" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="subtract" value="0.0166" help="takes at least 60s to cure each level">
          <requirement name="CVarCompare" cvar="_coretemp" operation="GTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKHeatingLvlSubRandomChk" operation="set" value="@fGSKFireHeatingMult"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKHeatingLvlSubRandomChk" operation="multiply" value="10"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKHeatingLvlSub" operation="set" value="@fGSKFireHeatingMult"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKHeatingLvlSub" operation="multiply" value="0.05" help="near a campfire that is mult 2.5, will be lvl-=0.125, will result in 40s to cure all 5 levels, because of update_rate 1s if random success">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="@.fGSKHeatingLvlSubRandomChk"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="subtract" value="@.fGSKHeatingLvlSub"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="subtract" value="randomFloat(0,0.25)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="10"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="GT" value="3"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="subtract" value="randomFloat(0,0.25)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="20"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="GTE" value="10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="subtract" value="randomFloat(0,0.25)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="35"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="GTE" value="20"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="subtract" value="randomFloat(0,0.25)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="50"/>
          <requirement name="CVarCompare" cvar="_coretemp" operation="GTE" value="30"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKNearDeathFrostbyteLvl" operation="LT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKHazardWDryness18">
          <requirement name="NotHasBuff" buff="buffGSKHazardWDryness18"/>
          <requirement name="InBiome" biome="5"/>
          <!-- HELPGOOD: desert -->
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKHazardousWRadiation18">
          <requirement name="NotHasBuff" buff="buffGSKHazardousWRadiation18"/>
          <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GT" value="20"/>
        </triggered_effect>
      </effect_group>
      <!-- HELPGOOD: iGSKNearDeathPoisonLvl is controlled by buffGSKSnakePoisonWork33 -->
      <effect_group>
        <requirements compare_type="or">
          <requirement name="CVarCompare" cvar="iGSKNearDeathBloodLossLvl" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKNearDeathMiasmaLvl" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKNearDeathDryHotLvl" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKNearDeathFreezingLvl" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKNearDeathRadiationLvl" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKNearDeathPoisonLvl" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKNearDeathHazadousWeatherLvl" operation="GTE" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKNearDeathFrostbyteLvl" operation="GTE" value="1"/>
        </requirements>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKNearDeath18"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTeleportFlee" help="ISSUE: fails, nothing happens.">
      <stack_type value="ignore"/>
      <duration value="3"/>
      <update_rate value="0.25"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleportFlee"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKTeleportFlee"/>
      </effect_group>
    </buff>
    <buff name="buffGSKEnterGameTeleport">
      <stack_type value="ignore"/>
      <duration value="1.0"/>
      <update_rate value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKOnEnterGameCount" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKOnEnterGameCount"/>
      </effect_group>
      <effect_group help="TODO: detect difficulty?">
        <requirement name="CVarCompare" cvar="iGSKOnEnterGameCount" operation="Equals" value="1" help="first spawn new game"/>
        <!-- HELPGOOD:_AUTOGENCODE_CREATESPAWNPOINTS_TeleportCfgs_BEGIN BELOW:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createSpawnPoints.sh ===== -->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKTeleportedToSpawnPointIndex" operation="set" value="randomInt(1,20)"/>
        <!-- HELPGOOD:_AUTOGENCODE_CREATESPAWNPOINTS_TeleportCfgs_END ABOVE:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createSpawnPoints.sh ===== -->
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKTeleportToNormalZone"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKEnterGameTeleport"/>
      </effect_group>
    </buff>
    <buff name="buffGSKTeleportToNormalZone" help="normal difficulty spawn points">
      <stack_type value="ignore"/>
      <duration value="1.0"/>
      <update_rate value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKTeleportedToSpawnPointIndex"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKTeleportedToSky" operation="set" value="1"/>
      </effect_group>
      <!-- HELPGOOD:_AUTOGENCODE_CREATESPAWNPOINTS_BEGIN BELOW:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createSpawnPoints.sh ===== -->
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport001"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="2"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport002"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="3"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport003"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="4"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport004"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="5"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport005"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="6"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport006"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="7"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport007"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="8"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport008"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="9"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport009"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="10"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport010"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="11"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport011"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="12"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport012"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="13"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport013"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="14"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport014"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport015"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="16"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport016"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="17"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport017"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="18"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport018"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="19"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport019"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="Equals" value="20"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleport020"/>
      </effect_group>
      <!-- HELPGOOD:_AUTOGENCODE_CREATESPAWNPOINTS_END ABOVE:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createSpawnPoints.sh ===== -->
    </buff>
    <buff name="buffGSKRespawnTeleportToSky">
      <stack_type value="replace"/>
      <duration value="10"/>
      <update_rate value="1"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKOnRespawnCount" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="CVarLogValue" cvar="iGSKOnRespawnCount"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKParachuteRequested" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKParachuteToFirstSpawnpoint" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message="Parachute: JUMP in less than 10s to activate it (CROUCH-JUMP to 1st SpawnPoint)."/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar=".bGSKParachuteRequested" operation="set" value="1"/>
        <triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar=".bGSKParachuteToFirstSpawnpoint" operation="set" value="1">
          <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".bGSKParachuteRequested" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar=".bGSKParachuteToFirstSpawnpoint" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKTeleportedToSky" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="LogMessage" message="GSK:call:eventGSKTeleportToSky"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKTeleportToSky"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKRespawnTeleportToSky"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".bGSKParachuteRequested" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar=".bGSKParachuteToFirstSpawnpoint" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKTeleportedToSpawnPointIndex" operation="GTE" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="LogMessage" message="GSK:call:eventGSKTeleport(SpawnPoint)"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKTeleportToNormalZone"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKRespawnTeleportToSky"/>
      </effect_group>
    </buff>
    <buff name="buffGSKHazardWeatherMiasmaDirty37" description_key="buffGSKHazardWeatherMiasmaDirty5Desc" name_key="MiasmaAndDirtyEtc" help="this is also always running, so is used like a generic place for many things">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="1"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(0.0,0.1)">
          <requirement name="InBiome" biome="1"/>
          <!-- HELPGOOD: snow -->
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(0.0,0.2)">
          <requirement name="InBiome" biome="5"/>
          <!-- HELPGOOD: desert -->
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(0.0,0.35)">
          <requirement name="InBiome" biome="8"/>
          <!-- HELPGOOD: wasteland -->
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(0.0,0.3)">
          <requirement name="InBiome" biome="9"/>
          <!-- HELPGOOD: burntforest (TODO: make it work like in desert about hazards)-->
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(1.5,3.5)">
          <requirement name="InBiome" biome="3"/>
          <!-- HELPGOOD: pineforest (as desert and snow have each 2 hazards, it is much higher here) -->
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(3.0,6.0)">
          <requirement name="InBiome" biome="13"/>
          <!-- HELPGOOD: cavefloor -->
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="add" value="randomfloat(5,10)">
          <requirement name="InBiome" biome="14"/>
          <!-- HELPGOOD: caveceiling fetid gases accumulating there -->
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirements compare_type="or">
          <requirement name="CVarCompare" cvar="fGSKShownWetnessPerc" operation="GT" value="0"/>
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="1"/>
        </requirements>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message_key="TooltipBuffGSKHazardWeatherMiasmaDirty4Bath">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="10"/>
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKCleanTheDirty" operation="set" value="360"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKCleanTheDirty" operation="multiply" value="@fGSKShownWetnessPerc">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKCleanTheDirty" operation="divide" value="30">
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="subtract" value="@fGSKCleanTheDirty"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBathMsgCooldownTime" operation="set" value="120">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LTE" value="0"/>
          <requirement name="CVarCompare" cvar="_underwater" operation="Equals" value="1"/>
          <requirement name="CVarCompare" cvar="iGSKBathMsgCooldownTime" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message_key="TooltipBuffGSKHazardWeatherMiasmaDirty4Cleaned">
          <requirement name="CVarCompare" cvar="iGSKBathMsgCooldownTime" operation="Equals" value="120"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKBathMsgCooldownTime" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="iGSKBathMsgCooldownTime" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <!-- HELPGOOD: TODO: bash script this code to generate stages easily -->
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LT" value="3300"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectA" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GTE" value="3300"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKMiasmaEffectA">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectA" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectA" operation="set" value="100">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectA" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectA" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectA" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LT" value="3580"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectB" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GTE" value="3580"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKMiasmaEffectB">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectB" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectB" operation="set" value="75">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectB" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectB" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectB" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LT" value="4800"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectC" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GTE" value="4800"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKMiasmaEffectC">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectC" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectC" operation="set" value="60">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectC" operation="Equals" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMiasmaEffectC" operation="subtract" value="1">
          <requirement name="CVarCompare" cvar="iGSKMiasmaEffectC" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LTE" value="3600"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKMiasmaDirtyTooMuch" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="3600"/>
        <!-- HELPGOOD: like 1 baths a day -->
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="bGSKMiasmaDirtyTooMuch" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKHazardousWMiasmaDirtyB23">
          <requirement name="NotHasBuff" buff="buffGSKHazardousWMiasmaDirtyB23"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="set" value="7200">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="GT" value="7200"/>
        </triggered_effect>
      </effect_group>
      <effect_group name="onSelfDied events">
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathBloodLossLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="fGSKBloodLoss" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathDryHotLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathDryHotTime" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathFrostbyteLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathFreezingLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathFreezingTime" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathMiasmaLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathPoisonLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKPoisonDur" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathRadiationLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="$buffStatusRadiation" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeathHazadousWeatherLvl" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNDHWTime" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKNearDeath" operation="set" value="0"/>
        <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar="iGSKDeathCount" operation="add" value="1"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKMutantRandomChaos">
          <requirement name="NotHasBuff" buff="buffGSKMutantRandomChaos"/>
          <requirement name="CVarCompare" cvar="fGSKMutantRandomChaos" operation="GT" value="0"/>
          <requirement name="RandomRoll" seed_type="Random" min_max="0.0,1.0" operation="LT" value="@fGSKMutantRandomChaos"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMutantRandomChaos" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKHazardousWeather36">
          <requirement name="CVarCompare" cvar="iGSKNDHWTime" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKNDHWTime" operation="set" value="0">
          <requirement name="CVarCompare" cvar="iGSKNDHWTime" operation="LT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="fGSKMiasmaDirty" operation="set" value="0">
          <requirement name="CVarCompare" cvar="fGSKMiasmaDirty" operation="LT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKRespawnNoFallDmg" icon="ui_game_symbol_candy_oh_shitz" icon_color="128,255,255" hidden="false" remove_on_death="true" description_key="dkbuffGSKRespawnNoFallDmg" name_key="ParachuteSQN" help="this buff only makes sense if using this cygwin/linux script (or something else equivalent in windows): playerRespawnParachuteDaemon.sh">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="0.25"/>
      <display_value value=".bGSKFallProtTm"/>
      <display_value_key value="+{0:0.00}s"/>
      <!-- HELPGOOD: I was unable to work with _fallSpeed here as it keeps the last value after the player hits the ground. the problem is that it never (?) being 0 becomes impossible to use that as a reference variable to detect when the player stopped falling -->
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKTeleported" operation="set" value="0"/>
        <triggered_effect trigger="onSelfTeleported" action="ModifyCVar" cvar=".bGSKTeleported" operation="set" value="1"/>
        <triggered_effect trigger="onSelfTeleported" action="LogMessage" message="GSK:buffGSKRespawnNoFallDmg:TELEPORTED!"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKFallProtTmMin" operation="set" value="10" help="this is related to the external script playerRespawnParachuteDaemon.sh that waits 5s by default, increasing there will need increasing here too"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKFallProtTmMax" operation="set" value="120"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="add" value="0.25" help="same value of update_rate"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKHadFallImpact" operation="set" value="0"/>
      </effect_group>
      <effect_group help="fly speed">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="LT" value="@.bGSKFallProtTmMax"/>
        <requirement name="CVarCompare" cvar=".bGSKHadFallImpact" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar=".bGSKTeleported" operation="Equals" value="1" help="to the sky"/>
        <passive_effect name="WalkSpeed" operation="perc_add" value="5.0"/>
        <passive_effect name="RunSpeed" operation="perc_add" value="15.0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <requirement name="CVarCompare" cvar=".bGSKTeleported" operation="Equals" value="1" help="to the sky"/>
        <requirement name="NotHasBuff" buff="buffDrugOhShitzDrops"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugOhShitzDropsDuration" operation="set" value="120" help="increase this time if you have a slow machine, I think it may help"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDrugOhShitzDrops"/>
      </effect_group>
      <effect_group help="KEEP AFTER TIMEOUT CHECK TO HAPPEN ON NEXT LOOP. must have been teleported to the sky">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <requirement name="CVarCompare" cvar=".bGSKTeleported" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="LogMessage" message="GSK:buffGSKRespawnNoFallDmg:.bGSKTeleported=0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="set" value="@.bGSKFallProtTmMax"/>
      </effect_group>
      <effect_group help="KEEP AFTER TIMEOUT CHECK TO HAPPEN ON NEXT LOOP. after a short time, if player hits the ground. this happens if player jumps too">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <triggered_effect trigger="onSelfFallImpact" action="LogMessage" message="GSK:buffGSKRespawnNoFallDmg:onSelfFallImpact"/>
        <triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar=".bGSKHadFallImpact" operation="set" value="1"/>
        <triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="set" value="@.bGSKFallProtTmMax"/>
      </effect_group>
      <effect_group help="finalize thru timeout">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GTE" value="@.bGSKFallProtTmMax"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="LogMessage" message="GSK:buffGSKRespawnNoFallDmg:RmBuffs"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar=".bGSKFallProtTm"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugOhShitzDrops"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKRespawnNoFallDmg"/>
      </effect_group>
    </buff>
    <buff name="buffGSKParachuteSQN" icon="ui_game_symbol_candy_oh_shitz" icon_color="128,255,255" hidden="false" remove_on_death="true" description_key="dkbuffGSKRespawnNoFallDmg" name_key="ParachuteSQN" help="this buff uses gameevents to teleport">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="0.25"/>
      <display_value value=".bGSKFallProtTm"/>
      <display_value_key value="+{0:0.00}s"/>
      <!-- HELPGOOD: I was unable to work with _fallSpeed here as it keeps the last value after the player hits the ground. the problem is that it never (?) being 0 becomes impossible to use that as a reference variable to detect when the player stopped falling -->
      <effect_group>
        <triggered_effect trigger="onSelfTeleported" action="LogMessage" message="GSK:buffGSKParachuteSQN:onSelfTeleported detected"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKFallProtTmMin" operation="set" value="10" help="this is related to the external script playerRespawnParachuteDaemon.sh that waits 5s by default, increasing there will need increasing here too"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKFallProtTmMax" operation="set" value="120"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKFallProtUpdateRate" operation="set" value="0.25" help="same value of update_rate"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="add" value="@.bGSKFallProtUpdateRate"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKHadFallImpact" operation="set" value="0"/>
      </effect_group>
      <effect_group help="fly speed">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="LT" value="@.bGSKFallProtTmMax"/>
        <requirement name="CVarCompare" cvar=".bGSKHadFallImpact" operation="Equals" value="0"/>
        <requirement name="CVarCompare" cvar=".bGSKTeleportedToSky" operation="GTE" value="1" help="to the sky"/>
        <passive_effect name="WalkSpeed" operation="perc_add" value="5.0"/>
        <passive_effect name="RunSpeed" operation="perc_add" value="15.0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ShowToolbeltMessage" message="ParachuteSQN: run to fall elsewhere, or just wait."/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKPseudoSlowFallTimeout" operation="subtract" value="@.bGSKFallProtUpdateRate"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CallGameEvent" event="eventGSKPseudoSlowFall">
          <requirement name="CVarCompare" cvar=".fGSKPseudoSlowFallTimeout" operation="LTE" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKPseudoSlowFallTimeout" operation="set" value="5">
          <requirement name="CVarCompare" cvar=".fGSKPseudoSlowFallTimeout" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <requirement name="CVarCompare" cvar=".bGSKTeleportedToSky" operation="GTE" value="1" help="to the sky"/>
        <requirement name="NotHasBuff" buff="buffDrugOhShitzDrops"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugOhShitzDropsDuration" operation="set" value="120" help="increase this time if you have a slow machine, I think it may help"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDrugOhShitzDrops"/>
      </effect_group>
      <effect_group help="finalize thru timeout. this must be b4 the finalizations below to keep the fall dmg protection one more loop AFTER the fall impact happens to prevent death">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GTE" value="@.bGSKFallProtTmMax"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="LogMessage" message="GSK:buffGSKParachuteSQN:RmBuffs"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar=".bGSKFallProtTm"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugOhShitzDrops"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKParachuteSQN"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKTeleportedToSky" operation="set" value="0" help="make it ready for next time"/>
      </effect_group>
      <effect_group help="KEEP AFTER TIMEOUT CHECK TO HAPPEN ON NEXT LOOP. must have been teleported to the sky">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <requirement name="CVarCompare" cvar=".bGSKTeleportedToSky" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="LogMessage" message="GSK:buffGSKParachuteSQN:.bGSKTeleportedToSky=0:Did not teleport to the sky."/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="set" value="@.bGSKFallProtTmMax"/>
      </effect_group>
      <effect_group help="KEEP AFTER TIMEOUT CHECK TO HAPPEN ON NEXT LOOP. after a short time, if player hits the ground. this happens if player jumps too">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <triggered_effect trigger="onSelfFallImpact" action="LogMessage" message="GSK:buffGSKParachuteSQN:onSelfFallImpact:fall on ground"/>
        <triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar=".bGSKHadFallImpact" operation="set" value="1"/>
        <triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="set" value="@.bGSKFallProtTmMax"/>
      </effect_group>
      <effect_group help="KEEP AFTER TIMEOUT CHECK TO HAPPEN ON NEXT LOOP.">
        <requirement name="CVarCompare" cvar=".bGSKFallProtTm" operation="GT" value="@.bGSKFallProtTmMin"/>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="LogMessage" message="GSK:buffGSKParachuteSQN:_crouching:therefore is on ground already"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".bGSKFallProtTm" operation="set" value="@.bGSKFallProtTmMax"/>
      </effect_group>
    </buff>
    <buff name="buffGSKRespawnNoMadBundlesAllowCrafting" hidden="true" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelper" operation="set" value="1"/>
        <!-- HELPGOOD:_AUTOGENCODE_CREATEBUNDLES_CRAFTBUNDLES_BEGIN BELOW:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createBundles.sh ===== -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperForgeCraftingSchematics" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperExploring" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperExploringSchematics" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperCombatWeapons" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperCombatWeaponsSchematics" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperCombatArmor" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperTeslaEnergy" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperTeslaEnergySchematics" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperHealing" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperHealingSchematics" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperFarming" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperFarmingSchematics" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperBasicCampingKit" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperMinimalSurvivalKit" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="bGSKRespawnItemsBundleHelperSomeSchematics" operation="set" value="1"/>
        <!-- HELPGOOD:_AUTOGENCODE_CREATEBUNDLES_CRAFTBUNDLES_END ABOVE:===== DO NOT MODIFY, USE THE AUTO-GEN SCRIPT: createBundles.sh ===== -->
      </effect_group>
    </buff>
    <buff name="buffGSKMutantRandomChaos" icon="7dtdMutantRabbit.x128" icon_blink="true" description_key="buffGSKMutantRandomChaosDesc" remove_on_death="true">
      <stack_type value="ignore"/>
      <duration value="15"/>
      <!-- HELPGOOD: this big time is also like a cooldown protection mode as another cant happen -->
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$iGSKMutantRandomChaosChoice" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$iGSKMutantRandomChaosChoice" operation="set" value="randomint(1,5)">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LTE" value="33"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$bGSKMutantRandomChaosDone" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="$iGSKMutantRandomChaosChoice" operation="Equals" value="1"/>
        <requirement name="CVarCompare" cvar="$bGSKMutantRandomChaosDone" operation="Equals" value="0"/>
        <requirement name="NotHasBuff" buff="buffNearDeathRegen"/>
        <requirement name="!HasBuff" buff="buffGSKPsyResistWork6"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$bGSKMutantRandomChaosDone" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffBurningElement"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffBurningElementDuration" operation="set" value="3"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="$iGSKMutantRandomChaosChoice" operation="Equals" value="2"/>
        <requirement name="CVarCompare" cvar="$bGSKMutantRandomChaosDone" operation="Equals" value="0"/>
        <requirement name="NotHasBuff" buff="buffNearDeathRegen"/>
        <requirement name="!HasBuff" buff="buffGSKPsyResistWork6"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$bGSKMutantRandomChaosDone" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".buffShockedDurationStart" operation="add" value="3.0"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffShocked"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="$iGSKMutantRandomChaosChoice" operation="Equals" value="3"/>
        <requirement name="CVarCompare" cvar="$bGSKMutantRandomChaosDone" operation="Equals" value="0"/>
        <requirement name="NotHasBuff" buff="buffNearDeathRegen"/>
        <requirement name="!HasBuff" buff="buffGSKPsyResistWork6"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$bGSKMutantRandomChaosDone" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKPoisonDur" operation="add" value="randomInt(15,75)"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffGSKSnakePoisonWork33"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="$iGSKMutantRandomChaosChoice" operation="Equals" value="4"/>
        <requirement name="CVarCompare" cvar="$bGSKMutantRandomChaosDone" operation="Equals" value="0"/>
        <requirement name="NotHasBuff" buff="buffNearDeathRegen"/>
        <requirement name="!HasBuff" buff="buffGSKPsyResistWork6"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$bGSKMutantRandomChaosDone" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffInjuryBleedingTwo"/>
      </effect_group>
      <effect_group help="Keep this on as last as has 100% chance to happen">
        <requirement name="CVarCompare" cvar="$bGSKMutantRandomChaosDone" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$bGSKMutantRandomChaosDone" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffInjuryStunned03"/>
      </effect_group>
    </buff>
  </append>
  <set xpath="/buffs/buff[@name='buffLegBroken']/effect_group/passive_effect[@name='Mobility' and @operation='base_add']/@value">-0.75</set>
  <append xpath="/buffs/buff[@name='buffStatusCheck01']/effect_group">
    <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffRadiation01">
      <requirement name="!HasBuff" buff="god"/>
      <requirement name="NotHasBuff" buff="buffRadSuit"/>
      <requirement name="CVarCompare" cvar="$buffStatusRadiation" operation="GT" value="0"/>
    </triggered_effect>
  </append>
  <append xpath="/buffs">
    <buff name="buffGSKDancingZombies">
      <stack_type value="ignore"/>
      <duration value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="SetDancing" enabled="true"/>
        <triggered_effect trigger="onSelfBuffRemove" action="SetDancing" enabled="false"/>
      </effect_group>
    </buff>
  </append>
  <!-- HELPGOOD:TODO: animal spiders just freeze cuz they dont have ragdoll right? so remove this code if they change -->
  <append xpath="//triggered_effect[@action='Ragdoll']">
    <requirement name="!EntityTagCompare" tags="animalSpider01"/>
    <requirement name="!EntityTagCompare" tags="animalSpider02"/>
    <requirement name="!EntityTagCompare" tags="animalSpider03"/>
  </append>
</GhussakTweaks>
