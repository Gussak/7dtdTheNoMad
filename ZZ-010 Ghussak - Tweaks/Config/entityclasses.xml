<GhussakTweaks>
<!-- HELPGOOD: tech tips
  BUFFS: instead of (that may not work)
      <property name="Buffs" value="buffSomeBuff,buffSomeOtherBuff" /> 
    use (that seems to always work)
      <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffSomeBuff" />
      <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffSomeOtherBuff" />
  ISSUE:target_tags: ex.: target_tags="zombie,animal,bandit" may not work well on triggers like onSelfAttackedOther all the time (it may cause errors on log), better just use ex.:
    <requirement name="EntityTagCompare" target="other" tags="zombie,animal,bandit"/>
-->

<!--
player height while crouched?
makes no difference -0.75 -0.25 w/e :( :( :( :( :( :( :( :( :( :( :( :( :( :( :( :( :( :( :( :( 
<set xpath="/entity_classes/entity_class[@name='playerMale' or @name='playerFemale']/property[@name='CrouchYOffsetFP']/@value">-0.25</set>
<append xpath="/entity_classes/entity_class[@name='playerMale']">
  <property name="SizeScale" value="0.5" />
  <property name="SizeScale" value="0.75" />
</append>
-->

<!--
  <append xpath="/entity_classes/entity_class[@name='playerMale']/property[@name='Buffs']/@value">,buffPlayerEnhancesNearbyFriendlyNPCs</append>
-->
  
  <!--  HELP: these buffs for entergame/respawn cannot add other buffs (only onStart but can onUpdate right?)-->
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[(@trigger='onSelfEnteredGame' or @trigger='onSelfRespawn') and @action='AddBuff' and @target='self']/@buff">,buffPlayerEnhancesNearbyFriendlyNPCs2,buffLeaderLimitsHiredNPCsAmount106,buffDrinkRainWater78,buffGSKRespawnPreventWaterBkp12,buffGSKShowWaterBkp22,buffGSKBkpWaterVal73,buffGSKHazardWeatherMiasmaDirty59,buffGSKDenyGoreHarvest,buffGSKProperSwimming45,buffGSKAllHazardsCheck40,buffGSKRadResistWork34,buffGSKRadRemover33,buffGSKHeatColdProtClothDmgKeep32,buffGSKChemUseSideEffects31,buffGSKBloodmoonZombiesPowerChk29,buffGSKElctrnOverchargeDmg74,buffGSKPermanentGenericCheck21,buffGSKInPineForestBiomeMonstersThrive15,buffGSKCosmicRayStrikeChk14,buffGSKMeleeParry12,buffGSKFallOverLandingHit12,buffGSKRespawnDeusExFriendlyIfPossible</append>  
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[@trigger='onSelfEnteredGame' and @action='AddBuff' and @target='self']/@buff">,buffGSKGodModeFirstSpawn,buffNightVisionReset</append> <!-- HELPGOOD: everytime player joins the game. the 1st random teleport to ground MUST be after the enter game detection -->
<!--
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[@trigger='onSelfEnteredGame' and @action='AddBuff' and @target='self']/@buff">,buffGSKDetectEnterGame,buffGSKConfigGeneric,buffGSKFirstEnterGameTeleportToRandomSpawnOnGround</append>
-->
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[@trigger='onSelfRespawn' and @action='AddBuff' and @target='self']/@buff">,buffGSKRespawnNoMadBundlesAllowCrafting,buffGSKGodModeRespawn</append> <!-- HELPGOOD: only after death/resurrect. buffGSKDetectRespawn must be b4 buffGSKRespawnNoMadBundlesAllowCrafting -->
<!--
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[@trigger='onSelfRespawn' and @action='AddBuff' and @target='self']/@buff">,buffGSKRespawn</append>  
-->
  <append xpath="/entity_classes/entity_class[@name='playerMale']">
		
    <effect_group>
			<requirement name="CVarCompare" cvar="iGSKPlayerNPCFollowingCountCurrent" operation="GTE" value="1"/>
			<requirement name="CVarCompare" cvar=".iGSKSneakWithPlayerAllowed" operation="Equals" value="1"/>
			<triggered_effect trigger="onSelfCrouch" action="AddBuff" buff="buffGSKNPCsStartSneak3"/>
			<triggered_effect trigger="onSelfStand" action="AddBuff" buff="buffGSKNPCsStopSneak3"/>
		</effect_group>
		
    <effect_group>
      <triggered_effect trigger="onSelfKilledOther" action="ModifyCVar" cvar="iGSKDeusExKillCount" operation="add" value="1" help="this would be in case player find another way to kill than teleport disintegration">
        <requirement name="EntityTagCompare" target="other" tags="DeusEx"/>
      </triggered_effect>
    </effect_group>
    
<!--
    <effect_group>
      <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" buff="buffGSKDeusExDenyHarvest">
        <requirement name="EntityTagCompare" target="other" tags="DeusEx"/>
      </triggered_effect>
      <passive_effect name="HarvestCount" operation="perc_subtract" level="0,1000" value="0.99" tags="salvageHarvest"/>
    </effect_group>
-->
    
    <effect_group>
<!--
      <triggered_effect trigger="onSelfAttackedOther" action="LogMessage" message="GSK:DBG:TMP:EntClass:.iGSKPlayerVampireStrikeCount"/>
-->
<!--
        <requirement name="StatCompareCurrent" stat="Health" operation="GT" value="0" target="other"  help="was just IsAlive other. cuz shall not allow easy heal from fresh corpse"/>
-->
      
<!--
      <triggered_effect trigger="onSelfAttackedOther" action="LogMessage" message="GSK:DBG:TMP:EntClass:buffGSKPlayerFallLandingHit"/>
-->
<!-- HELPGOOD:
      <triggered_effect trigger="onSelfLandJump" action="AddBuff" buff="buffGSKPlayerFallLandingHit" help="this is never triggered here?"/>
-->
      
<!--
      <triggered_effect trigger="onSelfAttackedOther" action="LogMessage" message="GSK:DBG:TMP:EntClass:buffGSKPlayerAtkDisablNPCSneakAddToCount"/>
-->
<!--
      <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" buff="buffGSKPlayerAtkDisablNPCSneakAddToCount">
        <requirement name="EntityTagCompare" target="other" tags="zombie,animal,bandit"/>
        <requirement name="IsAlive" target="other"/>
      </triggered_effect>
-->
      <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" cvar=".iGSKPlayerAttackedDisableNPCSneak" operation="add" value="1" help="use the same possible requirements from buffGSKNPCproperSneaking10, just remember this runs on the player and not on the NPC">
        <requirement name="IsAlive" target="other"/>
        <requirement name="EntityTagCompare" target="other" tags="zombie,animal,bandit"/>
        <requirement name="IsNight"/>
        <requirement name="CVarCompare" cvar="_sheltered" operation="Equals" value="0" help="like NotIsIndoors !IsIndoors ?"/>
<!--
        <requirement name="StatCompareCurrent" stat="Health" operation="GT" value="0" target="other" help="was just IsAlive other"/>
-->
        <requirement name="!IsIndoors"/>
        <requirement name="!IsBloodMoon"/>
        <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1" />
        <requirement name="EntityTagCompare" tags="player"/>
      </triggered_effect>

<!--
      <triggered_effect trigger="onSelfAttackedOther" action="LogMessage" message="GSK:DBG:TMP:EntClass:end"/>
-->
<!--
      <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" buff="buffGSKMarkedForJumpKick" target="selfAOE" range="2.5" target_tags="zombie,animal,bandit">
        <requirement name="CVarCompare" cvar="iGSKMeleeParryChance" operation="GT" value="0" help="used as indicator to holding melee weapon"/>
      </triggered_effect>
-->
<!--
      <triggered_effect trigger="onSelfCrouch" action="AddBuff" buff="buffGSKNPCsStartSneak3">
        <requirement name="CVarCompare" cvar="iGSKNPCSneakBehaveLikePlayer" operation="Equals" value="11"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfStand" action="AddBuff" buff="buffGSKNPCsStopSneak3">
        <requirement name="CVarCompare" cvar="iGSKNPCSneakBehaveLikePlayer" operation="Equals" value="11"/>
      </triggered_effect>
-->
<!-- HELPGOOD: this is an alternative to buffGSKCheckJumpKick
      <triggered_effect trigger="onSelfJump" action="Ragdoll" duration="6" force="250" target="selfAOE" range="2.5" target_tags="zombie,animal,bandit" help="TODO: this trigger works here? see buffGSKCheckJumpKick too">
        <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LT" value="75"/>
        <requirement name="HasBuff" target="other" buff="buffGSKMarkedForJumpKick" />
        <requirement name="!EntityTagCompare" target="other" tags="animalSpider01" />
        <requirement name="!EntityTagCompare" target="other" tags="animalSpider02" />
        <requirement name="!EntityTagCompare" target="other" tags="animalSpider03" />
      </triggered_effect>
-->
<!-- HELPGOOD: review?
      <triggered_effect trigger="onSelfAttackedOther" action="ModifyCVar" cvar="iGSKNPCfollowingDenySneakTimer" operation="add" value="5" help="needs to tell NPC to completely stop attacking. TODO: this should be on the NPC, but... may be not using this is better to not depend so much on the AI. So only the player attacks/action counts">
        <requirement name="IsNight"/>
        <requirement name="!IsIndoors"/>
        <requirement name="!IsBloodMoon"/>
        <requirement name="IsAlive" target="other"/>
        <requirement name="EntityTagCompare" tags="npc"/>
      </triggered_effect>
-->
    </effect_group>
  </append>
  
<!--
  player restores water level after death
-->
<!--
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[@trigger='onSelfEnteredGame' and @action='AddBuff' and @target='self']/@buff">,buffGSKBkpWaterVal70</append>  
-->
  
<!--
  <set xpath="/entity_classes/entity_class[@name='animalBoar']/property[@name='IsEnemyEntity']/@value">true</set>
-->
  <set xpath="/entity_classes/entity_class[@name='animalBoar']/property[@name='Faction']/@value">aggressiveanimalsmedium</set>
  <append xpath="/entity_classes/entity_class[@name='animalBoar']">
    <!--    copied from wolf and tweaked a bit-->
    <property name="AITask-1" value="BreakBlock" />
    <property name="AITask-2" value="Territorial" />
    <property name="AITask-3" value="RunawayWhenHurt" data="runChance=0.5;healthPer=0.3;healthPerMax=0.6" />
    <property name="AITask-4" value="ApproachAndAttackTarget" data="class=EntityPlayer,15,EntityZombie,20,EntityNPC,15"/>
    <property name="AITask-5" value="ApproachSpot" />
    <property name="AITask-6" value="Look" />
    <property name="AITask-7" value="Wander" />
    <property name="AITask-8" value="" />
    <property name="AITarget-1" value="SetAsTargetIfHurt" />
    <property name="AITarget-2" value="BlockingTargetTask" />
    <property name="AITarget-3" value="SetNearestEntityAsTarget" data="class=EntityPlayer,14,8,EntityZombie,0,0,EntityNPC,14,8"/>
    <property name="AITarget-4" value="" />
      
    <effect_group name="Attack Buff">
      <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffNPCModThreat" />
      <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" target="self" buff="buffNPCModAttacking" />
    </effect_group>
    
<!--
	<property name="IsEnemyEntity" value="false" /><!- - override hostile template setting so he can spawn in safe zones - ->
<entity_class name="animalBear" extends="animalTemplateHostile">
  	<property name="EntityType" value="Zombie" />
	<property name="Parent" value="Enemies" />
	<property name="Faction" value="undead" />
-->
  </append>
  
<!--
  HELP: faster mainly hostile animals
  aggro requires 2 values right?
  panic requires 1 value only right?
-->
  <append xpath="/entity_classes/entity_class[@name='animalBear']">
    <property name="MoveSpeedAggro" value="1.45, 1.50"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalBoar']">
    <property name="MoveSpeedAggro" value="1.35, 1.40"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalBossGrace']">
    <property name="MoveSpeedAggro" value="1.45, 1.50"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalDireWolf']">
    <property name="MoveSpeedAggro" value="1.55, 1.60"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalDoe']">
    <property name="MoveSpeedPanic" value="1.80"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalMountainLion']">
    <property name="MoveSpeedAggro" value="3.1, 3.3"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalStag']">
    <property name="MoveSpeedPanic" value="1.85"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalWolf']">
    <property name="MoveSpeedAggro" value="1.50, 1.55"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalZombieBear']">
    <property name="MoveSpeedAggro" value="1.50, 1.55"/></append>
  <append xpath="/entity_classes/entity_class[@name='animalZombieDog']">
    <property name="MoveSpeedAggro" value="1.55, 1.60"/></append>
<!--
  <set    xpath="/entity_classes/entity_class[@name='animalBoar']/property[@name='MoveSpeedAggro']/@value">1.40</set>
  <append xpath="/entity_classes/entity_class[@name='animalBear']"><property name="MoveSpeedAggro" value="1.50"/></append>
  <set    xpath="/entity_classes/entity_class[@name='animalBossGrace']/property[@name='MoveSpeedAggro']/@value">1.50</set>
  <append xpath="/entity_classes/entity_class[@name='animalWolf']"><property name="MoveSpeedAggro" value="1.55"/></append>
  <set    xpath="/entity_classes/entity_class[@name='animalZombieDog']/property[@name='MoveSpeedAggro']/@value">1.60</set>
  <set    xpath="/entity_classes/entity_class[@name='animalDireWolf']/property[@name='MoveSpeedAggro']/@value">1.60</set>
  <append xpath="/entity_classes/entity_class[@name='animalDoe']"><property name="MoveSpeedPanic" value="1.80"/></append>
  <set    xpath="/entity_classes/entity_class[@name='animalStag']/property[@name='MoveSpeedPanic']/@value">1.85</set>
-->
  <append xpath="/entity_classes/entity_class[
      @name='animalBear' or
      @name='animalBoar' or
      @name='animalBossGrace' or
      @name='animalDireWolf' or
      @name='animalMountainLion' or
      @name='animalWolf' or
      @name='animalZombieBear' or
      @name='animalZombieDog' 
    ]">
    
<!--
	<property name="AIFeralSense" value="1.6" />
	<property name="AITask-1" value="BreakBlock" />
	<property name="AITask-2" value="Territorial" />
	<property name="AITask-3" value="ApproachAndAttackTarget" data="class=EntityPlayer,20,EntityNPC,20" />
	<property name="AITask-4" value="ApproachSpot" />
	<property name="AITask-5" value="Look" />
	<property name="AITask-6" value="Wander" />
	<property name="AITask-7" value="" />
	<property name="AITarget-1" value="SetAsTargetIfHurt" data="class=EntityNPC,EntityPlayer" />
	<property name="AITarget-2" value="BlockingTargetTask" />
	<property name="AITarget-3" value="SetNearestCorpseAsTarget" data="class=EntityPlayer" />
	<property name="AITarget-4" value="SetNearestEntityAsTarget" data="class=EntityPlayer,22,20,EntityNPC,0,0" />
	<property name="AITarget-5" value="" />
-->
      
    <property name="AITarget-1" value="SetAsTargetIfHurt" data="class=EntityAlive,0,EntityNPC,0,EntityPlayer,0,EntitySurvivor,0,EntityBandit,0"/>
<!--
    <property name="AITarget-2" value="BlockIf" data="condition=alert e 0" help="ISSUE: this causes many errors on log?"/>
-->
    <property name="AITarget-2" value="BlockingTargetTask" help="is like parrying? or is about breaking blocks? or is about blocking other entities movement?"/>
<!--
    <property name="AITarget-3" value="SetNearestCorpseAsTarget" data="class=EntityPlayer" />
-->
<!--
    <property name="AITarget-3" value="SetNearestCorpseAsTarget" data="class=EntityAlive,EntityPlayer,EntityAnimalStag,EntityNPC,EntityAnimalRabbit,EntitySurvivor,EntityBandit" help="this is to keep them busy and easy targets. TODO:CHK: do they destroy the corpse? if so will be a good challenge vs trying to harvest it.. EntityAlive means it is alive or is the alive (not zombie) kind?"/>
-->
    <property name="AITarget-3" value="SetNearestCorpseAsTarget" data="class=EntityPlayer" help="ISSUE: only works with player? trying others will error a lot on the log. TODO: class=EntityAlive,EntityPlayer,EntityAnimalStag,EntityNPC,EntityAnimalRabbit,EntitySurvivor,EntityBandit this is to keep them busy and easy targets. TODO:CHK: do they destroy the corpse? if so will be a good challenge vs trying to harvest it.. EntityAlive means it is alive or is the alive (not zombie) kind?"/>
    <property name="AITarget-4" value="SetNearestEntityAsTarget" data="class=EntityPlayer,22,20,EntityAnimalStag,0,0,EntityNPC,18,13,EntityAnimalRabbit,8,5" help="TODOA: what these 2 numbers after class name mean?" />
    <property name="AITarget-5" value="" />
  </append>
<!--
  <append xpath="/entities/entity_class[@name='animalTemplateHostile']">
    <property name="AITarget-5" value="SetNearestCorpseAsTarget"/>
    <!- -
      data="class=EntityPlayer,20,15,EntityZombie,15,10,EntityNPC,15,10"
    - ->
  </append>
-->
  
<!-- ===================================================================
Lower NPCs HP (and hire cost where necessary) of ranged NPCs to prevent them tanking all enemies...
1/10 (least the mech that is 25%)
Deps: 0-XNPCCore
-->
<!--
  <set xpath="/entity_classes/entity_class[@name='npcMeleeTemplate']/effect_group[@name='Base Effects']/passive_effect[@name='HealthMax' and @operation='base_set']/@value">30</set>
-->
<!--
  <set xpath="/entity_classes/entity_class[@name='npcMeleeTemplate']/property[@name='HireCost']/@value">100</set>
-->
  
<!--
  <set xpath="/entity_classes/entity_class[@name='npcMechMeleeTemplate']/effect_group[@name='Base Effects']/passive_effect[@name='HealthMax' and @operation='base_set']/@value">100</set>
-->
  
<!--
  <set xpath="/entity_classes/entity_class[@name='npcAnimalRangedTemplate']/effect_group[@name='Base Effects']/passive_effect[@name='HealthMax' and @operation='base_set']/@value">40</set>
-->
<!--
  <set xpath="/entity_classes/entity_class[@name='npcMechMeleeTemplate']/property[@name='HireCost']/@value">5</set>
-->
  
<!--
  all friendlies must be weak to not tank all enemies...
  TODO: it should be 10% of vanilla but how to do that in a modlet? how to calc using the modlet? is it possible? The alternative would be xmlstarlet.
  An average from 300 to 1000 could be 75.
  PROBLEM: 75 is becoming 187??? and 30 becomes 75????? will use less then :(
-->
<!--
  <set xpath="/entity_classes/entity_class[
      starts-with(@name, 'npc') or
      starts-with(@name, 'survivor')
    ]/effect_group[@name='Base Effects']/passive_effect[@name='HealthMax' and @operation='perc_set']/@value">0.10</set>
-->
<!--
  <set xpath="/entity_classes/entity_class[
      starts-with(@name, 'npc') or
      starts-with(@name, 'survivor')
    ]/effect_group[@name='Base Effects']/passive_effect[@name='HealthMax' and @operation='base_set']/@value">15</set>
-->
<!--
  in case it is missing
  was hp 25, but they keep dieing too fast with x12 zombies
-->
  <append xpath="/entity_classes/entity_class[
      (starts-with(@name, 'npc') and not(starts-with(@name,'npcHarley'))) or
      starts-with(@name, 'survivor')
    ]/effect_group[@name='Base Effects']">
    <passive_effect name="HealthMax" operation="base_set" value="75" />  
  </append>


  <append xpath="/entity_classes">
    <entity_class name="npcCosplayerAShotgun" extends="npcAdvancedAShotgunTemplate"><!--Element appended by: "0-XNPCCore"--> 
      <property name="LookAtAngle" value="0" /> 
      <property name="SizeScale" value="1.1" />
      <property name="Tags" value="entity,female,npc,ranged,cp,DRMid,UMA2" />
      <property name="Faction" value="whiteriver" />
      <property name="Names" value="Thalia,Amedee,Myriani,Dilya,Ilyrana,Saria,Aerith,Rina,Lyeecia,Maggwyn,Viessa,Tisha,Naexi,Lithoniel,Shaerra,Alyndra" />
      <property name="DanceType" value="2" />
      <property name="Mesh" value="#@modfolder(1-SurvivorzPack):Resources/Survivorz.unity3d?FemaleElvenArcherDark" />
      <property name="SoundHurt" value="Player_Female/player2painlg" />
      <property name="SoundHurtSmall" value="Player_Female/player2painsm" />
      <property name="SoundDeath" value="Player_Female/player2death" />
      <property name="SoundStamina" value="Player_Female/player2stamina" />
      <property name="SoundDrownPain" value="Player_Female/player2drownpain" />
      <property name="SoundWaterSurface" value="Player_Female/player2drownsurface" />
      <property name="SoundDrownDeath" value="Player_Female/player2drowndeath" />
      <property name="SoundJump" value="Player_Male/player2Jump" />
      <property name="SoundLandSoft" value="Player_Male/player2LandSoft" />
      <property name="SoundLandHard" value="Player_Male/player2LandHard" />
      <property name="SoundPlayerLandThump" value="PlayerLandThump" />
      <property name="SoundRandom" value="GurlzChatterRandom" />
      <property name="SoundRandomTime" value="600"/>
      <property name="SoundAlert" value="Player_Female/player2stamina" />
      <property name="SoundAttack" value="Player_Female/player2stamina" />
      <property name="SoundSense" value="Player_Female/player2stamina" />	
			<property name="LootDropProb" value="0.33"/> 
      <property name="LootDropEntityClass" value="EntityLootContainerRegularWithShotgun"/>
      <property name="HireCost" value="337"/> <!-- OldHC=3500 PDR=10 -->
      <effect_group name="Base Effects">
        <passive_effect name="PhysicalDamageResist" operation="base_set" value="10" />
        <passive_effect name="HealthMax" operation="base_set" value="75"><!--Element appended by: "The NoMad, unforgiving lands."--></passive_effect>
      </effect_group>                       
    </entity_class> 		
  </append>

<!-- ===================================================================
NPCs and others always drop loot bag
Deps: 0-XNPCCore and related mods
-->
  <remove xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider')]/property[@name='LootDropProb']"/>
  <remove xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider')]/property[@name='LootDropEntityClass']"/>
<!--
  <remove xpath="/entity_classes/entity_class[starts-with(@name,'npcAnimal')]/property[@name='LootDropEntityClass']"/>
-->
  <append xpath="/entity_classes/entity_class[contains(@name, 'zombie')]" help="this prevents a huge lot of drop bags, to compensate, upped the item count on loot.xml, the idea is to loot less often and each be more rewarding">
    <property name="LootDropProb" value="0.05"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npc')]" help="was 0.33. but a friendly npc shall not drop stuff so easily, only by luck. This is also good for a hired NPC following you or patrolling or waiting.">
    <property name="LootDropProb" value="0.05"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npc')]" help="this goes for all melee and becomes also default to the ones not specifically set. only pockets.">
    <property name="LootListAlive" value="traderNPCtinyBackpack" />
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npcAnimal')]" help="animals carry nothing beyond what we place in their backpack">
    <property name="LootDropProb" value="0.00" help="I tested with 200 npc fox hirable and had no problem (nothing dropped)."/>
    <property name="LootListAlive" value="traderNPCanimal" />
  </append>
  <append xpath="/entity_classes/entity_class[
			starts-with(@name, 'npcSoldier') or
			starts-with(@name, 'npcOfficer') or
			starts-with(@name, 'npcVaultSecurity')
		]">
    <property name="LootListAlive" value="traderNPCsmallBackpack" />
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npcRecon')]">
    <property name="LootListAlive" value="traderNPCmediumBackpack" />
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npcArmyPowerArmor')]" help="only the full original power armor can carry the most">
    <property name="LootListAlive" value="traderNPCbigBackpack" />
  </append>
  
  <append xpath="/entity_classes/entity_class[starts-with(@name, 'npc')]/property[@name='Tags' and not(contains(@value,'bandit'))]/@value" help="TODO: could the hirecost property be read instead to add this tag?">,hireable</append>
  
  <!--
    this fails (as is set on a template for survivor): <set xpath="/entity_classes/entity_class[contains(@name, 'survivor')]/property[contains(@name, 'LootDropProb')]/@value">1</set>
    so let's grant it with append
  -->
  <append xpath="/entity_classes/entity_class[contains(@name, 'survivor')]" help="no easy loot from friendlies">
    <property name="LootDropProb" value="0.05"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name,'animal')]" help="animals are to harvest only">
    <property name="LootDropProb" value="0.0"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'animal')]">
    <property name="TimeStayAfterDeath" value="3600" />
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'animalZombie')]" help="their flesh is contamined by zombie virus and will last longer">
    <property name="TimeStayAfterDeath" value="7200" />
  </append>

  <append xpath="/entity_classes">
<!--
    <entity_class name="entContainerGSKGuardedTreasure" extends="sc_General" help="TODO: why Backpack is not workign?">
      <property name="LootListAlive" value="buriedTreasure" />
    </entity_class>
-->
    <entity_class name="entContainerGSKGuardedTreasure" extends="DroppedLootContainer">
      <property name="LootListAlive" value="buriedTreasure" />
      <property name="LootListOnDeath" value="buriedTreasure" />
      <property name="TimeStayAfterDeath" value="72000" />
      <property name="Model" value="#Entities/LootContainers?tier3LootChestPrefab.prefab" />
    </entity_class>
<!--
    <entity_class name="DroppedLootContainer">
      <property name="HideInSpawnMenu" value="true" />
      <property name="Mesh" value="@:Entities/LootContainers/backpack_droppedPrefab.prefab" />
      <property name="ModelType" value="Custom" />
      <property name="Prefab" value="Backpack" />
      <property name="Class" value="EntityLootContainer" />
      <property name="Parent" value="Backpack" />
      <property name="TimeStayAfterDeath" value="72000" />
      <property name="IsEnemyEntity" value="false" />
      <property name="LootListAlive" value="buriedTreasure" />
      <property name="LootListOnDeath" value="buriedTreasure" />
      <property name="Faction" value="None" />
    </entity_class>
-->
  </append>

<!--HELPGOOD: change loot bags colors for visibility based on relevance lower to high: blue,red,yellow-->
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLootContainerRegular')]/property[contains(@name, 'Mesh')]/@value">#Entities/LootContainers?zpackBluePrefab.prefab</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLootContainerStrong')]/property[contains(@name, 'Mesh')]/@value">#Entities/LootContainers?zpackRedPrefab.prefab</set>
  <!--HELPGOOD    yellow one, also used for NPCs and raiders that have good drops -->
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLootContainerBoss')]/property[contains(@name, 'Mesh')]/@value">#Entities/LootContainers?zpackPrefab.prefab</set>
  
<!--
  <append xpath="/entity_classes/entity_class[@name='EntityLootContainerBandit']">
    <property name="TintColor" value="0000FF"/>
  </append>
-->

<!-- =================================================================
enemy NPCs drop weapons or parts
Deps: 0-XNPCCore and related mods
-->
  <append xpath="/entity_classes">
    
    <entity_class name="EntityLootContainerRegularWithLBow" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithLBow"/>
    </entity_class>
    
    <entity_class name="EntityLootContainerRegularWithXBow" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithXBow"/>
    </entity_class>
    
    <entity_class name="EntityLootContainerRegularWithRifle" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithRifle"/>
    </entity_class>
    
    <entity_class name="EntityLootContainerRegularWithPistol" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithPistol"/>
    </entity_class>
    
    <entity_class name="EntityLootContainerRegularWithShotgun" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithShotgun"/>
    </entity_class>
    
    <entity_class name="EntityLootContainerRegularWithAK47" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithAK47"/>
    </entity_class>
    
    <entity_class name="EntityLootContainerRegularWithRocket" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithRocket"/>
    </entity_class>
    
    <entity_class name="EntityLootContainerDeusEx" extends="EntityLootContainerRegular">
<!--
    <entity_class name="EntityLootContainerDeusEx">
-->
			<property name="NavObject" value="navDeusExLoot" help="TODO: how to make this work? wont work with EntityLootContainerRegular, nor with backpack :(" />
      <property name="Tags" value="DeusExDroppedLoot" />
<!--
      <property name="Mesh" value="@:Entities/LootContainers/weapon_bags_largePrefab.prefab"/>
      <property name="Mesh" value="@:Entities/LootContainers/tier5LootChestPrefab.prefab" />
-->
      <property name="Mesh" value="@:Entities/LootContainers/tier4LootChestPrefab.prefab" help="looks nice"/>
      <property name="LootListOnDeath" value="lootDeusExMachina"/>
      
			<property name="ModelType" value="Custom" />
			<property name="Prefab" value="Backpack" />
<!--
	<property name="Class" value="EntityLootContainer" />
-->
<!--
			<property name="Class" value="EntityBackpack" />
			<property name="Parent" value="Backpack" />
			<property name="TimeStayAfterDeath" value="72000"/>
			<property name="IsEnemyEntity" value="false" />
			<property name="Faction" value="none" />
-->
    </entity_class>

<!--
    <entity_class name="EntityLootContainerRegularWithMelee" extends="EntityLootContainerRegular">
      <property name="Mesh" value="@:Entities/LootContainers/zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithMelee"/>
    </entity_class>
-->
    
  </append>
  
<!--
  npcHRifleTemplate
-->
<!--
  <set xpath="/entity_classes/entity_class[contains(@name, 'Rifle')]/property[@name='LootDropEntityClass']/@value">EntityLootContainerRegularWithRifle</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'Pistol')]/property[@name='LootDropEntityClass']/@value">EntityLootContainerRegularWithPistol</set>
-->
  <append xpath="/entity_classes/entity_class[contains(@name, 'Raider') or starts-with(@name,'npcHarley')]"> <!-- HELPGOOD: must be the first to be appended, will remain set for melee raiders -->
    <property name="LootDropEntityClass" value="EntityLootContainerBandit"/>
  </append>

  <append xpath="/entity_classes/entity_class[contains(@name, 'LBow')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithLBow"/>
  </append>
  
  <append xpath="/entity_classes/entity_class[contains(@name, 'XBow')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithXBow"/>
  </append>

  <append xpath="/entity_classes/entity_class[contains(@name, 'Pistol') or contains(@name, 'SMG')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithPistol"/>
  </append>
  
  <append xpath="/entity_classes/entity_class[contains(@name, 'Shotgun')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithShotgun"/>
  </append>

  <append xpath="/entity_classes/entity_class[contains(@name, 'Rifle')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithRifle"/>
  </append>
  
  <append xpath="/entity_classes/entity_class[contains(@name, 'AK47') or contains(@name, 'PipeMG') or contains(@name, 'M60')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithAK47"/>
  </append>
  
  <append xpath="/entity_classes/entity_class[contains(@name, 'Rocket')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithRocket"/>
  </append>

<!--
  <append xpath="/entity_classes/entity_class[contains(@name, 'Knife') or contains(@name, '') or contains(@name, '') or contains(@name, '') or contains(@name, '') or contains(@name, '') or contains(@name, '') or contains(@name, '') or contains(@name, '') or contains(@name, '')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithMelee"/>
  </append>
-->

<!-- ===============================================================
loot bag stays much longer (default is 1200=20min realtime?)
-->
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLoot')]/property[contains(@name, 'TimeStayAfterDeath')]/@value">36000</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'Backpack')]/property[contains(@name, 'TimeStayAfterDeath')]/@value">72000</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'DroppedLootContainer')]/property[contains(@name, 'TimeStayAfterDeath')]/@value">72000</set>

<!--
jump 1 block while crouched

<entity_classes>
  <entity_class name="playerMale">
    <effect_group>
      <passive_effect name="Mobility" operation="base_set" value="1"/> <!- - Overall movement speed multiplier of 0 to 1 - ->
      <passive_effect name="JumpStrength" operation="base_set" value="0.16"/>
        <!- - .125  is min jump with a broken leg, .16 = 1.5m easy, .175 = 2m barely, .186 = 2m plus a bit, .22 = 2.3m (1.6 + 39%), .276 = juuust 3.3m  (1.6 + 75%) - ->
      <passive_effect name="JumpStrength" operation="base_set" value="0.08" tags="crouching">
        <requirement name="ProgressionLevel" progression_name="perkUrbanCombatJumping" operation="Equals" value="0"/>
      </passive_effect>
-->
  <set xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/passive_effect[@name='JumpStrength' and @tags='crouching']/@value">0.16</set>
  
<!-- ==========
  HELP: starter kit to compensate the challenge, just drop it if you dont want it
-->
<!--
  <append xpath="/entity_classes/entity_class[@name='playerMale']/property[
    @name='ItemsOnEnterGame.GameModeSurvival'   or
    @name='ItemsOnEnterGame.GameModeSurvivalSP' or
    @name='ItemsOnEnterGame.GameModeSurvivalMP'    ]/@value">,GSKTRFirstSpawnBundle</append>
-->
  <set xpath="/entity_classes/entity_class[@name='playerMale']/property[
    @name='ItemsOnEnterGame.GameModeSurvival'   or
    @name='ItemsOnEnterGame.GameModeSurvivalSP' or
    @name='ItemsOnEnterGame.GameModeSurvivalMP'    ]/@value">GSKElctrnTeleportUndergroundFreeAndSafeCall,GSKCFGTeleUndergroundFreeDelay,GSKElctrnTeleportToBiomeFreeAndSafeCall,GSKNoteResurrectTips,GSKTRFirstSpawnBundle</set>

<!--
  <append xpath="/entity_classes/entity_class[@name='playerMale']">
    <property name="SwimSpeed" value="1000" />
  </append>
-->

<!-- ======
  TESTING:
  THIS IS IGNORED, gun npcs wont use the club: npc limit ammo helper, as they wont be able to attack after their gun breaks
  the NPC wont mix ranged and melee AIs :(
  test ranged npc using melee too
-->
<!-- THIS DOES NOT WORK:
  <append xpath="/entity_classes/entity_class[@extends='npcRangedTemplate']/property[@name='Tags']/@value">,melee</append>
  <append xpath="/entity_classes/entity_class[@extends='npcRangedTemplate']/property[
    @name='ItemsOnEnterGame.GameModeSurvival'   or
    @name='ItemsOnEnterGame.GameModeSurvivalSP' or
    @name='ItemsOnEnterGame.GameModeSurvivalMP'    ]/@value">,meleeNPCClubWood</append>
  <append xpath="/entity_classes/entity_class[@extends='npcRangedTemplate']/property[@name='AIPackages']/@value">,NPCModBasicMeleeNoChat, NPCModNPCMeleeBasic</append>
  <append xpath="/entity_classes/entity_class[@extends='npcRangedTemplate']">
    <effect_group name="WeaponType">
      <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="ClubUser"/>
    </effect_group>
  </append>
-->
<!--
mix how?
<property name="RightHandJointName" value="DPistol"/>
<property name="RightHandJointName" value="Club"/>
-->

<!-- fails
  <append xpath="/entity_classes/entity_class[@name='sc_General']">
    <drop event="Harvest" name="resourceWood" tag="allToolsHarvest" count="25" />
    <property name="TimeStayAfterDeath" value="600" />
  </append>
-->
  <append xpath="/entity_classes/entity_class[@name='sc_General']">
<!--
    <property name="Buffs" value="buffGSKAirDropHighlight" />
-->
    <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKAirDropHighlight"/></effect_group>
    <property name="Tags" value="perkAT01,perkAT02,perkAT03" />
    <property name="TrackerIcon" value="map_supply_crate" />
		<property name="LootDropProb" value="1.0"/> 
		<property name="LootDropEntityClass" value="EntityLootContainerBoss" help="means: if the player looks better, some extra random items will be found TODO: should be something specific about airdrops tho?"/>
<!--
    <property name="ParticleOnSpawn" value="ParticleEffects/p_burning_barrel" param1="SetShapeToMesh0"/>
-->
  </append>
<!--
  <append xpath="/entity_classes/entity_class[@name='sc_General']">
    <property name="Buffs" value="buffGSKAirDropHighlight" />
    <property name="Tags" value="perkAT01,perkAT02,perkAT03" />
    <property name="TrackerIcon" value="map_supply_crate" />
  </append>
-->
  
<!--
  <append xpath="/entity_classes/entity_class[@name='animalRabbit']">
    <property name="MapIcon" value="7dtdMutantRabbit" />
    <property name="TrackerIcon" value="7dtdMutantRabbit" />
  </append>
-->

<!--
  <append xpath="/entity_classes">
    <entity_class name="npcTraderJen2" extends="npcTraderTemplate">
      <property name="Tags" value="entity,npc,human,trader,female"><!- -Attribute "value" appended by: "0-XNPCCore"- -></property>
      <property name="Mesh" value="@:Entities/Traders/Prefabs/TraderJen.prefab" />
      <property name="NPCID" value="traderjen" />
      <property name="DanceType" value="2" />
      <property name="LootListAlive" value="vehicleBicycle" /> <!- -      to use only for quest give/complete as we should be able to just get many at once- ->
<!- -
      <property name="TintMaterial2" value="25,50,50" />
      <property name="TintMaterial3" value="25,50,75" />
- ->
    </entity_class>
  </append>
-->
  
  <!--  HELP: cuz of nice shoulders ;), obs.: '1-RaiderzPack' must match the MOD's NAME! not the folder name. -->
<!--
  <set xpath="/entity_classes/entity_class[starts-with(@name,'npcFemaleYoung4Khz')]/property[@name='Mesh']/@value">#@modfolder(1-RaiderzPack):Resources/Raiderz.unity3d?RaiderMercDark</set>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'npcFemaleYoung4Khz')]/property[@name='Tags']/@value">,UMA2</append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'npcFemaleYoung4Khz')]">
    <property name="LookAtAngle" value="0" /> 
    <property name="PhysicsBody" value="ASCharacterStandard" />
  </append>
-->
  
  <append xpath="/entity_classes/entity_class[@name='npcRocketLTemplate']">
    <!-- HELPGOOD: to prevent friendlies messing up the terrain -->
    <property name="ItemsOnEnterGame.GameModeSurvival" value="gunNPCRocketLauncher,ammoNPCRocketFragFriendly" />
    <property name="ItemsOnEnterGame.GameModeSurvivalSP" value="gunNPCRocketLauncher,ammoNPCRocketFragFriendly" />
    <property name="ItemsOnEnterGame.GameModeSurvivalMP" value="gunNPCRocketLauncher,ammoNPCRocketFragFriendly" />   
  </append>
  <append xpath="/entity_classes/entity_class[@name='RaiderSluggerRocketL' or @name='npcHarleyRocketL']">
    <property name="ItemsOnEnterGame.GameModeSurvival" value="gunNPCRocketLauncher,ammoNPCRocketHE" />
    <property name="ItemsOnEnterGame.GameModeSurvivalSP" value="gunNPCRocketLauncher,ammoNPCRocketHE" />
    <property name="ItemsOnEnterGame.GameModeSurvivalMP" value="gunNPCRocketLauncher,ammoNPCRocketHE" />   
  </append>
  
  <set xpath="/entity_classes/entity_class[starts-with(@name,'zombie')]/property[@name='TimeStayAfterDeath']/@value">6</set>
  
<!--
  <append xpath="/entity_classes/entity_class[
      @name='npcTattooGurlTRifle' or 
      @name='npcAirForceTRifle'
    ]/property[@name='Tags']/@value" help="this fix copes with ranged NPC follower limiter TODO: find other rangeds that require fixing thru bash script xmlstarlet, or use contains npc TRifle and any other ranged suffixes and append to them even if it ends up dupped">,ranged</append>
-->
  <append xpath="/entity_classes/entity_class[
      @name='npcTattooGurlTRifle' or 
      @name='npcAirForceTRifle'
    ]" help="this fix copes with ranged NPC follower limiter. had to be a full property append because had to remove melee from it TODO: find other rangeds that require fixing thru bash script xmlstarlet, or use contains npc TRifle and any other ranged suffixes and append to them even if it ends up dupped">
    <property name="Tags" value="entity,female,npc,UMA2,ranged"/>
  </append>
  <append xpath="/entity_classes/entity_class[
      @name='npcReconFemaleClub'
    ]" help="this fix copes with ranged NPC follower limiter. had to be a full property append because had to remove ranged from it">
    <property name="Tags" value="UMA2,entity,female,npc,melee"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'npc') and
      (
        contains(@name,'Club') or
        contains(@name,'Knife') or
        contains(@name,'Axe') or
        contains(@name,'Spear') or
        contains(@name,'Bat') or
        contains(@name,'Machete')
      )
    ]/property[@name='Tags' and contains(@value,'ranged')]/@value" help="this patch failing to apply is a good thing. TODO?: melee wont override ranged, but is simple to prioritize melee over ranged when limiting NPCs. This is just a quick workaround, all melee NPCs should be properly fixed to remove ranged tag tho.">,melee,FIXME_HasBothRangedAndMelee</append>
  
  <!-- HELPGOOD: A patch to friendly raiders to show up in the hired followers list 
    ex.: the idea is to upgrade from npcClubTemplate to npcAdvancedClubTemplate
      originally:
        <entity_class name="RaiderJayneClub" extends="npcClubTemplate"> 
        <entity_class name="npcRaiderJayneClub" extends="RaiderJayneClub"> 
      final: this was is important to keep the model
        <entity_class name="RaiderJayneClub" extends="npcAdvancedClubTemplate"> 
        <entity_class name="npcRaiderJayneClub" extends="RaiderJayneClub"> 
      so the "npc" (friendly) is further patched in the last line with the missing tags
  -->
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Club')]/@extends">npcAdvancedClubTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Knife')]/@extends">npcAdvancedKnifeTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Bat')]/@extends">npcAdvancedBatTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Axe')]/@extends">npcAdvancedAxeTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Machete')]/@extends">npcAdvancedMacheteTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'AK47')]/@extends">npcAdvancedAK47Template</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'SMG')]/@extends">npcAdvancedSMGTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'DPistol')]/@extends">npcAdvancedDPistolTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'TRifle')]/@extends">npcAdvancedTRifleTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'PipeMG')]/@extends">npcAdvancedPipeMGTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'M60')]/@extends">npcAdvancedM60Template</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'RocketL')]/@extends">npcAdvancedRocketLTemplate</set>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'npcRaider')]/property[@name='Tags']/@value">,cp,DRMid</append>
  <!-- HELPGOOD: ambushers BELOW the friendly patch above to keep the correct extends value below, or add above a not(name has ambush) there -->
  <append xpath="/entity_classes" help="treasure Ambushers have very low loot drop chance, just flee is better as you were there for the treasure (and they too)">
    <!-- HELPGOOD: for treasure AMBUSH: extended raiders that drop prob 0.10 only for treasure ambushers, a simple script to create it:CODEGEN:
    clear;egrep '<entity_class name="(Raider|npcHarley)[^>]*>' -o _NewestSavegamePath.IgnoreOnBackup/ConfigsDump/entityclasses.xml |egrep -v Ambush|sort |sed -r -e 's@(.*)name="([^"]*)" *extends="([^"]*)"(.*)@    \1 name="\2Ambush" extends="\2"><property name="LootDropProb" value="0.01"/></entity_class>@'
    -->
    <entity_class  name="npcHarleyAK47Ambush" extends="npcHarleyAK47"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyAShotgunAmbush" extends="npcHarleyAShotgun"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyAxeAmbush" extends="npcHarleyAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyBatAmbush" extends="npcHarleyBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyBMEmptyHandAmbush" extends="npcHarleyBMEmptyHand"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyClubAmbush" extends="npcHarleyClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyDPistolAmbush" extends="npcHarleyDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyEmptyHandAmbush" extends="npcHarleyEmptyHand"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyHRifleAmbush" extends="npcHarleyHRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyKnifeAmbush" extends="npcHarleyKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyLBowAmbush" extends="npcHarleyLBow"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyM60Ambush" extends="npcHarleyM60"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyMacheteAmbush" extends="npcHarleyMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyPipeMGAmbush" extends="npcHarleyPipeMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyPipePistolAmbush" extends="npcHarleyPipePistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyPipeRifleAmbush" extends="npcHarleyPipeRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyPipeShotgunAmbush" extends="npcHarleyPipeShotgun"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyPistolAmbush" extends="npcHarleyPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyPShotgunAmbush" extends="npcHarleyPShotgun"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyRocketLAmbush" extends="npcHarleyRocketL"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleySMGAmbush" extends="npcHarleySMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleySpearAmbush" extends="npcHarleySpear"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleySRifleAmbush" extends="npcHarleySRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyTRifleAmbush" extends="npcHarleyTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyVomitHandAmbush" extends="npcHarleyVomitHand"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="npcHarleyXBowAmbush" extends="npcHarleyXBow"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBeatzAK47Ambush" extends="RaiderBeatzAK47"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBeatzBatAmbush" extends="RaiderBeatzBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBeatzClubAmbush" extends="RaiderBeatzClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBeatzDPistolAmbush" extends="RaiderBeatzDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBeatzSMGAmbush" extends="RaiderBeatzSMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettyAxeAmbush" extends="RaiderBettyAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettyBatAmbush" extends="RaiderBettyBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettyClubAmbush" extends="RaiderBettyClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettyDPistolAmbush" extends="RaiderBettyDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettyKnifeAmbush" extends="RaiderBettyKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettyMacheteAmbush" extends="RaiderBettyMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettySMGAmbush" extends="RaiderBettySMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderBettyTRifleAmbush" extends="RaiderBettyTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaAxeAmbush" extends="RaiderGinaAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaBatAmbush" extends="RaiderGinaBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaClubAmbush" extends="RaiderGinaClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaDPistolAmbush" extends="RaiderGinaDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaKnifeAmbush" extends="RaiderGinaKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaMacheteAmbush" extends="RaiderGinaMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaSMGAmbush" extends="RaiderGinaSMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGinaTRifleAmbush" extends="RaiderGinaTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsyAxeAmbush" extends="RaiderGypsyAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsyBatAmbush" extends="RaiderGypsyBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsyClubAmbush" extends="RaiderGypsyClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsyDPistolAmbush" extends="RaiderGypsyDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsyKnifeAmbush" extends="RaiderGypsyKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsyMacheteAmbush" extends="RaiderGypsyMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsySMGAmbush" extends="RaiderGypsySMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderGypsyTRifleAmbush" extends="RaiderGypsyTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedyAxeAmbush" extends="RaiderHedyAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedyBatAmbush" extends="RaiderHedyBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedyClubAmbush" extends="RaiderHedyClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedyDPistolAmbush" extends="RaiderHedyDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedyKnifeAmbush" extends="RaiderHedyKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedyMacheteAmbush" extends="RaiderHedyMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedySMGAmbush" extends="RaiderHedySMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderHedyTRifleAmbush" extends="RaiderHedyTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneAxeAmbush" extends="RaiderJayneAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneBatAmbush" extends="RaiderJayneBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneClubAmbush" extends="RaiderJayneClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneDPistolAmbush" extends="RaiderJayneDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneKnifeAmbush" extends="RaiderJayneKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneMacheteAmbush" extends="RaiderJayneMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneSMGAmbush" extends="RaiderJayneSMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderJayneTRifleAmbush" extends="RaiderJayneTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMercAK47Ambush" extends="RaiderMercAK47"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMercClubAmbush" extends="RaiderMercClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMercDPistolAmbush" extends="RaiderMercDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMercKnifeAmbush" extends="RaiderMercKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMercMacheteAmbush" extends="RaiderMercMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMercTRifleAmbush" extends="RaiderMercTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMotoAK47Ambush" extends="RaiderMotoAK47"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMotoAxeAmbush" extends="RaiderMotoAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMotoBatAmbush" extends="RaiderMotoBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMotoDPistolAmbush" extends="RaiderMotoDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderMotoTRifleAmbush" extends="RaiderMotoTRifle"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestAxeAmbush" extends="RaiderPestAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestBatAmbush" extends="RaiderPestBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestClubAmbush" extends="RaiderPestClub"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestDPistolAmbush" extends="RaiderPestDPistol"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestKnifeAmbush" extends="RaiderPestKnife"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestMacheteAmbush" extends="RaiderPestMachete"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestPipeMGAmbush" extends="RaiderPestPipeMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderPestSMGAmbush" extends="RaiderPestSMG"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderSluggerAK47Ambush" extends="RaiderSluggerAK47"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderSluggerAxeAmbush" extends="RaiderSluggerAxe"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderSluggerBatAmbush" extends="RaiderSluggerBat"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderSluggerM60Ambush" extends="RaiderSluggerM60"><property name="LootDropProb" value="0.01"/></entity_class>
    <entity_class  name="RaiderSluggerRocketLAmbush" extends="RaiderSluggerRocketL"><property name="LootDropProb" value="0.01"/></entity_class>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name,'Ambush')]">
		<effect_group name="Ambush">
			<triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCTreasureAmbusherSpawned" />
		</effect_group>
  </append>
  <append xpath="/entity_classes/entity_class[(starts-with(@name, 'Raider') or starts-with(@name,'npcHarley'))]">
		<effect_group help="TODO: for ranged, should be an ambush of melee 5 raiders instead of default with many weapon types">
			<triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKraiderAmbushInc"/>
			<triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCragdollIndicator"/>
<!--
			<triggered_effect trigger="onSelfFirstSpawn" action="ModifyCVar" cvar="iGSKNPCnpcBanditAmbush" operation="add" value="1" target="selfAOE" range="60" target_tags="player" help="disabled">
				<requirement name="!HasBuff" buff="buffGSKNPCTreasureAmbusherSpawned"  help="ignore ambushers"/>
				<requirement name="CVarCompare" cvar="iGSKNPCnpcBanditAmbushMode" operation="Equals" value="0" help="ignore ambushers"/>
			</triggered_effect>
-->
		</effect_group>
	</append>
  
  <append xpath="/entity_classes/entity_class[@name='animalSnake']">
    <drop event="Harvest" name="GSKsnakePoison" count="8,16" tag="butcherHarvest"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider') and contains(@name,'Mini')]">
    <drop event="Harvest" name="GSKsnakePoison" count="3,6" tag="butcherHarvest"/>
    <drop event="Harvest" name="ammoProjectileSpiderWebPlayer" count="1" tag="butcherHarvest"/>
    <drop event="Harvest" name="cobweb" count="1" tag="butcherHarvest"/>
    <property name="DeadBodyHitPoints" value="100" help="was 66 but doesnt work well if you get a good harvesting weapon, will harvest almost nothing from 2nd hit on with the gore harvest buff. next grown spider is 100. 30 is too little to work with buff gore harvest that only works from the 2nd hit on."/>
<!--
			<property name="MoveSpeedAggro" value="1.3, 1.3" /> mini
			<property name="MoveSpeedPanic" value="1.3" />
			<property name="MoveSpeedAggro" value="1.2, 1.2" /> normal
			<property name="MoveSpeedPanic" value="1.2" />
			<property name="MoveSpeedAggro" value="1.45, 1.45" />  freal
			<property name="MoveSpeedPanic" value="1.45" />
			<property name="MoveSpeedAggro" value="1.5, 1.5" /> rrad
			<property name="MoveSpeedPanic" value="1.5" />
			<property name="MoveSpeedAggro" value="1.5, 1.55" /> qqueen
			<property name="MoveSpeedPanic" value="1.5" />
-->
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider') and not(contains(@name,'Mini') or contains(@name,'Feral') or contains(@name,'Queen'))]">
    <drop event="Harvest" name="GSKsnakePoison" count="6,9" tag="butcherHarvest"/>
    <drop event="Harvest" name="ammoProjectileSpiderWebPlayer" count="3,6" tag="butcherHarvest"/>
    <drop event="Harvest" name="cobweb" count="3,6" tag="butcherHarvest"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider') and contains(@name,'Feral')]">
    <drop event="Harvest" name="GSKsnakePoison" count="9,12" tag="butcherHarvest"/>
    <drop event="Harvest" name="ammoProjectileSpiderWebPlayer" count="4,9" tag="butcherHarvest"/>
    <drop event="Harvest" name="cobweb" count="4,9" tag="butcherHarvest"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider') and contains(@name,'Queen')]">
    <drop event="Harvest" name="GSKsnakePoison" count="15,30" tag="butcherHarvest"/>
    <drop event="Harvest" name="ammoProjectileSpiderWebPlayer" count="5,15" tag="butcherHarvest"/>
    <drop event="Harvest" name="cobweb" count="5,15" tag="butcherHarvest"/>
    <effect_group>
			<triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKSpiderQueenSpawnsMiniSpidersOnDeath"/>
		</effect_group>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider')]">
    <property name="AITask-1" value="BreakBlock" />
    <property name="AITask-2" value="Territorial" />
    <property name="AITask-3" value="RangedAttackTarget" data="itemType=1;cooldown=4;duration=3;minRange=1;maxRange=25"/>
    <property name="AITask-4" value="Leap" />
    <property name="AITask-5" value="ApproachAndAttackTarget" data="class=EntityAlive,0,EntityZombie,0,EntityNPC,0,EntityPlayer,0,EntitySurvivor,0,EntityBandit,0,EntityAnimalRabbit,8" />
    <property name="AITask-6" value="ApproachSpot" />
    <property name="AITask-7" value="Look" />
    <property name="AITask-8" value="Wander" />
    <property name="AITask-9" value="" />
    <property name="CanClimbVertical" value="true" />
    <property name="JumpMaxDistance" value="10, 13" />
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider') and contains(@name,'Mini')]">
    <property name="HandItem" value="meleeHandAnimalSpiderMini" />
    <property name="SoundRandom" value="" help="small spiders will be sneaky now"/>
    <property name="SoundAlert" value="" />
    <property name="SoundHurt" value="animalspiderhurt" />
    <property name="SoundDeath" value="animalspiderdeath" />
    <property name="SoundAttack" value="animalspiderattack" />
    <property name="SoundSense" value="" />
    <property name="SoundGiveUp" value="animalspiderroam" />
  </append>
<!--
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider') and contains(@name,'Queen')]">
    <property name="HandItem" value="meleeHandAnimalSpiderQueen" />
  </append>
-->
  <append xpath="/entity_classes/entity_class[@name='zombieTemplateMale' or @name='animalTemplateTimid' or @name='animalTemplateHostile']">
    <effect_group>
			<triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCCosmicRayTrap"/>
		</effect_group>
  </append>
  
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider') or @name='zombieSpider']">
    <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCLeapHit"/></effect_group>
    <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCCosmicRayTrap"/></effect_group>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider')]">
    <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCSpiderTouchNet"/></effect_group>
  </append>
  
  <append xpath="/entity_classes/entity_class[starts-with(@name,'zombieSpider')]/property[@name='Tags']/@value">,zombiespider</append>
		
<!--
  <append xpath="/entity_classes/entity_class[@name='zombieMutatedRadiated']">
-->
<!--
    <property name="Buffs" value="buffGSKMutantZombies,buffGSKRadiationAura"/>
-->
<!--
    <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKMutantZombies"/></effect_group>
-->
<!--
    <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKRadiationAura"/></effect_group>
-->
<!--
  </append>
-->
<!--
  <append xpath="/entity_classes/entity_class[@name='zombieMutatedRadiated']/property[@name='Buffs']/@value">,buffGSKMutantZombies</append>
-->

  <append xpath="/entity_classes/entity_class[starts-with(@name,'zombiePartyGirl')]">
    <effect_group help="throws a halloween party">
      <triggered_effect trigger="onSelfDamagedOther" action="AddBuff" target="other" buff="buffGSKPartyGirlPower">
        <requirement name="EntityTagCompare" target="other" tags="player"/>
      </triggered_effect>
    </effect_group>
  </append>

  
<!--
  <append xpath="/entity_classes/entity_class[@name='zombieMutated']/property[@name='Buffs']/@value">,buffGSKMutantZombies</append>
  <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff=""/></effect_group>
-->
<!--
  <set xpath="/entity_classes/entity_class[@name='zombieMutated']/property[@name='Buffs']">buffGSKMutantZombies</set>
  <effect_group><triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff=""/></effect_group>
-->

  <set xpath="/entity_classes/entity_class[@name='zombieArlene']/property[@name='DanceType']/@value">1</set>
  
  <append xpath="/entity_classes/entity_class[@name='zombieDemolition']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionA"/>
    <property name="Explosion.RadiusBlocks" value="10" />
    <property name="NavObject" value="navDemolition" help="it is much more dangerous than vanilla now, better have some chance against it"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieFatCop']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionA"/>
    <property name="Explosion.RadiusBlocks" value="5" />
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieFatCopFeral']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionA"/>
    <property name="Explosion.RadiusBlocks" value="6" />
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieFatCopRadiated']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionB"/>
    <property name="Explosion.RadiusBlocks" value="8" />
  </append>
  
  <append xpath="/entity_classes/entity_class[
      starts-with(@name,'npc') and 
      (
        contains(@name,'Baker') or 
        contains(@name,'Male') or 
        contains(@name,'MrFriendly') or 
        contains(@name,'Officer') or 
        contains(@name,'Soldier') or 
        contains(@name,'VaultBoss') or 
        contains(@name,'Wrestler')
      ) and
      not(contains(@name,'Female'))
    ]" help="default sounds to male NPCs so if you hired one you will know it is being hit">
    <property name="SoundHurt" value="Player_Male/player1painlg" />
    <property name="SoundHurtSmall" value="Player_Male/player1painsm" />
    <property name="SoundDeath" value="Player_Male/player1death" />
    <property name="SoundStamina" value="Player_Male/player1stamina" />
    <property name="SoundDrownPain" value="Player_Male/player1drownpain" />
    <property name="SoundWaterSurface" value="Player_Male/player1drownsurface" />
    <property name="SoundDrownDeath" value="Player_Male/player1drowndeath" />
    <property name="SoundJump" value="Player_Male/player1Jump" />
    <property name="SoundLandSoft" value="Player_Male/player1LandSoft" />
    <property name="SoundLandHard" value="Player_Male/player1LandHard" />
    <property name="SoundPlayerLandThump" value="PlayerLandThump" />
  </append>
  
  <append xpath="/entity_classes/entity_class[starts-with(@name,'mech') and not(contains(@name,'DeusEx'))]">
    <property name="LootDropProb" value="0"/> 
  </append>
  <append xpath="/entity_classes/entity_class[@name='mechTemplateHostile']">
    <property name="DeadBodyHitPoints" value="33" help="faster harvesting"/>
    <property name="AITask-1" value="BreakBlock" />
    <property name="AITask-2" value="Leap" />
    <property name="AITask-3" value="ApproachAndAttackTarget" data="class=EntityAlive,0" />
    <property name="AITask-4" value="ApproachSpot" />
    <property name="AITask-5" value="Look" />
    <property name="AITask-6" value="Territorial" />
    <property name="AITask-7" value="Wander" />
    <property name="AITask-8" value="" />
  </append>
  <append xpath="/entity_classes/entity_class[@name='mechBee']" help="TODO: shoot bolts">
    <effect_group name="Base Effects">
      <passive_effect name="HealthMax" operation="base_set" value="50" help="the hit collider is too small, so whenever you hit it, it will be worth it."/>
    </effect_group>
    <property name="DeadBodyHitPoints" value="20" help="faster harvesting"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='mechSphereI']" help="TODO: self explode if near or after hitting the player. TODO: use this as base to create the walking landmine robots that the player should be able to craft to seek enemies (as long they ignore NPC followers and friendlies..) !">
    <effect_group name="Base Effects">
      <passive_effect name="HealthMax" operation="base_set" value="75" help="the hit collider is too small, so whenever you hit it, it will be worth it."/>
    </effect_group>
    <property name="DeadBodyHitPoints" value="33" help="faster harvesting"/>
		<property name="SizeScale" value="0.25" />
		
<!--		HELPGOOD: based on exploding arrow-->
    <property name="Class" value="EntityZombieCop" />
    <property name="SoundExplodeWarn" value="hulkexplodewarning" />
    <property name="Explosion.ParticleIndex" value="11" help="based on exploding arrow"/>
		<property name="Explosion.RadiusBlocks" value="3" />
		<property name="Explosion.RadiusEntities" value="1.5" />
		<property name="Explosion.DamageBonus.stone" value=".3" />
		<property name="Explosion.DamageBonus.metal" value=".1" />
		<property name="Explosion.DamageBonus.earth" value="0" />
		<property name="Explosion.DamageBonus.wood" value=".5" />
		<property name="Explosion.DamageBonus.water" value="0" />
		<property name="Explosion.BlockDamage" value="2" />
		<property name="Explosion.EntityDamage" value="72" />
<!--		HELPGOOD: some more settings-->
    <property name="Explosion.Duration" value="8" />
    <property name="Explosion.BlastPower" value="35" />
    <property name="ExplodeDelay" value="0.5" />
<!--
    <property name="Explosion.Buff" value="buffBurningMolotov" />
-->
		<effect_group help="sync with 20% of max HP. self explosion from zombie cop is only triggered when it is in non configurable low HP right? this helps to trigger it TODO: configure in what HP percentage the self destruction will trigger">
      <triggered_effect trigger="onSelfDamagedOther" action="ModifyStats" stat="Health" operation="set" value="15">
				<requirement name="StatCompareCurrent" stat="Health" operation="GT" value="15"/>
      </triggered_effect>
      <triggered_effect trigger="onSelfAttackedOther" action="ModifyStats" stat="Health" operation="set" value="15">
				<requirement name="StatCompareCurrent" stat="Health" operation="GT" value="15"/>
      </triggered_effect>
    </effect_group>
  </append>
  <append xpath="/entity_classes/entity_class[@name='mechSphereII']" help="TODO: like sphere1 but destroy blocks like dynamite too">
    <effect_group name="Base Effects">
      <passive_effect name="HealthMax" operation="base_set" value="75" help="the hit collider is too small, so whenever you hit it, it will be worth it."/>
    </effect_group>
    <property name="DeadBodyHitPoints" value="33" help="faster harvesting"/>
		<property name="SizeScale" value="0.40" />
  </append>
  <append xpath="/entity_classes/entity_class[@name='mechRobot']">
		<passive_effect name="RunSpeed" operation="perc_add" value="3.0"/>
    <property name="MoveSpeedAggro" value="4, 5"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='mechRobotArmy']">
		<passive_effect name="RunSpeed" operation="perc_add" value="2.0"/>
    <property name="MoveSpeedAggro" value="2, 3"/>
    <effect_group help="strong enemy knockdown ragdolls player">
      <triggered_effect trigger="onSelfDamagedOther" action="ModifyCVar" target="other" cvar=".iGSKTryRagdollSelf" operation="add" value="3"/>
    </effect_group>
  </append>
<!-- HELPGOOD: todob mechDrone should throw HE grenades every 60s -->
    
  <append xpath="/entity_classes/entity_class[@name='animalChicken']">
    <property name="SoundAlert" value="Animals/Chicken/chickenpain" />
    <property name="SoundSense" value="Animals/Chicken/chickenpain" />
  </append>
  <append xpath="/entity_classes/entity_class[@name='animalRabbit']">
    <property name="SoundAlert" value="Animals/rabbitpain" />
    <property name="SoundSense" value="Animals/rabbitpain" />
  </append>
  
  <append xpath="/entity_classes">
    <entity_class name="animalChickenTreasureRadiusReductionIndicator" extends="animalChicken">
      <property name="TimeStayAfterDeath" value="0.1"/>
      <property name="Tags" value="entity,animal,chicken,perkAT01,perkAT02,perkAT03,TreasureRadiusReductionIndicator" />
      <effect_group name="Base Effects">
        <passive_effect name="HealthMax" operation="base_set" value="30000" />
        <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKEntTrRdRdctIdct"/>
      </effect_group>
    </entity_class>
    
  </append>
  
  <append xpath="/entity_classes/entity_class[@name='zombieBurnt']">
    <property name="Class" value="EntityZombieCop" />
    <property name="SoundExplodeWarn" value="hulkexplodewarning" />
    <property name="Explosion.ParticleIndex" value="10" />
    <property name="Explosion.Duration" value="8" />
    <property name="Explosion.BlastPower" value="35" />
    <property name="Explosion.DamageBonus.stone" value=".1" />
    <property name="Explosion.DamageBonus.metal" value="0" />
    <property name="Explosion.DamageBonus.earth" value="0" />
    <property name="Explosion.DamageBonus.water" value="0" />
    <property name="Explosion.DamageBonus.wood" value="6" />
    <property name="Explosion.RadiusBlocks" value="5" />
    <property name="Explosion.RadiusEntities" value="6" />
    <property name="Explosion.BlockDamage" value="10" />
    <property name="Explosion.EntityDamage" value="10" />
<!--
    <property name="ExplodeDelay" value="4" />
-->
    <property name="Explosion.Buff" value="buffBurningMolotov" />
    <effect_group name="fire stuff">
      <passive_effect name="BuffResistance" operation="base_set" value="200" tags="buffBurningZombie,buffBurningElement,buffBurningEnvironment,buffBurningEnvironmentHack,buffBurningFlamingArrow,buffBurningMolotov,buffIsOnFire,buffBurningWeapon" />
      <triggered_effect trigger="onSelfDamagedOther" action="AddBuff" target="other" buff="buffBurningElement" help="TODO: use buffEWBurningStrike of EffectiveWeapons">
        <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LT" value="25"/>
      </triggered_effect>
<!--
      <triggered_effect trigger="onSelfEnteredGame" action="AttachParticleEffectToEntity" particle="p_onFire" local_offset="0,0,0" parent_transform="LOD0" shape_mesh="true" />
-->
      <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKBurntZombFireParticle"/>
    </effect_group>
<!--
    <property name="ParticleOnSpawn" value="p_onFire" param1="SetShapeToMesh0"/>
-->
<!--
    <property name="ParticleOnSpawn" value="ParticleEffects/p_onFire" param1="SetShapeToMesh0"/>
-->
<!--
    <property name="ExplodeHealthThreshold" value="0" />
-->
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieFemaleFat' or @name='zombieFatHawaiian']">
    <property name="Class" value="EntityZombieCop" />
    <property name="SoundExplodeWarn" value="hulkexplodewarning" />
    <property name="Explosion.ParticleIndex" value="8" />
    <property name="Explosion.RadiusBlocks" value="3" />
    <property name="Explosion.RadiusEntities" value="4" />
    <property name="Explosion.BlockDamage" value="250" />
    <property name="Explosion.EntityDamage" value="25" />
    <property name="Explosion.DamageBonus.earth" value="0" />
    <triggered_effect trigger="onSelfDamagedOther" action="ModifyCVar" target="other" cvar=".iGSKTryRagdollSelf" operation="add" value="1"/>
  </append>
  
  <append xpath="/entity_classes/entity_class[starts-with(@name,'npcArmyPowerArmor')]/property[@name='Tags']/@value">,powerarmor</append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'npcArmyPowerArmor')]">
		<effect_group>
			<triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCHiredFollowingPowerArmorUse" help="actually just a dummy" />
		</effect_group>
  </append>
  
  <append xpath="/entity_classes">
    <entity_class name="_mechDeusEx1RocketL" extends="npcAdvancedRocketLTemplate" help="FAIL. TODO: use some super fancy model that looks like a organic/implanted/cyborg hybrid with some neon ;). TODO: make it spawn the normal mechs every 300s, but bees every 60s. make bees have like just 1 shot HP, 10HP, and harvest almost nothing from them. TODO: contextualize DeusEx in docs. TODO: prevent mechs from dropping loot, least DeusEx itself.">
      
      <property name="Mesh" value="#@modfolder(0-CreaturePackMechs):Resources/XythMechs.unity3d?Robot_X" />
      <property name="PhysicsBody" value="RobotRig" />
<!--
      <property name="HandItem" value="handRobot" />
-->
      <property name="HasRagdoll" value="true" />
      <property name="HasDeathAnim" value="true" />
      <property name="RootMotion" value="false" /> 
      <property name="SurfaceCategory" value="metal" />
<!--
      <property name="AttackTimeoutDay" value="1.5" />
      <property name="AttackTimeoutNight" value="1.4" />
-->
      
      <property name="SoundRandomTime" value="20.0" />
      <property name="SoundRandom" value="RobotRandom" />
      <property name="SoundAlert" value="RobotAlert" />
      <property name="SoundAttack" value="RobotAttack" />
      <property name="SoundDeath" value="RobotDie" />
      <property name="SoundHurt" value="RobotRandom" />
      <property name="SoundSense" value="RobotSense" /> 
      <property name="Tags" value="entity,cp,mech,mechRobot,npc,bandit,ranged" />
      <property name="Faction" value="whiteriver" />
      <property name="LookAtAngle" value="0" /> 
      <property name="ExperienceGain" value="2500" /> 
      <property name="LootDropProb" value="1.00" /> 
      <property name="LootDropEntityClass" value="EntityLootContainerRegularWithRocket" />
      <property name="ItemsOnEnterGame.GameModeSurvival" value="gunNPCRocketLauncherDeusEx,ammoNPCRocketHE"/>
      <property name="ItemsOnEnterGame.GameModeSurvivalSP" value="gunNPCRocketLauncherDeusEx,ammoNPCRocketHE"/>
      <property name="ItemsOnEnterGame.GameModeSurvivalMP" value="gunNPCRocketLauncherDeusEx,ammoNPCRocketHE"/>
      <property name="HideInSpawnMenu" value="false" />
      <property name="SizeScale" value="5" help="ISSUE: the laser of the sword from handRobotArmy does not scale with the model, it remains tiny"/>
      <property name="HideInSpawnMenu" value="false" />
<!--
      <property name="HandItem" value="meleeWpnBatonT2StunBatonDeusEx" />
      parent_transform="Origin" local_offset="0,3.00,0" local_rotation="0,0,0"
      <property name="HandItem" value="handRobotArmyDeusEx" />
      <property name="HandItem" value="gunNPCRocketLauncherDeusEx"/>
      <property name="HandItem" value="gunNPCRocketLauncherDeusEx" parent_transform="Origin" local_offset="0,3,0" local_rotation="0,0,0"/>
-->
<!--
      <property name="HandItem" value="handRobotArmyDeusEx" />
-->
      <property name="MaxTurnSpeed" value="280" />
      <property name="MoveSpeed" value=".9" />
      <property name="MoveSpeedAggro" value="3.6, 4.2" /> 
      <property name="MoveSpeedPanic" value="4.2" />
      <property name="AITask-1" value="BreakBlock" />
      <property name="AITask-2" value="Territorial" />
      <property name="AITask-3" value="RangedAttackTarget" data="itemType=1;cooldown=15;duration=3;minRange=1;maxRange=30"/>
      <property name="AITask-4" value="Leap" />
      <property name="AITask-5" value="ApproachAndAttackTarget" data="class=EntityAlive,0,EntityZombie,0,EntityNPC,0,EntityPlayer,100,EntitySurvivor,0,EntityBandit,0,EntityAnimalRabbit,0" />
      <property name="AITask-6" value="ApproachSpot" />
      <property name="AITask-7" value="Look" />
      <property name="AITask-8" value="Wander" />
      <property name="AITask-9" value="" />
      <property name="AITarget-1" value="SetAsTargetIfHurt"/>
<!--
      <property name="AITarget-1" value="SetAsTargetIfHurt" data="class=EntityAlive,EntityNPC,EntityEnemyAnimal,EntityPlayer,EntityNPC,EntityPlayer,EntityZombie,EntityPlayer,EntitySurvivor,EntityEnemyAnimal"/>
-->
      <property name="CanClimbVertical" value="true" />
      <property name="JumpMaxDistance" value="25, 30" />
      <effect_group name="Base Effects">
        <passive_effect name="HealthMax" operation="base_set" value="31000" help="a bit less than teleport explosion, but it must be 1 hit kill, so damage resistance must be considered. try once to calc correct HP here."/>
        <passive_effect name="HealthChangeOT" operation="base_add" value="1000" help="TODO: say: self repair 3d printing system activated beep"/>
      </effect_group>      
<!--
      <property name="Faction" value="whiteriver" />
      <property name="ModelType" value="Standard" />			
      <property name="Prefab" value="NPC" />
      <property name="Class" value="EntityEnemyAnimal" />
      <property name="Parent" value="Animals" />
      <property name="AvatarController" value="AvatarAnimalController" /> 
      <property name="HandItem" value="handDrone" />
      <property name="MapIcon" value="ui_game_symbol_enemy_dot" /> 
      <property name="CompassIcon" value="ui_game_symbol_enemy_dot" />
      <property name="CompassUpIcon" value="ui_game_symbol_enemy_dot_up" />
      <property name="CompassDownIcon" value="ui_game_symbol_enemy_dot_down" />
      <property name="TrackerIcon" value="ui_game_symbol_animal_tracker" /> 
      <property name="RotateToGround" value="false" />
      <property name="HasRagdoll" value="true" />
      <property name="HasDeathAnim" value="true" />
      <property name="RootMotion" value="false" />
      <property name="RagdollOnDeathChance" value="0" />
      <property name="Mass" value="120" />			
      <property name="ExperienceGain" value="230" />
      <property name="HandItem" value="handDrone" />
      <property name="AttackTimeoutDay" value="1.5" />
      <property name="AttackTimeoutNight" value="1.4" />
      <property name="Weight" value="300" />
      <property name="IsEntityAnimal" value="true" />
      <property name="IsEnemyEntity" value="true" />
      <property name="Faction" value="animals" />
      <property name="PhysicsBody" value="RobotRig" />
      <property name="AIGroupCircle" value="1" />
      <property name="AINoiseSeekDist" value="3" />
      <property name="AIPathCostScale" value=".4, .6" />
      <property name="AITask-1" value="BreakBlock" />
      <property name="AITask-2" value="ApproachAndAttackTarget" data="class=EntityAlive,0" />
      <property name="AITask-3" value="ApproachSpot" />
      <property name="AITask-4" value="Look" />
      <property name="AITask-5" value="Territorial" />
      <property name="AITask-6" value="Wander" />
      <property name="AITask-7" value="" />
      <property name="AITarget-1" value="SetAsTargetIfHurt" />
      <property name="AITarget-2" value="BlockingTargetTask" />
      <property name="AITarget-3" value="SetNearestEntityAsTarget" data="class=EntityPlayer,0,0,EntityAlive,0,0" />
      <property name="AITarget-4" value="" />
      <property name="MaxViewAngle" value="180" />
      <property name="SightRange" value="30" />
      <property name="SightLightThreshold" value="-2,150" />
      <property name="SleeperWakeupSightDetectionMin" value="-40,5" />
      <property name="SleeperWakeupSightDetectionMax" value="340,480" />
      <property name="SleeperSenseSightDetectionMin" value="-10,0" />
      <property name="SleeperSenseSightDetectionMax" value="200,300" />
      <property name="SleeperNoiseSenseThreshold" value="3,8" />
      <property name="SleeperNoiseWakeThreshold" value="9,12" />
      <property name="SleeperSmellSenseThreshold" value="20,50" />
      <property name="SoundSleeperSenseChance" value=".5" />
      <property name="SoundRandomTime" value="20.0" />
      <property name="SoundRandom" value="DroneRandom" />
      <property name="SoundAlert" value="DroneRandom" />
      <property name="SoundAttack" value="DroneRandom" />
      <property name="SoundDeath" value="DroneDie" />
      <property name="SoundHurt" value="DroneRandom" />
      <property name="SoundSense" value="DroneRandom" /> 
      <property name="SurfaceCategory" value="metal" />
      <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble" />
      <drop event="Harvest" name="resourceMechanicalParts" tag="salvageHarvest" count="10" /> 
      <drop event="Harvest" name="resourceScrapIron" tag="salvageHarvest" count="9" />
      <drop event="Harvest" name="resourceElectricParts" tag="salvageHarvest" count="12" /> 
      <drop event="Harvest" name="resourceScrapPolymers" tag="salvageHarvest" count="9" />
      <drop event="Harvest" name="resourceMetalPipe" count="1" tag="salvageHarvest" />
      <drop event="Harvest" name="carBattery" count="1" prob="0.25" tag="salvageHarvest" />
      <drop event="Harvest" name="resourceSpring" count="2,4" tag="salvageHarvest" />
      <drop event="Harvest" name="resourceScrapIron" count="3,7" tag="allHarvest" />
      <drop event="Destroy" name="resourceScrapIron" count="1,15" />
      <drop event="Fall" name="scrapMetalPile" count="1" prob="0.75" stick_chance="1" />
      <property name="Immunity" value="sickness;disease;wellness" />
      <property name="MaxTurnSpeed" value="280" />
      <property name="MoveSpeed" value=".3" />
      <property name="MoveSpeedAggro" value="1.2, 1.2" /> 
      <property name="MoveSpeedPanic" value="1.2" />
      <property name="LootDropProb" value="0.25" /> 
      <property name="LootDropEntityClass" value="EntityLootContainerStrong" />
      <property name="TimeStayAfterDeath" value="300" />
      <property name="DeadBodyHitPoints" value="300" />
      <property name="CanClimbLadders" value="true" />
      <property name="ExperienceGain" value="550" /> 
      <effect_group name="Base Effects">
      <passive_effect name="HealthMax" operation="base_set" value="400" />
      <passive_effect name="HealthMax" operation="perc_set" value="1" />
      <passive_effect name="StaminaMax" operation="base_set" value="200" />
      <passive_effect name="PhysicalDamageResist" operation="base_set" value="50" />
      <passive_effect name="BuffResistance" operation="base_add" value="2" tags="buffInjuryBleeding,buffInjuryBleedingZombie,buffInfectionCatch" />
      <passive_effect name="BuffResistance" operation="base_add" value="2" tags="buffLegSprained,buffLegBroken,buffArmSprained,buffPlayerFallingDamage" />
      </effect_group>
            
-->
    </entity_class>
    <entity_class name="mechDeusEx2Template" extends="mechRobotArmy" help="this one leaps well, runs well, fires rocket +- but ok, hits melee. TODO: use some super fancy model that looks like a organic/implanted/cyborg hybrid with some neon ;). TODO: make it spawn the normal mechs every 300s, but bees every 60s. make bees have like just 1 shot HP, 10HP, and harvest almost nothing from them. TODO: contextualize DeusEx in docs. TODO: prevent mechs from dropping loot, least DeusEx itself.">
      <property name="HideInSpawnMenu" value="true" />
      <property name="Tags" value="entity,cp,mech,DeusEx,hostile"/>
      
      <property name="SizeScale" value="5" help="ISSUE: the laser of the sword from handRobotArmy does not scale with the model, it remains tiny"/>
      
      <!--      HELPGOOD: list materials: egrep '\.mat$' "../../"* -\-include="*.manifest" -iRIh |egrep '[^/]*blue[^/]*\.mat$' -i -->
      <property name="ReplaceMaterial0" value="#Entities/Zombies?Zombies/Materials/feral_radiated.mat" />
      
<!-- these 2 causes errors preventing spawning??
      <property name="IsEnemyEntity" value="true" />
      <property name="Faction" value="mech" help="TODO: it shall attack everyone, but would be cool to not attack animals"/>
      
      <property name="Faction" value="animals" help="it shall attack everyone, but is cool to not attack animals"/>
-->

      <property name="LootDropProb" value="0"/>
      <property name="TimeStayAfterDeath" value="6" help="TODO: make it explode and vanish like a grenade at least"/>
<!-- HELPGOOD: this would be good only if there was any way to keep just one DeusEx alive
      <property name="LootDropProb" value="1.0"/>
      <property name="LootDropEntityClass" value="EntityLootContainerDeusEx"/>
-->
      
      <property name="ExperienceGain" value="1750" />
      <property name="DismemberMultiplierHead" value="0" />
<!--
      <property name="HandItem" value="meleeWpnBatonT2StunBatonDeusEx" />
      parent_transform="Origin" local_offset="0,3.00,0" local_rotation="0,0,0"
      <property name="HandItem" value="handRobotArmyDeusEx" />
      <property name="HandItem" value="gunNPCRocketLauncherDeusEx"/>
      <property name="HandItem" value="gunNPCRocketLauncherDeusEx" parent_transform="Origin" local_offset="0,3,0" local_rotation="0,0,0"/>
-->
      <property name="MaxTurnSpeed" value="280" />
      <property name="MoveSpeed" value=".9" />
      <property name="MoveSpeedAggro" value="3.6, 4.2" /> 
      <property name="MoveSpeedPanic" value="4.2" />
      
      
  <!--
      <property name="AITarget-1" value="SetAsTargetIfHurt" data="class=EntityAlive,EntityNPC,EntityEnemyAnimal,EntityPlayer,EntityNPC,EntityPlayer,EntityZombie,EntityPlayer,EntitySurvivor,EntityEnemyAnimal"/>
-->
      
      <property name="CanClimbVertical" value="true" />
      <property name="JumpMaxDistance" value="25, 30" />
      
      <effect_group name="Base Effects">
        <passive_effect name="HealthMax" operation="base_set" value="31000" help="a bit less than teleport explosion, but it must be 1 hit kill, so damage resistance must be considered. try once to calc correct HP here."/>
        <passive_effect name="HealthChangeOT" operation="base_add" value="1000" help="TODO: say: self repair 3d printing system activated beep"/>

        <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKDeusExDebuff" />
        <triggered_effect trigger="onOtherDamagedSelf" action="RemoveBuff" target="self" buff="buffGSKDeusExDebuff" help="FOE: rage if attacked by player; FRIEND: will look like it is just following the player;">
          <requirement name="EntityTagCompare" tags="player" target="other"/>
        </triggered_effect>
      </effect_group>
    </entity_class>
    <entity_class name="mechDeusEx2RocketL" extends="mechDeusEx2Template" help="is a player's enemy. TODO: hitting it with rockets should temporarily disable the auto regeneration for 5s stackable (shall be more than the time required to fire it non stop), so could be finished with shots too">
			<property name="NavObject" value="navDeusExInRage" />
      <property name="HideInSpawnMenu" value="false" />
      <property name="Tags" value="entity,cp,mech,DeusEx,DeusExAngry,hostile"/>
      <property name="SoundRandomTime" value="20"/>
      
<!-- HELPGOOD:
      this is light red is very good, looks like energy, it is transparent tho
        <property name="ReplaceMaterial0" value="#Other/Items?Food/Materials/jar_liquid_red_tea.mat" />
      this red is too dark
        <property name="ReplaceMaterial0" value="#Entities/LootContainers?Materials/backpack_dropped_red.mat" />
      this light red texture didnt fit well
        <property name="ReplaceMaterial0" value="#Entities/LootContainers?Materials/zpackRed.mat" />
-->
      <property name="ReplaceMaterial0" value="#Other/Items?Food/Materials/jar_liquid_red_tea.mat" />
      
      <property name="ItemsOnEnterGame.GameModeSurvival" value="gunNPCRocketLauncherDeusEx,ammoNPCRocketHE" help="ISSUE: the rocket is fired from the feet..."/>
      <property name="ItemsOnEnterGame.GameModeSurvivalSP" value="gunNPCRocketLauncherDeusEx,ammoNPCRocketHE"/>
      <property name="ItemsOnEnterGame.GameModeSurvivalMP" value="gunNPCRocketLauncherDeusEx,ammoNPCRocketHE"/>
      
      <property name="AITask-1" value="BreakBlock" />
      <property name="AITask-2" value="Territorial" />
      <property name="AITask-3" value="RangedAttackTarget" data="itemType=1;cooldown=15;duration=3;minRange=1;maxRange=60"/>
      <property name="AITask-4" value="Leap" />
<!--
      <property name="AITask-5" value="ApproachAndAttackTarget" data="class=EntityAlive,0,EntityZombie,0,EntityNPC,0,EntityPlayer,100,EntitySurvivor,0,EntityBandit,0,EntityAnimalRabbit,0" />
-->
<!--
      <property name="AITask-5" value="ApproachAndAttackTarget" data="class=EntityZombie,90,EntityNPC,15,EntityPlayer,95,EntitySurvivor,15,EntityBandit,15"/>
-->
      <property name="AITask-5" value="ApproachAndAttackTarget" data="class=EntityPlayer,95,EntityZombie,75"/>
      <property name="AITask-6" value="ApproachSpot" />
      <property name="AITask-7" value="Look" />
      <property name="AITask-8" value="Wander" />
      <property name="AITask-9" value="" />
      <property name="AITarget-1" value="SetAsTargetIfHurt"/>
      
<!-- HELPGOOD:ISSUE: this would be ok if I could find a way to keep only one DeusEx alive...
      <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble" />
      <drop event="Harvest" name="resourceMechanicalParts" tag="salvageHarvest" count="30" /> 
      <drop event="Harvest" name="resourceScrapIron" tag="salvageHarvest" count="27" />
      <drop event="Harvest" name="resourceElectricParts" tag="salvageHarvest" count="36" /> 
      <drop event="Harvest" name="resourceScrapPolymers" tag="salvageHarvest" count="27" />
      <drop event="Harvest" name="resourceMetalPipe" count="3" tag="salvageHarvest" />
      <drop event="Harvest" name="carBattery" count="3" prob="0.5" tag="salvageHarvest" />
      <drop event="Harvest" name="resourceSpring" count="6,12" tag="salvageHarvest" />
      <drop event="Harvest" name="resourceScrapIron" count="9,21" tag="allHarvest" />
      <drop event="Destroy" name="resourceScrapIron" count="3,45" />
      <drop event="Fall" name="scrapMetalPile" count="1" prob="0.75" stick_chance="1" />      
-->
      
      <property name="HandItem" value="handRobotArmyDeusEx" help="replaced by ItemsOnEnterGame?"/>
      
      <effect_group help="enemy DeusEx buffs">
        <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKDeusExEnemy12" />
        <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKDeusExCountAndKill" />
      </effect_group>
<!--
      <effect_group help="enemy DeusEx wins">
        <triggered_effect trigger="onSelfKilledOther" action="AddBuff" target="other" buff="buffGSKDeusExWinsPLAYERBUFF" target_tags="player"/>
      </effect_group>
-->
    </entity_class>
    <entity_class name="mechDeusEx2Calm" extends="mechDeusEx2Template">
			<property name="NavObject" value="navDeusExCalm" />
      <property name="HideInSpawnMenu" value="false" />
      <property name="Tags" value="entity,cp,mech,DeusEx,DeusExCalm,friendly"/>
     
<!--
      <property name="ReplaceMaterial0" value="#Other/Items?Food/Materials/blueberry_filling.mat" />
-->
      <property name="ReplaceMaterial0" value="#@modfolder(0-CreaturePackMechs):Resources/RobotArmyMat.unity3d?metal_albedo" help="equal to vanilla mechRobotArmy"/>
      
<!-- HELPGOOD: this could prevent hired follower attacking it, but will also preventing it following us after we attack it right?
      <property name="IsEnemyEntity" value="false" />       
-->
      
      <!--      HELPGOOD: these removed sounds are good to keep them mostly quiet while following you -->
			<property name="SoundRandomTime" value="300.0" />
			<property name="SoundRandom" value="RobotRandom" />
			<property name="SoundAlert" value="" />
			<property name="SoundAttack" value="" />
			<property name="SoundDeath" value="RobotDie" />
			<property name="SoundHurt" value="RobotRandom" />
			<property name="SoundSense" value="" /> 
      
      <!--      HELPGOOD: these tasks are important to prevent this friendly DeusEx causing trouble by not leaping and not attacking with rockets. You can shoot them to make them follow you, but then you can use the special item to make them stop following again.-->
      <property name="AITask-1" value="BreakBlock" />
      <property name="AITask-2" value="Territorial" />
      <property name="AITask-3" value="ApproachAndAttackTarget" data="class=EntityVulture,100,EntityZombieDog,100,EntityZombie,100" help="purges zombified organisms"/>
      <property name="AITask-4" value="ApproachSpot" />
      <property name="AITask-5" value="Look" />
      <property name="AITask-6" value="Wander" />
      <property name="AITask-7" value="" />
      <property name="AITarget-1" value="SetAsTargetIfHurt" help="w/o damage this works like making it follow the player"/>
      <property name="AITarget-2" value="SetNearestEntityAsTarget" data="class=EntityZombie,95"/>
      
<!-- HELPGOOD:ISSUE: this would be ok if I could find a way to keep only one DeusEx alive...
      <drop event="Harvest" name="terrStone" count="0" tool_category="Disassemble" />
      <drop event="Harvest" name="resourceMechanicalParts" tag="salvageHarvest" count="30" /> 
      <drop event="Harvest" name="resourceScrapIron" tag="salvageHarvest" count="27" />
      <drop event="Harvest" name="resourceElectricParts" tag="salvageHarvest" count="36" /> 
      <drop event="Harvest" name="resourceScrapPolymers" tag="salvageHarvest" count="27" />
      <drop event="Harvest" name="resourceMetalPipe" count="3" tag="salvageHarvest" />
      <drop event="Harvest" name="carBattery" count="3" prob="0.5" tag="salvageHarvest" />
      <drop event="Harvest" name="resourceSpring" count="6,12" tag="salvageHarvest" />
      <drop event="Harvest" name="resourceScrapIron" count="9,21" tag="allHarvest" />
      <drop event="Destroy" name="resourceScrapIron" count="3,45" />
      <drop event="Fall" name="scrapMetalPile" count="1" prob="0.75" stick_chance="1" />      
-->
      
      <property name="HandItem" value="handRobotArmyDeusExCalm2" help="this wont damage the player"/>
      
      <effect_group help="friendly DeusEx buffs">
        <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKDeusExFriendly" />
        <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKDeusExCountAndKill" />
        <triggered_effect trigger="onSelfKilledOther" action="ModifyCVar" cvar="iDeusExExpCredit" operation="add" value="100"/>
      </effect_group>
    </entity_class>
    <entity_class name="_mechDeusEx3RocketL" extends="npcAdvancedRocketLTemplate" help="FAIL: npcRocketLTemplate TODO: use some super fancy model that looks like a organic/implanted/cyborg hybrid with some neon ;). TODO: make it spawn the normal mechs every 300s, but bees every 60s. make bees have like just 1 shot HP, 10HP, and harvest almost nothing from them. TODO: contextualize DeusEx in docs. TODO: prevent mechs from dropping loot, least DeusEx itself.">
      <property name="Tags" value="entity,male,npc,ranged,bandit,UMA2" />
      <property name="LookAtAngle" value="0" /> 
      <property name="PhysicsBody" value="ASCharacterStandard" />
      <property name="Names" value="DeusExMachina" />	
      <property name="Mesh" value="#@modfolder(1-VaultDwellerzPack):Resources/VaultDwellerz.unity3d?ReconMaleDark" /> 
      <property name="LootDropProb" value="1.0"/>
      <property name="LootDropEntityClass" value="EntityLootContainerRegularWithRocket"/>
      
      <property name="IsEnemyEntity" value="true" />
      <property name="Faction" value="animals" help="it shall attack everyone, but is cool to not attack animals"/>
      
      <property name="SizeScale" value="5"/>
      <property name="ExperienceGain" value="2500" />
      <property name="HideInSpawnMenu" value="false" />
      <property name="MoveSpeed" value=".9" />
      <property name="MoveSpeedAggro" value="3.6, 4.2" /> 
      <property name="MoveSpeedPanic" value="4.2" />
      <property name="AITask-1" value="BreakBlock" />
      <property name="AITask-2" value="Territorial" />
      <property name="AITask-3" value="RangedAttackTarget" data="itemType=1;cooldown=15;duration=3;minRange=1;maxRange=30"/>
      <property name="AITask-4" value="Leap" />
      <property name="AITask-5" value="ApproachAndAttackTarget" data="class=EntityAlive,0,EntityZombie,0,EntityNPC,0,EntityPlayer,100,EntitySurvivor,0,EntityBandit,0,EntityAnimalRabbit,0" />
      <property name="AITask-6" value="ApproachSpot" />
      <property name="AITask-7" value="Look" />
      <property name="AITask-8" value="Wander" />
      <property name="AITask-9" value="" />
      <property name="AITarget-1" value="SetAsTargetIfHurt"/>
<!--
      <property name="AITarget-1" value="SetAsTargetIfHurt" data="class=EntityAlive,EntityNPC,EntityEnemyAnimal,EntityPlayer,EntityNPC,EntityPlayer,EntityZombie,EntityPlayer,EntitySurvivor,EntityEnemyAnimal"/>
-->
      <property name="CanClimbVertical" value="true" />
      <property name="JumpMaxDistance" value="25, 30" />
      <effect_group name="Base Effects">
        <passive_effect name="PhysicalDamageResist" operation="base_set" value="0" help="it's power is on healing self"/>
        <passive_effect name="HealthMax" operation="base_set" value="31000" help="a bit less than teleport explosion, but it must be 1 hit kill, so damage resistance must be considered. try once to calc correct HP here."/>
        <passive_effect name="HealthChangeOT" operation="base_add" value="5000" help="TODO: say: self repair 3d printing system activated beep"/>
      </effect_group>
    </entity_class> 
    <entity_class name="_mechDeusEx4RocketL" extends="mechDeusEx2RocketL" help="FAIL: walks on air... shoot rocket from feet..">
      <property name="Mesh" value="#@modfolder(1-VaultDwellerzPack):Resources/VaultDwellerz.unity3d?ReconMaleDark" /> 
      <property name="ReplaceMaterial2" value="#Entities/Zombies?Zombies/Materials/feral_radiated.mat" />
      <property name="MoveSpeed" value=".2" />
      <property name="MoveSpeedAggro" value="0.7, 0.8" /> 
      <property name="MoveSpeedPanic" value="0.8" />
      <property name="Tags" value="entity,cp,mech,mechRobotArmy,UMA2"/>
    </entity_class>
<!--
    <entity_class name="npcMechMeleeDeusEx3" extends="npcMechMeleeDeusEx">
      <property name="SizeScale" value="3" />
    </entity_class>  
    <entity_class name="npcMechMeleeDeusEx2" extends="npcMechMeleeDeusEx">
      <property name="SizeScale" value="2" />
    </entity_class>  
    <entity_class name="npcMechMeleeDeusEx4" extends="npcMechMeleeDeusEx">
      <property name="SizeScale" value="4" />
    </entity_class>  
    <entity_class name="npcMechMeleeDeusEx4dot5" extends="npcMechMeleeDeusEx">
      <property name="SizeScale" value="4.5" />
    </entity_class>  
-->
  </append>
  <remove xpath="/entity_classes/entity_class[@name='mechRobotArmy']/property[@name='ReplaceMaterial0']" help="This is to let DeusExFriend look like the nice powerful one :)"/>
  
  
<!--
        <requirement name="HasBuff" buff="buffGSKNPCHiredFollowingPowerArmorUse" />
      </triggered_effect>
    <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffGSKNPCHiredFollowingPowerArmorUse" />
        <requirement name="!EntityTagCompare" tags="powerarmor"/>
-->
  
<!-- didnt work
  <append xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider')]">
    <property name="CanClimbVertical" value="true" />
    <property name="JumpMaxDistance" value="10, 15" />
  </append>
-->
  
<!--
  <append xpath="/entity_classes" help="zombies for bloodmoon">
-->
    <!-- HELP GOOD:CODEGEN: clear;egrep 'name="[^"]+Radiated"' ../* -\-include="entityclasses.xml" -irIoh |sort -u |sed -r "s%name=\"(.*)Radiated\"%<entity_class name=\"\1RadiatedBM\" extends=\"\1Radiated\"><property name=\"CanClimbVertical\" value=\"true\" /><property name=\"JumpMaxDistance\" value=\"30, 35\" /></entity_class>%" -->
    <!-- HELP GOOD:CODEGEN: clear;egrep 'name="[^"]+Radiated"' ../* -\-include="entityclasses.xml" -irIoh |sort -u |sed -r "s%name=\"(.*)Radiated\"%<entity_class name=\"\1RadiatedBM\" extends=\"\1Radiated\"/>%" -->
<!--
    <entity_class name="animalSpider01RadiatedBM" extends="animalSpider01Radiated"/>
    <entity_class name="animalSpider02RadiatedBM" extends="animalSpider02Radiated"/>
    <entity_class name="animalSpider03RadiatedBM" extends="animalSpider03Radiated"/>
    <entity_class name="animalZombieVultureRadiatedBM" extends="animalZombieVultureRadiated"/>
    <entity_class name="zombieArleneRadiatedBM" extends="zombieArleneRadiated"/>
    <entity_class name="zombieBikerRadiatedBM" extends="zombieBikerRadiated"/>
    <entity_class name="zombieBoeRadiatedBM" extends="zombieBoeRadiated"/>
    <entity_class name="zombieBurntRadiatedBM" extends="zombieBurntRadiated"/>
    <entity_class name="zombieBusinessManRadiatedBM" extends="zombieBusinessManRadiated"/>
    <entity_class name="zombieDarleneRadiatedBM" extends="zombieDarleneRadiated"/>
    <entity_class name="zombieFatCopRadiatedBM" extends="zombieFatCopRadiated"/>
    <entity_class name="zombieFatHawaiianRadiatedBM" extends="zombieFatHawaiianRadiated"/>
    <entity_class name="zombieFemaleFatRadiatedBM" extends="zombieFemaleFatRadiated"/>
    <entity_class name="zombieJanitorRadiatedBM" extends="zombieJanitorRadiated"/>
    <entity_class name="zombieJoeRadiatedBM" extends="zombieJoeRadiated"/>
    <entity_class name="zombieLabRadiatedBM" extends="zombieLabRadiated"/>
    <entity_class name="zombieLumberjackRadiatedBM" extends="zombieLumberjackRadiated"/>
    <entity_class name="zombieMaleHazmatRadiatedBM" extends="zombieMaleHazmatRadiated"/>
    <entity_class name="zombieMarleneRadiatedBM" extends="zombieMarleneRadiated"/>
    <entity_class name="zombieMoeRadiatedBM" extends="zombieMoeRadiated"/>
    <entity_class name="zombieMutatedRadiatedBM" extends="zombieMutatedRadiated"/>
    <entity_class name="zombieNurseRadiatedBM" extends="zombieNurseRadiated"/>
    <entity_class name="zombiePartyGirlRadiatedBM" extends="zombiePartyGirlRadiated"/>
    <entity_class name="zombieScreamerRadiatedBM" extends="zombieScreamerRadiated"/>
    <entity_class name="zombieSkateboarderRadiatedBM" extends="zombieSkateboarderRadiated"/>
    <entity_class name="zombieSoldierRadiatedBM" extends="zombieSoldierRadiated"/>
    <entity_class name="zombieSpiderRadiatedBM" extends="zombieSpiderRadiated"/>
    <entity_class name="zombieSteveRadiatedBM" extends="zombieSteveRadiated"/>
    <entity_class name="zombieTomClarkRadiatedBM" extends="zombieTomClarkRadiated"/>
    <entity_class name="zombieUtilityWorkerRadiatedBM" extends="zombieUtilityWorkerRadiated"/>
    <entity_class name="zombieWightRadiatedBM" extends="zombieWightRadiated"/>
    <entity_class name="zombieYoRadiatedBM" extends="zombieYoRadiated"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'zombie') and contains(@name,'RadiatedBM') and not(contains(@name,'Vulture'))]">
    <property name="CanClimbVertical" value="true" help="not working?" />
    <property name="JumpMaxDistance" value="30, 35" help="not working?" />
  </append>
  <append xpath="/entity_classes/entity_class[@name='animalZombieVultureRadiatedBM']">
    <property name="HandItem" value="meleeHandAnimalZombieVultureRadiatedBM"/>
  </append>
-->
<!--
  <append xpath="/entity_classes">
    <entity_class name="vehicleGSKNPCHelperVehicleBicyclePseudo">
      <property name="Tags" value="vehicle" />
      <property name="Class" value="EntityBicycle" />
      <property name="Parent" value="Cars" />
      <property name="Prefab" value="#Entities/Vehicles?bicycle_Prefab.prefab" />
      <property name="ModelType" value="Standard" />
      <property name="SizeScale" value="5" />
      <property name="SurfaceCategory" value="metal" />
      <property name="IgnoreTrigger" value="true" />
      <property name="LootListAlive" value="vehicleBicycle" />
      <property name="IsEnemyEntity" value="false" />
      <property name="Explosion.ParticleIndex" value="6" />
      <property name="Explosion.RadiusBlocks" value="1" />
      <property name="Explosion.RadiusEntities" value="1" />
      <property name="RotateToGround" value="true" />
      <property name="Faction" value="None" />
      <property name="MapIcon" value="ui_game_symbol_bicycle" />
      <property name="NavObject" value="bicycle" />
    </entity_class>
  </append>
-->
	
	<set xpath="/entity_classes/entity_class[starts-with(@name,'EntityLootContainer')]/property[@name='HideInSpawnMenu']/@value" help="if the player already has access to the spawn menu, there is no point in preventing spawning loot bags to workaround bugs and glitches and during mod development">false</set>

	<append xpath="/entity_classes">
		<entity_class name="entLandMineFire">
			<property name="Class" value="EntityZombieCop"/>
			<property name="SoundExplodeWarn" value="charge_beep"/>
			
			<property name="ModelType" value="Custom" />
			<property name="Prefab" value="Backpack" />
			<property name="Parent" value="Backpack" />
			<property name="IsEnemyEntity" value="true" />
			<property name="TimeStayAfterDeath" value="0" />
			<property name="Faction" value="none" />
			<property name="HideInSpawnMenu" value="false" />
			
<!-- HELPGOOD: 
			this one shows only the top middle falling the remainder into the ground, the hit check seems to be the center of the 3d model
			<property name="Mesh" value="@:Entities/LootContainers/tier4LootChestPrefab.prefab" />
			<property name="SizeScale" value="0.25" />
			
			this wont work!
			<property name="Mesh" value="@:Other/Items/Weapons/Explosive/trapMineAirFilter_01Prefab.prefab" />
			<property name="SizeScale" value="2.0" />
			
			the grenade falls somewhat thru the ground too but is more coherent at least
-->
			<property name="Mesh" value="@:Other/Items/Weapons/Ranged/Grenade/GrenadePrefab.prefab" />
			<property name="SizeScale" value="3.0" />
			
			<property name="Explosion.ParticleIndex" value="10"/>
			<property name="Explosion.Duration" value="8"/>
			<property name="Explosion.BlastPower" value="35"/>
			<property name="Explosion.DamageBonus.stone" value=".1"/>
			<property name="Explosion.DamageBonus.metal" value="0"/>
			<property name="Explosion.DamageBonus.earth" value="0"/>
			<property name="Explosion.DamageBonus.water" value="0"/>
			<property name="Explosion.DamageBonus.wood" value="6"/>
			<property name="Explosion.RadiusBlocks" value="5"/>
			<property name="Explosion.RadiusEntities" value="6"/>
			<property name="Explosion.BlockDamage" value="1000"/>
			<property name="Explosion.EntityDamage" value="100"/>
			<property name="Explosion.Buff" value="buffBurningMolotov"/>
			<effect_group name="Base Effects">
				<passive_effect name="HealthMax" operation="base_set" value="125" />
			</effect_group>
			
			<property name="Tags" value="entity"/>
			<property name="WalkType" value="7" />
			<property name="Mass" value="160" />
			<property name="PainResistPerHit" value="1" />
			<property name="MoveSpeedAggro" value="0.3, 1.35" /> <!-- slim, regular -->
			<property name="HandItem" value="meleeHandZombieBurning" />
			<property name="HandItemCrawler" value="meleeHandZombieBurningCrawler" />
			<property name="LootDropProb" value="0"/>
		</entity_class>
		<entity_class name="entLandMineFrag" extends="entLandMineFire">
<!--
			<property name="extends" value="entLandMineFire"/>
-->
			<property name="Explosion.ParticleIndex" value="11"/>
			<property name="Explosion.BlastPower" value="500"/>
			<property name="Explosion.Buff" value=""/>
		</entity_class>		
	</append>

    
</GhussakTweaks>
