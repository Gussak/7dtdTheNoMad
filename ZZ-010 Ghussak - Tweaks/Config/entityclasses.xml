<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[(@trigger='onSelfEnteredGame' or @trigger='onSelfRespawn') and @action='AddBuff' and @target='self']/@buff">,buffPlayerEnhancesNearbyFriendlyNPCs1,buffLeaderLimitsHiredNPCsAmount86,buffDrinkRainWater58,buffGSKRespawnPreventWaterBkp1,buffGSKShowWaterBkp2,buffGSKBkpWaterVal53,buffGSKHazardWeatherMiasmaDirty39,buffGSKDenyGoreHarvest,buffGSKProperSwimming25,buffGSKAllHazardsCheck20,buffGSKRadResistWork14,buffGSKHeatColdProtClothDmgKeep12,buffGSKChemUseSideEffects11,buffGSKBloodmoonZombiesPowerChk9,buffGSKTeslaOverchargeDmg54,buffGSKPermanentGenericCheck1,buffGSKMutant_ChkAndApplyOnMobs1</append>
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[@trigger='onSelfEnteredGame' and @action='AddBuff' and @target='self']/@buff">,buffGSKDetectEnterGame,buffGSKConfigGeneric,buffGSKGodModeFirstSpawn</append>
  <!-- HELPGOOD: everytime player joins the game. the 1st random teleport to ground MUST be after the enter game detection -->
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[@trigger='onSelfRespawn' and @action='AddBuff' and @target='self']/@buff">,buffGSKDetectRespawn,buffGSKRespawnNoMadBundlesAllowCrafting</append>
  <!-- HELPGOOD: only after death/resurrect. buffGSKDetectRespawn must be b4 buffGSKRespawnNoMadBundlesAllowCrafting -->
  <set xpath="/entity_classes/entity_class[@name='animalBoar']/property[@name='Faction']/@value">aggressiveanimalsmedium</set>
  <append xpath="/entity_classes/entity_class[@name='animalBoar']">
    <property name="AITask-1" value="BreakBlock"/>
    <property name="AITask-2" value="Territorial"/>
    <property name="AITask-3" value="RunawayWhenHurt" data="runChance=0.5;healthPer=0.3;healthPerMax=0.6"/>
    <property name="AITask-4" value="ApproachAndAttackTarget" data="class=EntityPlayer,15,EntityZombie,20,EntityNPC,15"/>
    <property name="AITask-5" value="ApproachSpot"/>
    <property name="AITask-6" value="Look"/>
    <property name="AITask-7" value="Wander"/>
    <property name="AITask-8" value=""/>
    <property name="AITarget-1" value="SetAsTargetIfHurt"/>
    <property name="AITarget-2" value="BlockingTargetTask"/>
    <property name="AITarget-3" value="SetNearestEntityAsTarget" data="class=EntityPlayer,14,8,EntityZombie,0,0,EntityNPC,14,8"/>
    <property name="AITarget-4" value=""/>
    <effect_group name="Attack Buff">
      <triggered_effect trigger="onSelfFirstSpawn" action="AddBuff" target="self" buff="buffNPCModThreat"/>
      <triggered_effect trigger="onSelfAttackedOther" action="AddBuff" target="self" buff="buffNPCModAttacking"/>
    </effect_group>
  </append>
  <set xpath="/entity_classes/entity_class[@name='animalBoar']/property[@name='MoveSpeedAggro']/@value">1.35, 1.40</set>
  <append xpath="/entity_classes/entity_class[@name='animalBear']">
    <property name="MoveSpeedAggro" value="1.45, 1.50"/>
  </append>
  <set xpath="/entity_classes/entity_class[@name='animalBossGrace']/property[@name='MoveSpeedAggro']/@value">1.45, 1.50</set>
  <append xpath="/entity_classes/entity_class[@name='animalWolf']">
    <property name="MoveSpeedAggro" value="1.50, 1.55"/>
  </append>
  <set xpath="/entity_classes/entity_class[@name='animalZombieDog']/property[@name='MoveSpeedAggro']/@value">1.55, 1.60</set>
  <set xpath="/entity_classes/entity_class[@name='animalDireWolf']/property[@name='MoveSpeedAggro']/@value">1.55, 1.60</set>
  <append xpath="/entity_classes/entity_class[@name='animalDoe']">
    <property name="MoveSpeedPanic" value="1.80"/>
  </append>
  <set xpath="/entity_classes/entity_class[@name='animalStag']/property[@name='MoveSpeedPanic']/@value">1.85</set>
  <set xpath="/entity_classes/entity_class[@name='animalMountainLion']/property[@name='MoveSpeedAggro']/@value">3.1, 3.3</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name, 'npc')]/property[contains(@name, 'SoundRandomTime')]/@value">600</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name, 'animal')]/property[contains(@name, 'SoundRandomTime')]/@value">60</set>
  <append xpath="/entity_classes/entity_class[       (starts-with(@name, 'npc') and not(starts-with(@name,'npcHarley'))) or       starts-with(@name, 'survivor')     ]/effect_group[@name='Base Effects']">
    <passive_effect name="HealthMax" operation="base_set" value="75"/>
  </append>
  <set xpath="/entity_classes/entity_class[contains(@name, 'zombie')]/property[contains(@name, 'LootDropProb')]/@value">0.05</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'npc')]/property[contains(@name, 'LootDropProb')]/@value">0.33</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'Raider') or starts-with(@name,'npcHarley')]/property[contains(@name, 'LootDropProb')]/@value">1.00</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name, 'npcHarley')]/property[contains(@name, 'LootDropProb')]/@value">1.00</set>
  <append xpath="/entity_classes/entity_class[contains(@name, 'survivor')]">
    <property name="LootDropProb" value="0.50"/>
  </append>
  <set xpath="/entity_classes/entity_class[contains(@name, 'animal')]/property[contains(@name, 'LootDropProb')]/@value">0.25</set>
  <append xpath="/entity_classes/entity_class[contains(@name, 'animal')]">
    <property name="TimeStayAfterDeath" value="3600"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'animalZombie')]">
    <property name="TimeStayAfterDeath" value="7200"/>
  </append>
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLootContainerRegular')]/property[contains(@name, 'Mesh')]/@value">#Entities/LootContainers?zpackBluePrefab.prefab</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLootContainerStrong')]/property[contains(@name, 'Mesh')]/@value">#Entities/LootContainers?zpackRedPrefab.prefab</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLootContainerBoss')]/property[contains(@name, 'Mesh')]/@value">#Entities/LootContainers?zpackPrefab.prefab</set>
  <append xpath="/entity_classes">
    <entity_class name="EntityLootContainerRegularWithLBow" extends="EntityLootContainerRegular">
      <property name="Mesh" value="#Entities/LootContainers?zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithLBow"/>
    </entity_class>
    <entity_class name="EntityLootContainerRegularWithXBow" extends="EntityLootContainerRegular">
      <property name="Mesh" value="#Entities/LootContainers?zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithXBow"/>
    </entity_class>
    <entity_class name="EntityLootContainerRegularWithRifle" extends="EntityLootContainerRegular">
      <property name="Mesh" value="#Entities/LootContainers?zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithRifle"/>
    </entity_class>
    <entity_class name="EntityLootContainerRegularWithPistol" extends="EntityLootContainerRegular">
      <property name="Mesh" value="#Entities/LootContainers?zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithPistol"/>
    </entity_class>
    <entity_class name="EntityLootContainerRegularWithShotgun" extends="EntityLootContainerRegular">
      <property name="Mesh" value="#Entities/LootContainers?zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithShotgun"/>
    </entity_class>
    <entity_class name="EntityLootContainerRegularWithAK47" extends="EntityLootContainerRegular">
      <property name="Mesh" value="#Entities/LootContainers?zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithAK47"/>
    </entity_class>
    <entity_class name="EntityLootContainerRegularWithRocket" extends="EntityLootContainerRegular">
      <property name="Mesh" value="#Entities/LootContainers?zpackPrefab.prefab"/>
      <property name="LootListOnDeath" value="lootPackRegularWithRocket"/>
    </entity_class>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'Raider') or starts-with(@name,'npcHarley')]">
    <property name="LootDropEntityClass" value="EntityLootContainerBandit"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'LBow')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithLBow"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'XBow')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithXBow"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'Pistol') or contains(@name, 'SMG')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithPistol"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'Shotgun')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithShotgun"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'Rifle')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithRifle"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'AK47') or contains(@name, 'PipeMG') or contains(@name, 'M60')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithAK47"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name, 'Rocket')]">
    <property name="LootDropEntityClass" value="EntityLootContainerRegularWithRocket"/>
  </append>
  <set xpath="/entity_classes/entity_class[contains(@name, 'EntityLoot')]/property[contains(@name, 'TimeStayAfterDeath')]/@value">36000</set>
  <set xpath="/entity_classes/entity_class[contains(@name, 'Backpack')]/property[contains(@name, 'TimeStayAfterDeath')]/@value">72000</set>
  <set xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/passive_effect[@name='JumpStrength' and @tags='crouching']/@value">0.16</set>
  <set xpath="/entity_classes/entity_class[@name='playerMale']/property[     @name='ItemsOnEnterGame.GameModeSurvival'   or     @name='ItemsOnEnterGame.GameModeSurvivalSP' or     @name='ItemsOnEnterGame.GameModeSurvivalMP'    ]/@value">GSKCFGTeslaTeleportToBiome,GSKTRFirstSpawnBundle</set>
  <append xpath="/entity_classes/entity_class[@name='sc_General']">
    <property name="Buffs" value="buffGSKAirDropHighlight"/>
    <property name="Tags" value="perkAT01,perkAT02,perkAT03"/>
    <property name="TrackerIcon" value="map_supply_crate"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='sc_General']">
    <property name="Buffs" value="buffGSKAirDropHighlight"/>
    <property name="Tags" value="perkAT01,perkAT02,perkAT03"/>
    <property name="TrackerIcon" value="map_supply_crate"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name,'Radiated')]/property[@name='Tags']/@value">,perkAT01,perkAT02,perkAT03</append>
  <append xpath="/entity_classes/entity_class[contains(@name,'Radiated')]">
    <property name="NavObject" value="radiationSource"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='npcRocketLTemplate']">
    <property name="ItemsOnEnterGame.GameModeSurvival" value="gunNPCRocketLauncher,ammoNPCRocketFragFriendly"/>
    <property name="ItemsOnEnterGame.GameModeSurvivalSP" value="gunNPCRocketLauncher,ammoNPCRocketFragFriendly"/>
    <property name="ItemsOnEnterGame.GameModeSurvivalMP" value="gunNPCRocketLauncher,ammoNPCRocketFragFriendly"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='RaiderSluggerRocketL' or @name='npcHarleyRocketL']">
    <property name="ItemsOnEnterGame.GameModeSurvival" value="gunNPCRocketLauncher,ammoNPCRocketHE"/>
    <property name="ItemsOnEnterGame.GameModeSurvivalSP" value="gunNPCRocketLauncher,ammoNPCRocketHE"/>
    <property name="ItemsOnEnterGame.GameModeSurvivalMP" value="gunNPCRocketLauncher,ammoNPCRocketHE"/>
  </append>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'zombie')]/property[@name='TimeStayAfterDeath']/@value">6</set>
  <!-- HELPGOOD: A patch to friendly raiders to show up in the hired followers list -->
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Club')]/@extends">npcAdvancedClubTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Knife')]/@extends">npcAdvancedKnifeTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Bat')]/@extends">npcAdvancedBatTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Axe')]/@extends">npcAdvancedAxeTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'Machete')]/@extends">npcAdvancedMacheteTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'AK47')]/@extends">npcAdvancedAK47Template</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'SMG')]/@extends">npcAdvancedSMGTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'DPistol')]/@extends">npcAdvancedDPistolTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'TRifle')]/@extends">npcAdvancedTRifleTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'PipeMG')]/@extends">npcAdvancedPipeMGTemplate</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'M60')]/@extends">npcAdvancedM60Template</set>
  <set xpath="/entity_classes/entity_class[starts-with(@name,'Raider') and contains(@name,'RocketL')]/@extends">npcAdvancedRocketLTemplate</set>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'npcRaider')]/property[@name='Tags']/@value">,cp,DRMid</append>
  <append xpath="/entity_classes/entity_class[@name='animalSnake' or starts-with(@name,'animalSpider')]">
    <drop event="Harvest" name="GSKsnakePoison" count="1,5" tag="butcherHarvest"/>
  </append>
  <append xpath="/entity_classes/entity_class[starts-with(@name,'zombieMutated')]/property[@name='Tags']/@value">,mutant</append>
  <append xpath="/entity_classes/entity_class[@name='animalRabbit' or @name='zombieMutated']">
    <property name="Buffs" value="buffGSKMutantRabbits"/>
    <property name="ParticleOnSpawn" value="ParticleEffects/RadiatedParticlesOnMesh" param1="SetShapeToMesh0" help="ISSUE: this particle here will error on log, but only once! so not a problem..."/>
    <drop event="Harvest" name="drugGSKAntiRadiation" count="7,28" tag="butcherHarvest"/>
    <drop event="Harvest" name="GSKsnakePoison" count="0,2" tag="butcherHarvest"/>
    <drop event="Harvest" name="drugGSKPsyonicsResist" count="0,3" tag="butcherHarvest"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieMutated']">
    <property name="Buffs" value="buffGSKMutantZombies"/>
  </append>
  <append xpath="/entity_classes/entity_class[contains(@name,'Radiated')]">
    <property name="Buffs" value="buffGSKRadiationAura"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieMutatedRadiated']">
    <property name="Buffs" value="buffGSKMutantZombies,buffGSKRadiationAura"/>
  </append>
  <append xpath="/entity_classes">
    <entity_class name="npcCosplayerAShotgun" extends="npcAdvancedAShotgunTemplate">
      <property name="LookAtAngle" value="0"/>
      <property name="SizeScale" value="1.1"/>
      <property name="Tags" value="entity,female,npc,ranged,cp,DRMid,UMA2"/>
      <property name="Faction" value="whiteriver"/>
      <property name="Names" value="Thalia,Amedee,Myriani,Dilya,Ilyrana,Saria,Aerith,Rina,Lyeecia,Maggwyn,Viessa,Tisha,Naexi,Lithoniel,Shaerra,Alyndra"/>
      <property name="DanceType" value="2"/>
      <property name="Mesh" value="#@modfolder(1-SurvivorzPack):Resources/Survivorz.unity3d?FemaleElvenArcherDark"/>
      <property name="SoundHurt" value="Player_Female/player2painlg"/>
      <property name="SoundHurtSmall" value="Player_Female/player2painsm"/>
      <property name="SoundDeath" value="Player_Female/player2death"/>
      <property name="SoundStamina" value="Player_Female/player2stamina"/>
      <property name="SoundDrownPain" value="Player_Female/player2drownpain"/>
      <property name="SoundWaterSurface" value="Player_Female/player2drownsurface"/>
      <property name="SoundDrownDeath" value="Player_Female/player2drowndeath"/>
      <property name="SoundJump" value="Player_Male/player2Jump"/>
      <property name="SoundLandSoft" value="Player_Male/player2LandSoft"/>
      <property name="SoundLandHard" value="Player_Male/player2LandHard"/>
      <property name="SoundPlayerLandThump" value="PlayerLandThump"/>
      <property name="SoundRandom" value="GurlzChatterRandom"/>
      <property name="SoundRandomTime" value="600"/>
      <property name="SoundAlert" value="Player_Female/player2stamina"/>
      <property name="SoundAttack" value="Player_Female/player2stamina"/>
      <property name="SoundSense" value="Player_Female/player2stamina"/>
      <property name="LootDropProb" value="0.33"/>
      <property name="LootDropEntityClass" value="EntityLootContainerRegularWithShotgun"/>
      <property name="HireCost" value="337"/>
      <effect_group name="Base Effects">
        <passive_effect name="PhysicalDamageResist" operation="base_set" value="10"/>
        <passive_effect name="HealthMax" operation="base_set" value="75"/>
      </effect_group>
    </entity_class>
  </append>
  <set xpath="/entity_classes/entity_class[@name='zombieArlene']/property[@name='DanceType']/@value">1</set>
  <remove xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider')]/property[@name='LootDropProb']"/>
  <remove xpath="/entity_classes/entity_class[starts-with(@name,'animalSpider')]/property[@name='LootDropEntityClass']"/>
  <append xpath="/entity_classes/entity_class[@name='zombieWightFeral']">
    <property name="MoveSpeedAggro" value="0.6, 8.0"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieWightRadiated']">
    <property name="MoveSpeedAggro" value="0.6, 12.0"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieDemolition']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionA"/>
    <property name="Explosion.RadiusBlocks" value="10"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieFatCop']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionA"/>
    <property name="Explosion.RadiusBlocks" value="5"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieFatCopFeral']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionA"/>
    <property name="Explosion.RadiusBlocks" value="6"/>
  </append>
  <append xpath="/entity_classes/entity_class[@name='zombieFatCopRadiated']">
    <property name="Explosion.Buff" value="buffGSKRadExplosionB"/>
    <property name="Explosion.RadiusBlocks" value="8"/>
  </append>
  <append xpath="/entity_classes/entity_class[         @name='zombieDemolition' or         starts-with(@name,'zombieUtilityWorker') or         starts-with(@name,'zombieSoldier') or         starts-with(@name,'zombieBiker')       ]">
    <effect_group help="patch for TSBX_Headshot_100: all that have helmet">
      <passive_effect name="DamageModifier" operation="perc_set" value="0.5" tags="head">
        <requirement name="CVarCompare" cvar="_difficulty" operation="Equals" value="2"/>
      </passive_effect>
      <passive_effect name="DamageModifier" operation="perc_set" value="0.5" tags="head">
        <requirement name="CVarCompare" cvar="_difficulty" operation="Equals" value="3"/>
      </passive_effect>
      <passive_effect name="DamageModifier" operation="perc_set" value="0.5" tags="head">
        <requirement name="CVarCompare" cvar="_difficulty" operation="Equals" value="4"/>
      </passive_effect>
      <passive_effect name="DamageModifier" operation="perc_set" value="0.5" tags="head">
        <requirement name="CVarCompare" cvar="_difficulty" operation="Equals" value="5"/>
      </passive_effect>
    </effect_group>
  </append>
</GhussakTweaks>
