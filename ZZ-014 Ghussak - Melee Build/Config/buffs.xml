<GhussakTweaks>

  <append xpath="/buffs">
    <buff name="buffGSKMarkedForJumpKick" hidden="true"><stack_type value="replace"/><duration value="3.0"/></buff>
    <buff name="buffGSKWorkaroundJumpKick" hidden="true"><stack_type value="replace"/><duration value="9.0" help="same of ragdoll duration"/>
      <effect_group>
        <passive_effect name="RunSpeed"  operation="perc_subtract" value="0.99"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="0.99"/>
        <passive_effect name="JumpStrength" operation="perc_subtract" value="0.99"/>
        <passive_effect name="AttacksPerMinute" operation="perc_subtract" value="0.99"/>
      </effect_group>
    </buff>
    <buff name="buffGSKCheckJumpKick" hidden="true"><stack_type value="replace"/><duration value="3.0"/>
      <update_rate value="0.1"/>
      <effect_group>
<!--
        <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="LT" value="75"/>
-->
        <triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffGSKWorkaroundJumpKick">
          <requirement name="HasBuff" target="other" buff="buffGSKMarkedForJumpKick" />
          <requirement name="EntityTagCompare" target="other" tags="animalSpider01,animalSpider02,animalSpider03" />
        </triggered_effect>
        <triggered_effect trigger="onSelfJump" action="Ragdoll" duration="9" force="250" target="selfAOE" range="2.5" target_tags="zombie,animal" help="TODO: add sound for kick. let spiders get stunned instead">
          <requirement name="HasBuff" target="other" buff="buffGSKMarkedForJumpKick" />
          <requirement name="!EntityTagCompare" target="other" tags="animalSpider01" />
          <requirement name="!EntityTagCompare" target="other" tags="animalSpider02" />
          <requirement name="!EntityTagCompare" target="other" tags="animalSpider03" />
        </triggered_effect>
        <triggered_effect trigger="onSelfJump" action="Ragdoll" duration="1" force="250" target="selfAOE" range="2.5" target_tags="bandit" help="raiders have fighting defensive skills, so allow just a small chance TODO: show dodge message">
          <requirement name="HasBuff" target="other" buff="buffGSKMarkedForJumpKick" />
          <requirement name="RandomRoll" seed_type="Random" min_max="0,100" operation="GT" value="85"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfJump" action="PlaySound" sound="player#powerattack" play_in_head="true"/>
        <triggered_effect trigger="onSelfJump" action="RemoveBuff" buff="buffGSKCheckJumpKick"/>
      </effect_group>
    </buff>
    
  </append>
  
</GhussakTweaks>
 
