<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/items">
    <item name="foodPineSeed">
      <property name="CustomIcon" value="treePlantedMountainPine1m"/>
      <property name="CustomIconTint" value="FFFF00"/>
      <property name="Tags" value="food"/>
      <property name="HoldType" value="31"/>
      <property name="DisplayType" value="foodWaterNegative"/>
      <property name="Meshfile" value="@:Other/Items/Misc/parcelPrefab.prefab"/>
      <property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
      <property name="Material" value="Morganic"/>
      <property name="Stacknumber" value="10"/>
      <property name="EconomicValue" value="20"/>
      <property name="SellableToTrader" value="false"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="0.5"/>
        <property name="Use_time" value="0.5"/>
        <property name="Sound_start" value="player_eating"/>
      </property>
      <property name="Group" value="Food/Cooking,CFFood/Cooking"/>
      <effect_group tiered="false" name="Food Tier 0/1">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$foodAmountAdd" operation="add" value="10"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="foodHealthAmount" operation="add" value="5"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyStats" stat="water" operation="add" value="-5"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar=".foodStaminaBonusAdd" operation="add" value="10"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffProcessConsumables"/>
        <display_value name="$waterAmountAdd" value="-5"/>
      </effect_group>
    </item>
    <item name="resourceAnimalFatBall" help="simple x10 animal fat, and the craft time considers the consume usage time for 1 animal fat">
      <property name="HoldType" value="31"/>
      <property name="DisplayType" value="foodRaw"/>
      <property name="DescriptionKey" value="resourceAnimalFatDesc"/>
      <property name="CustomIcon" value="resourceAnimalFat"/>
      <property name="CustomIconTint" value="200,128,128"/>
      <property name="Meshfile" value="@:Other/Items/Misc/parcelPrefab.prefab"/>
      <property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
      <property name="Material" value="MresourceAnimalFat"/>
      <property name="FuelValue" value="20"/>
      <property name="Stacknumber" value="10"/>
      <property name="EconomicValue" value="20"/>
      <property name="CraftingIngredientTime" value="15"/>
      <property name="Group" value="Food/Cooking,CFFood/Cooking"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="1"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="player_eating"/>
      </property>
      <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$foodAmountAdd" operation="add" value="50"/>
        <!-- HELPGOOD: this may confuse the player in making decisions and may end up killing the player.. so using simpler alternative below
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="foodHealthAmount" operation="add" value="20" />
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyStats" stat="Health" operation="add" value="-50" />
        <display_value name="foodHealthAmount" value="-50" help="TODO: this is tricky... the above add 20 seems to lower the displayed to -30 what may confuse the player in the end..."/>
-->
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyStats" stat="Health" operation="add" value="-30"/>
        <display_value name="foodHealthAmount" value="-30"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar=".foodStaminaBonusAdd" operation="add" value="-10"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffProcessConsumables"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="fGSKFatStaminaBlockage" operation="add" value="25.0"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="iGSKNearDeathBloated" operation="set" value="10" help="this will create a debuff that will quickly be removed just to call attention: eating so much fat at once is not healthy anyway"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="CallGameEvent" event="eventGSKPlayerRagdoll"/>
      </effect_group>
    </item>
    <item name="foodCharredMeatBall">
      <property name="Tags" value="food"/>
      <property name="HoldType" value="31"/>
      <property name="CustomIcon" value="foodCharredMeat"/>
      <property name="CustomIconTint" value="200,128,128"/>
      <property name="DisplayType" value="foodWaterNegative"/>
      <property name="Meshfile" value="@:Other/Items/Misc/parcelPrefab.prefab"/>
      <property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
      <property name="Material" value="Morganic"/>
      <property name="Stacknumber" value="10"/>
      <property name="EconomicValue" value="20"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="2.1"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="player_eating"/>
      </property>
      <property name="Group" value="Food/Cooking,CFFood/Cooking"/>
      <effect_group tiered="false" name="Food Tier 0/1">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$foodAmountAdd" operation="add" value="50"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="foodHealthAmount" operation="add" value="25"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyStats" stat="water" operation="add" value="-25"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar=".foodStaminaBonusAdd" operation="add" value="50"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffProcessConsumables"/>
        <display_value name="$waterAmountAdd" value="-25"/>
      </effect_group>
    </item>
    <item name="foodGrilledMeatBall">
      <property name="Tags" value="food"/>
      <property name="HoldType" value="31"/>
      <property name="CustomIcon" value="foodGrilledMeat"/>
      <property name="CustomIconTint" value="200,128,128"/>
      <property name="DisplayType" value="food"/>
      <property name="Meshfile" value="@:Other/Items/Misc/parcelPrefab.prefab"/>
      <property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
      <property name="Material" value="Morganic"/>
      <property name="Stacknumber" value="10"/>
      <property name="EconomicValue" value="24"/>
      <property name="UnlockedBy" value="perkMasterChef,foodGrilledMeatSchematic"/>
      <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="2.1"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="player_eating"/>
      </property>
      <property name="Group" value="Food/Cooking,CFFood/Cooking"/>
      <effect_group tiered="false" name="Food Tier 1">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$foodAmountAdd" operation="add" value="50"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="foodHealthAmount" operation="add" value="25"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar=".foodStaminaBonusAdd" operation="add" value="50"/>
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffProcessConsumables"/>
      </effect_group>
    </item>
  </append>
  <append xpath="/items/item[@name='resourceAnimalFat']">
    <effect_group tiered="false">
      <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="fGSKFatStaminaBlockage" operation="add" value="2.5"/>
    </effect_group>
  </append>
  <append xpath="/items/item[@name='foodCropYuccaFruit']">
    <effect_group tiered="false">
      <triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$waterAmountAdd" operation="add" value="14" help="is the difference when crafting yucca juice"/>
    </effect_group>
  </append>
  <append xpath="/items/item[@name='resourceSnowBall']">
    <property name="StickPercent" value="1.0" help="TODO:ISSUE: is this preventing them being picked up after dropped?"/>
    <property class="Action1">
      <requirement name="CVarCompare" cvar="iGSKNearDeathHazadousWeatherLvl" operation="GTE" value="1.0"/>
      <requirement name="HasBuff" target="self" buff="buffGSKHazardousWElementHotHook40"/>
      <property name="Class" value="Eat"/>
      <property name="Delay" value="0"/>
      <property name="Sound_start" value="player_drinking"/>
    </property>
    <effect_group tiered="false" name="Drink Tier 0">
      <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="iGSKNDHWTime" operation="subtract" value="randomFloat(45,75)" help="TODO: create icecream safe recipe"/>
      <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$waterAmountAdd" operation="add" value="5"/>
      <triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffProcessConsumables"/>
      <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar=".DiseaseRoll" operation="set" value="12"/>
      <display_value name="dDysenteryRisk" value=".12"/>
      <triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar=".DiseaseRoll" operation="add" value="@$MetabolismResist"/>
      <triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffDysenteryCatchDrink">
        <requirement name="RandomRoll" seed_type="Random" min_max="1,100" operation="LTE" value="@.DiseaseRoll"/>
      </triggered_effect>
    </effect_group>
  </append>
</GhussakTweaks>
