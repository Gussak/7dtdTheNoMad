<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/buffs" help="monster powers for the player">
    <buff name="buffGSKpsyonicDeath" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Health" operation="add" value="-32000"/>
      </effect_group>
    </buff>
    <buff name="buffGSKpsyonicMutantCountNPCBUFF" hidden="false" remove_on_death="false">
      <stack_type value="ignore"/>
      <duration value="15"/>
      <update_rate value="3.0"/>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKPsyonicMarkedToDie" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKMutantNearbyCount" operation="add" value="1" target="selfAOE" range="60" target_tags="player">
          <requirement name="EntityTagCompare" tags="rabbit"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKMutantNearbyCount" operation="add" value="2" target="selfAOE" range="60" target_tags="player">
          <requirement name="EntityTagCompare" tags="vulture"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKMutantNearbyCount" operation="add" value="3" target="selfAOE" range="60" target_tags="player">
          <requirement name="EntityTagCompare" tags="zombie,walker" has_all_tags="true"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKMutantNearbyCount" operation="add" value="4" target="selfAOE" range="60" target_tags="player">
          <requirement name="EntityTagCompare" tags="zombie,walker,feral" has_all_tags="true"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKMutantNearbyCount" operation="add" value="5" target="selfAOE" range="60" target_tags="player">
          <requirement name="EntityTagCompare" tags="zombie,walker,feral,radiated" has_all_tags="true"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKPsyonicMarkedToDie" operation="set" value="1"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".iGSKPsyonicMarkedToDie" operation="set" value="0"/>
      </effect_group>
    </buff>
    <buff name="buffGSKpsyonicAttackLikeAMutant" hidden="false" remove_on_death="true" icon="7dtdMutantRabbit" icon_blink="false" icon_color="0,255,0" description_key="dkGSKpsyonicAttackLikeAMutant">
      <stack_type value="ignore"/>
      <duration value="15"/>
      <update_rate value="3.0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".iGSKMutantNearbyCount" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffStart" target="selfAOE" range="30" action="AddBuff" buff="buffGSKpsyonicMutantCountNPCBUFF" target_tags="mutant" help="this range is the real power range request, other ranges are just answers">
          <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="LT" value="40"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" target="selfAOE" range="40" action="AddBuff" buff="buffGSKpsyonicMutantCountNPCBUFF" target_tags="mutant" help="this range is the real power range request, other ranges are just answers">
          <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="GTE" value="40"/>
          <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="LT" value="50"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" target="selfAOE" range="50" action="AddBuff" buff="buffGSKpsyonicMutantCountNPCBUFF" target_tags="mutant" help="this range is the real power range request, other ranges are just answers">
          <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="GTE" value="50"/>
          <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="LT" value="60"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" target="selfAOE" range="60" action="AddBuff" buff="buffGSKpsyonicMutantCountNPCBUFF" target_tags="mutant" help="this range is the real power range request, other ranges are just answers">
          <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="GTE" value="60"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ShowToolbeltMessage" message="[TNM] You focus all your PsyPower in nearby mutants"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKNearDeathPsyPowerTimeout" operation="add" value="300" help="lvl5=60s*5 sync with time per lvl"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKPlayerRagdoll"/>
      </effect_group>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKCFGTMPval1" operation="set" value="@.iGSKMutantNearbyCount"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".fGSKCFGTMPval2" operation="set" value="0"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKMutantNearbyCount" operation="GTE" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="GTE" value="@.iGSKMutantNearbyCount"/>
        <triggered_effect trigger="onSelfBuffRemove" target="selfAOE" range="60" action="AddBuff" buff="buffGSKpsyonicDeath" help="now is 60 range in case they moved away">
          <requirement name="EntityTagCompare" target="other" tags="mutant"/>
          <requirement name="CVarCompare" cvar=".iGSKPsyonicMarkedToDie" target="other" operation="Equals" value="1"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="iGSKPsyonicChemUseCount" operation="subtract" value="@.iGSKMutantNearbyCount"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".iGSKPsyonicPermanentPowerAddTmp" operation="set" value="@.iGSKMutantNearbyCount"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".iGSKPsyonicPermanentPowerAddTmp" operation="divide" value="100"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="fGSKPsyonicPermanentPower" operation="add" value="@.iGSKPsyonicPermanentPowerAddTmp">
          <requirement name="CVarCompare" cvar="fGSKPsyonicPermanentPower" operation="LT" value="75" help="so it requires 7500 points to resist chance max of 75% on the RandomRolls"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolbeltMessage" message="[TNM] You killed all nearby mutants."/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKMutantNearbyCount" operation="GTE" value="1"/>
        <requirement name="CVarCompare" cvar="iGSKPsyonicChemUseCount" operation="LT" value="@.iGSKMutantNearbyCount"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ModifyStats" stat="Health" operation="subtract" value="@.iGSKMutantNearbyCount"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolbeltMessage" message="[TNM] Your PsyPower is not enough to kill'em all..."/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKMutantNearbyCount" operation="Equals" value="0"/>
        <triggered_effect trigger="onSelfBuffRemove" action="ShowToolbeltMessage" message="[TNM] You sense no mutants nearby."/>
      </effect_group>
    </buff>
    <buff name="buffGSKTeleportLikeAMutant" hidden="true" remove_on_death="false">
      <stack_type value="replace"/>
      <duration value="20" help="slow machines may need this much?"/>
      <update_rate value="0.5"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".bGSKEventFeedbackTeleportCompleted" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKGodModeForTeleport">
          <requirement name="!HasBuff" buff="buffGSKGodModeForTeleport"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="7"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="14"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKElctrnTele1No"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-7"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="14"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="21"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKElctrnTele2No"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-14"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="21"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="28"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKElctrnTele3No"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-21"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="28"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="35"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKElctrnTele4No"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-28"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="35"/>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="LT" value="42"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKElctrnTele5No"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-35"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKEssenceMutant" operation="GTE" value="42"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKElctrnTele6No"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="-42"/>
      </effect_group>
      <effect_group help="wait teleport and finish">
        <requirement name="CVarCompare" cvar=".bGSKEventFeedbackTeleportCompleted" operation="Equals" value="1" help="after teleport phase"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="CVarLogValue" cvar=".bGSKEventFeedbackTeleportCompleted"/>
        <triggered_effect trigger="onSelfBuffUpdate" target="selfAOE" range="4" action="AddBuff" buff="buffGSKTeleportExplosionDisintegrateFoes">
          <requirement name="!EntityTagCompare" target="other" tags="player"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKTeleportLikeAMutant"/>
      </effect_group>
    </buff>
    <buff name="buffGSKpowerImmuneLikeAWight" hidden="false" remove_on_death="false" name_key="PowerWightDmgImmunity" description_key="dkGSKpowerImmuneLikeAWight" icon="7dtdShockTip" icon_blink="false">
      <stack_type value="effect"/>
      <display_value value="iGSKpowerWightPlayerTime"/>
      <display_value_format value="time"/>
      <duration value="0"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKpowerWightPlayerTime" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKpowerWightPlayerTime" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKpowerWightPlayerTime" operation="add" value="-1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKpowerImmuneLikeAWight">
          <requirement name="CVarCompare" cvar="iGSKpowerWightPlayerTime" operation="LTE" value="0"/>
        </triggered_effect>
        <passive_effect name="ElementalDamageResist" operation="base_add" value="1000"/>
        <passive_effect name="ElementalDamageResist" operation="base_add" value="1000" tags="coredamageresist,cold,heat,electrical"/>
        <passive_effect name="PhysicalDamageResist" operation="base_add" value="1000"/>
        <passive_effect name="PhysicalDamageResist" operation="base_add" value="1000" tags="coredamageresist,cold,heat,electrical"/>
        <passive_effect name="BuffResistance" operation="base_add" value="100" tags="buffAbrasionCatch,buffArmBroken,buffArmorShredding,buffArmSprained,buffArmSprainedCHTrigger,buffBurning,buffBurningElement,buffBurningEnvironment,buffBurningEnvironmentHack,buffBurningFlamingArrow,buffBurningMolotov,buffFatiguedTrigger,buffInjuryBleeding,buffInjuryBleedingBarbedWire,buffInjuryBleedingTwo,buffInjuryConcussion,buffInjuryCrippled01,buffInjuryKnockdown01,buffInjuryStunned00,buffInjuryStunned01,buffInjuryStunned01CHTrigger,buffInjuryStunned01Shotgun,buffInjuryStunned02,buffInjuryStunned02Shotgun,buffInjuryStunned03,buffInjuryStunned03Shotgun,buffInjuryUnconscious,buffLaceration,buffLegBroken,buffLegSprainedCHTrigger,buffLegSprainedFallTrigger,BuffResistance,buffShocked,buffStayDownKO" help="protection for all things that cause almost instantaneous damage, lower max HP and make the player slow down. is this 0-100 or a percent like 0.0-1.0? but why there is value 5 and also value -0.04? DidntAdd: buffDrowning01,buffDrowning02,buffInfection01Main,buffInfectionCatch"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffDrugOhShitzDropsDuration" operation="set" value="60">
          <requirement name="CVarCompare" cvar="$buffDrugOhShitzDropsDuration" operation="LT" value="60"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDrugOhShitzDrops" help="it seems only fall damage can kill player now? so this fix it">
          <requirement name="NotHasBuff" buff="buffDrugOhShitzDrops"/>
          <requirement name="CVarCompare" cvar="$buffDrugOhShitzDropsDuration" operation="GT" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs" help="monster powers for monsters">
    <buff name="buffGSKWightPower" hidden="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <effect_group>
        <requirement name="!HasBuff" buff="buffGSKWightPowerDisable"/>
        <passive_effect name="ElementalDamageResist" operation="base_add" value="1000"/>
        <passive_effect name="ElementalDamageResist" operation="base_add" value="1000" tags="coredamageresist,cold,heat,electrical"/>
        <passive_effect name="PhysicalDamageResist" operation="base_add" value="1000"/>
        <passive_effect name="PhysicalDamageResist" operation="base_add" value="1000" tags="coredamageresist,cold,heat,electrical"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="add" value="33" help="even with this, if you shoot it a lot (50+), the EffectiveWeapons mod will set a high iEWBleedAmount that is probably what is letting it be killed w/o using the glowstick light, but that is ok as will have to spend a lot of bullets."/>
        <passive_effect name="WalkSpeed" operation="perc_add" value="8.0"/>
        <passive_effect name="RunSpeed" operation="perc_add" value="8.0" help="here as entityclass' MoveSpeedAggro seems to change nothing, why? too big values also seem to not work?"/>
      </effect_group>
    </buff>
    <buff name="buffGSKWightPowerDisable" hidden="true">
      <stack_type value="replace"/>
      <duration value="60"/>
      <effect_group>
        <requirement name="EntityTagCompare" tags="wight"/>
        <triggered_effect trigger="onSelfBuffStart" action="Ragdoll" duration="9" force="0" target="self"/>
        <passive_effect name="WalkSpeed" operation="perc_subtract" value="1.00,0.95,0" duration="0,45,60"/>
        <passive_effect name="RunSpeed" operation="perc_subtract" value="1.00,0.95,0" duration="0,45,60"/>
      </effect_group>
      <effect_group>
        <requirement name="!EntityTagCompare" tags="wight"/>
        <triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffGSKWightPowerDisable"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVampPower" hidden="true">
      <stack_type value="replace"/>
      <duration value="0"/>
      <update_rate value="10"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKVampireBuff" operation="add" value="50" help="is 5/s, sync with update_rate">
          <requirement name="StatCompareCurrent" stat="Health" operation="LT" value="@iGSKVampireBuffMax"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="add" value="50" help="sync with above"/>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs" help="Monster Essences">
    <buff name="buffGSKMonsterMixEssence" hidden="false" icon="ui_game_symbol_critical" icon_color="255,0,0" description_key="dkGSKMonsterEssence">
      <stack_type value="ignore"/>
      <duration value="0"/>
      <update_rate value="0.20"/>
      <display_value value="iGSKMonsterMixJuiceStep"/>
      <display_value_key value="{0:0}/15"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKMonsterMixJuiceStep" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKWightEssence">
          <requirement name="CVarCompare" cvar="iGSKMonsterMixJuiceStep" operation="GTE" value="0"/>
          <requirement name="CVarCompare" cvar="iGSKMonsterMixJuiceStep" operation="LT" value="5"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKVampireEssence">
          <requirement name="CVarCompare" cvar="iGSKMonsterMixJuiceStep" operation="GTE" value="5"/>
          <requirement name="CVarCompare" cvar="iGSKMonsterMixJuiceStep" operation="LT" value="10"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffGSKMutantEssence">
          <requirement name="CVarCompare" cvar="iGSKMonsterMixJuiceStep" operation="GTE" value="10"/>
          <requirement name="CVarCompare" cvar="iGSKMonsterMixJuiceStep" operation="LT" value="15"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMonsterMixJuiceStep" operation="add" value="1"/>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar="iGSKMonsterMixJuiceStep" operation="GTE" value="15"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKMonsterMixJuiceStep" operation="set" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKMonsterMixEssence"/>
      </effect_group>
    </buff>
    <buff name="buffGSKWightEssence" hidden="false" icon="ui_game_symbol_critical" icon_color="0,0,255" description_key="dkbuffGSKWightEssence">
      <stack_type value="effect"/>
      <duration value="0"/>
      <update_rate value="0.33"/>
      <display_value value="iGSKbuffGSKWightEssenceTm"/>
      <display_value_format value="time"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceWight" operation="add" value="1.0"/>
        <triggered_effect help="FixTinyRandomFloat:was iGSKEssenceWight add randomFloat(0.5,1.5)" trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="set" value="randomInt(500,1500)"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="divide" value="1000" help="FixTinyRandomFloat"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKEssenceWight" operation="add" value="@.fGSKFixTinyRandomFloatTmp" help="FixTinyRandomFloat: was randomFloat(0.5,1.5)"/>
        <!-- HELPGOOD:FixTinyRandomFloat:OriginalLineData:LineNumber=16896:        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKEssenceWight" operation="add" value="randomFloat(0.5,1.5)"/> -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEssenceWightPermBonus" operation="add" value="0.1"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKEssenceWightPermBonus" operation="add" value="0.1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceStack" operation="set" value="1">
          <requirement name="!HasBuff" buff="buffGSKMutantEssence"/>
          <requirement name="!HasBuff" buff="buffGSKVampireEssence"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStack" action="AddBuff" buff="buffGSKEssenceSideEffects"/>
        <passive_effect name="StaminaMax" operation="base_add" value="@iGSKEssenceWight"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKbuffGSKWightEssenceTm" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKbuffGSKWightEssenceTm" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKbuffGSKWightEssenceTm" operation="add" value="@iGSKEssenceWight" help="the more you use the better it becomes"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKbuffGSKWightEssenceTm" operation="add" value="-0.33" help="sync with update_rate"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKWightEssence">
          <requirement name="CVarCompare" cvar="iGSKbuffGSKWightEssenceTm" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="StatCompareCurrent" stat="health" operation="GT" value="@iGSKEssenceWightMinHP"/>
        <requirement name="StatCompareModMax" stat="Stamina" operation="GTE" value="@.iGSKEssenceWightModMaxStam"/>
        <requirement name="StatCompareCurrent" stat="Stamina" operation="LT" value="@iGSKEssenceWightMinStam"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="add" value="-1"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Stamina" operation="add" value="@.iGSKEssenceWightAddStam"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="PlaySound" sound="player#death" play_in_head="true" help="TODO: some other sound? and/or some screen effect?"/>
      </effect_group>
    </buff>
    <buff name="buffGSKVampireEssence" hidden="false" icon="ui_game_symbol_critical" icon_color="128,0,255" description_key="dkbuffGSKVampireEssence">
      <stack_type value="effect"/>
      <duration value="0"/>
      <update_rate value="0.33"/>
      <display_value value="iGSKbuffGSKVampireEssenceTm"/>
      <display_value_format value="time"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceVampire" operation="add" value="1.0"/>
        <triggered_effect help="FixTinyRandomFloat:was iGSKEssenceVampire add randomFloat(0.5,1.5)" trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="set" value="randomInt(500,1500)"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="divide" value="1000" help="FixTinyRandomFloat"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKEssenceVampire" operation="add" value="@.fGSKFixTinyRandomFloatTmp" help="FixTinyRandomFloat: was randomFloat(0.5,1.5)"/>
        <!-- HELPGOOD:FixTinyRandomFloat:OriginalLineData:LineNumber=16932:        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKEssenceVampire" operation="add" value="randomFloat(0.5,1.5)"/> -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEssenceVampirePermBonus" operation="add" value="0.1"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKEssenceVampirePermBonus" operation="add" value="0.1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceStack" operation="set" value="1">
          <requirement name="!HasBuff" buff="buffGSKMutantEssence"/>
          <requirement name="!HasBuff" buff="buffGSKWightEssence"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStack" action="AddBuff" buff="buffGSKEssenceSideEffects"/>
        <passive_effect name="HealthMax" operation="base_add" value="@iGSKEssenceVampire"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKbuffGSKVampireEssenceTm" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKbuffGSKVampireEssenceTm" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKbuffGSKVampireEssenceTm" operation="add" value="@iGSKEssenceVampire"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKbuffGSKVampireEssenceTm" operation="add" value="-0.33" help="sync with udpate_rate"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKVampireEssence">
          <requirement name="CVarCompare" cvar="iGSKbuffGSKVampireEssenceTm" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
      <effect_group>
        <requirement name="CVarCompare" cvar=".iGSKPlayerVampireStrikeCount" operation="GT" value="0"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyStats" stat="Health" operation="add" value="5"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".iGSKPlayerVampireStrikeCount" operation="add" value="-1"/>
      </effect_group>
    </buff>
    <buff name="buffGSKMutantEssence" hidden="false" icon="ui_game_symbol_critical" icon_color="220,180,64" description_key="dkbuffGSKMutantEssence">
      <stack_type value="effect"/>
      <duration value="0"/>
      <update_rate value="5"/>
      <display_value value="iGSKbuffGSKMutantEssenceTm"/>
      <display_value_format value="time"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="1.0"/>
        <triggered_effect help="FixTinyRandomFloat:was iGSKEssenceMutant add randomFloat(0.5,1.5)" trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="set" value="randomInt(500,1500)"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="divide" value="1000" help="FixTinyRandomFloat"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="@.fGSKFixTinyRandomFloatTmp" help="FixTinyRandomFloat: was randomFloat(0.5,1.5)"/>
        <!-- HELPGOOD:FixTinyRandomFloat:OriginalLineData:LineNumber=16966:        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKEssenceMutant" operation="add" value="randomFloat(0.5,1.5)"/> -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="fGSKEssenceMutantPermBonus" operation="add" value="0.1"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKEssenceMutantPermBonus" operation="add" value="0.1"/>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceStack" operation="set" value="1">
          <requirement name="!HasBuff" buff="buffGSKVampireEssence"/>
          <requirement name="!HasBuff" buff="buffGSKWightEssence"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStack" action="AddBuff" buff="buffGSKEssenceSideEffects"/>
        <passive_effect name="HealthMax" operation="base_add" value="@iGSKEssenceMutant">
          <requirement name="HasBuff" buff="buffGSKVampireEssence"/>
        </passive_effect>
        <passive_effect name="StaminaMax" operation="base_add" value="@iGSKEssenceMutant">
          <requirement name="HasBuff" buff="buffGSKWightEssence"/>
        </passive_effect>
        <passive_effect name="RunSpeed" operation="perc_add" value="2">
          <requirement name="IsNight"/>
          <requirement name="HasBuff" buff="buffGSKVampireEssence"/>
        </passive_effect>
        <passive_effect name="RunSpeed" operation="perc_add" value="1">
          <requirement name="HasBuff" buff="buffGSKWightEssence"/>
        </passive_effect>
        <passive_effect name="JumpStrength" operation="perc_add" value="1">
          <requirement name="HasBuff" buff="buffGSKWightEssence"/>
        </passive_effect>
        <passive_effect name="AttacksPerMinute" operation="perc_add" value="1">
          <requirement name="HasBuff" buff="buffGSKVampireEssence"/>
          <requirement name="HasBuff" buff="buffGSKWightEssence"/>
        </passive_effect>
        <triggered_effect help="FixTinyRandomFloat:was fGSKRadiationMessDNA subtract randomFloat(0.05,0.10)" trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="set" value="randomInt(50,100)"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="divide" value="1000" help="FixTinyRandomFloat"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKRadiationMessDNA" operation="subtract" value="@.fGSKFixTinyRandomFloatTmp" help="FixTinyRandomFloat: was randomFloat(0.05,0.10)">
          <!-- HELPGOOD:FixTinyRandomFloat:OriginalLineData:LineNumber=16998:        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKRadiationMessDNA" operation="subtract" value="randomFloat(0.05,0.10)"> -->
          <requirement name="CVarCompare" cvar="fGSKRadiationMessDNA" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect help="FixTinyRandomFloat:was fGSKCosmicRadMessDNA subtract randomFloat(0.05,0.10)" trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="set" value="randomInt(50,100)"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar=".fGSKFixTinyRandomFloatTmp" operation="divide" value="1000" help="FixTinyRandomFloat"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKCosmicRadMessDNA" operation="subtract" value="@.fGSKFixTinyRandomFloatTmp" help="FixTinyRandomFloat: was randomFloat(0.05,0.10)">
          <!-- HELPGOOD:FixTinyRandomFloat:OriginalLineData:LineNumber=17001:        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="fGSKCosmicRadMessDNA" operation="subtract" value="randomFloat(0.05,0.10)"> -->
          <requirement name="CVarCompare" cvar="fGSKCosmicRadMessDNA" operation="GT" value="0"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKbuffGSKMutantEssenceTm" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKbuffGSKMutantEssenceTm" operation="add" value="60"/>
        <triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="iGSKbuffGSKMutantEssenceTm" operation="add" value="@iGSKEssenceMutant"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="iGSKbuffGSKMutantEssenceTm" operation="add" value="-5" help="sync with udpate_rate"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrowning01"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrowning02"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrowning03"/>
        <triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffGSKMutantEssence">
          <requirement name="CVarCompare" cvar="iGSKbuffGSKMutantEssenceTm" operation="LTE" value="0"/>
        </triggered_effect>
      </effect_group>
    </buff>
    <buff name="buffGSKEssenceSideEffects">
      <stack_type value="ignore"/>
      <duration value="0.05"/>
      <effect_group>
        <triggered_effect trigger="onSelfBuffStart" action="ModifyStats" stat="Water" operation="subtract" value="3"/>
        <!-- HELPGOOD: the essence item already adds chem use thru a patch here -->
        <triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="iGSKEssenceStack" operation="add" value="1"/>
        <triggered_effect trigger="onSelfBuffStart" action="CallGameEvent" event="eventGSKPlayerRagdoll">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,10" operation="LT" value="@iGSKEssenceStack"/>
        </triggered_effect>
        <triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffInjuryStunned03">
          <requirement name="RandomRoll" seed_type="Random" min_max="0,10" operation="LT" value="@iGSKEssenceStack"/>
        </triggered_effect>
      </effect_group>
    </buff>
  </append>
  <append xpath="/buffs/buff[@name='buffStatusCheck01']/effect_group/triggered_effect[@action='AddBuff' and @buff='buffDrowning01']" help="Monster Essences: mutant essence lets you breath underwater">
    <requirement name="!HasBuff" buff="buffGSKMutantEssence"/>
  </append>
  <!--
	HELPGOOD: TODO: at permanent generic check buff, there are stuff for essences and monsters spawns, move to here too
-->
</GhussakTweaks>
