<?xml version="1.0"?>
<GhussakTweaks>
  <append xpath="/entity_classes/entity_class[@name='playerMale']/effect_group/triggered_effect[(@trigger='onSelfEnteredGame' or @trigger='onSelfRespawn') and @action='AddBuff' and @target='self']/@buff">,buffGSKExtraBloodMoonCheck1</append>
  <!-- HELPGOOD:  zombie crowd: killing stronger zombies will spawn weaker zombie crowds
		TODO: not working? try onSelfKilledOther from player attacks, and tag these zombies as: crowdspawner
		-->
  <append xpath="/entity_classes/entity_class[    starts-with(@name,'zombieBiker') or    starts-with(@name,'zombieMaleHazmat') or    starts-with(@name,'zombieMiner') or    starts-with(@name,'zombieSkateboarder') or    starts-with(@name,'zombieSoldier') or    starts-with(@name,'zombieUtilityWorker') or        starts-with(@name,'zombieSpider') or    starts-with(@name,'zombieSteveCrawler')   ]" help="zombie crowd: armored (at least helmeted) or minor special">
    <effect_group help="zombie crowd">
      <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar=".iGSKzombieCrowd" operation="add" value="randomInt(0,1)" target="selfAOE" range="60" target_tags="player"/>
    </effect_group>
  </append>
  <append xpath="/entity_classes/entity_class[    starts-with(@name,'zombieFatHawaiian') or    starts-with(@name,'zombieFemaleFat') or    starts-with(@name,'zombieLumberjack')   ]" help="zombie crowd">
    <effect_group help="zombie crowd: strong ones">
      <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar=".iGSKzombieCrowd" operation="add" value="randomInt(0,2)" target="selfAOE" range="60" target_tags="player"/>
    </effect_group>
  </append>
  <append xpath="/entity_classes/entity_class[    starts-with(@name,'zombieWight') or    starts-with(@name,'zombieMutated') or    starts-with(@name,'zombieDemolition') or    starts-with(@name,'zombieFatCop') or    starts-with(@name,'zombieScreamer')   ]" help="zombie crowd">
    <effect_group help="zombie crowd: extra special">
      <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar=".iGSKzombieCrowd" operation="add" value="randomInt(0,3)" target="selfAOE" range="60" target_tags="player"/>
    </effect_group>
  </append>
  <!--HELPGOOD: zombie crowd: granted extras -->
  <append xpath="/entity_classes/entity_class[    contains(@name,'Feral')   ]" help="zombie crowd">
    <effect_group help="zombie crowd: granted extra for feral">
      <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar=".iGSKzombieCrowd" operation="add" value="1" target="selfAOE" range="60" target_tags="player"/>
    </effect_group>
  </append>
  <append xpath="/entity_classes/entity_class[    contains(@name,'Radiated')   ]" help="zombie crowd">
    <effect_group help="zombie crowd: granted extra for radiated">
      <triggered_effect trigger="onSelfDied" action="ModifyCVar" cvar=".iGSKzombieCrowd" operation="add" value="2" target="selfAOE" range="60" target_tags="player"/>
    </effect_group>
  </append>
</GhussakTweaks>
